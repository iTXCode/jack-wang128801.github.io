<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Yes,I can.">
<meta property="og:type" content="website">
<meta property="og:title" content="jack-wang&#39;s blog">
<meta property="og:url" content="https://jack-wang128801.github.io/page/3/index.html">
<meta property="og:site_name" content="jack-wang&#39;s blog">
<meta property="og:description" content="Yes,I can.">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="jack-wang&#39;s blog">
<meta name="twitter:description" content="Yes,I can.">



  <link rel="alternate" href="/atom.xml" title="jack-wang's blog" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://jack-wang128801.github.io/page/3/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>jack-wang's blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">jack-wang's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Fly to the distance</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Cambiar a barra de navegación">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-站点简介">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>站点简介</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-工作站">

    
    
    
      
    

    

    <a href="/jun/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>工作站</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-关于我">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于我</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-标签">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-类别">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>类别</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-提交进程">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>提交进程</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Buscar</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Buscando..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/24/CPP类与对象下/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/24/CPP类与对象下/" class="post-title-link" itemprop="url">c++类与对象(下)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-24 10:02:00" itemprop="dateCreated datePublished" datetime="2019-03-24T10:02:00+08:00">2019-03-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Editado el</span>
                
                <time title="Modificado por: 2019-03-30 16:33:51" itemprop="dateModified" datetime="2019-03-30T16:33:51+08:00">2019-03-30</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">62k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">56 minutos.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-再谈构造函数"><a href="#1-再谈构造函数" class="headerlink" title="1. 再谈构造函数"></a>1. 再谈构造函数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Date(<span class="keyword">int</span> year)&#123;  <span class="comment">//构造函数用来初始变量</span></span><br><span class="line">        _year = year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> _year;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2019</span>)</span></span>;</span><br><span class="line">    <span class="comment">//自动调用Date(int year ) 函数</span></span><br><span class="line">    Date d2 = <span class="number">2018</span>;</span><br><span class="line">    <span class="comment">//也可以自动调用Date(int year ) 函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-2-初始化列表"><a href="#1-2-初始化列表" class="headerlink" title="1.2 初始化列表"></a>1.2 初始化列表</h4><blockquote>
<ul>
<li>存在于函数名与函数体之间</li>
<li>初始化列表：以一个冒号开始，接着是一个以逗号分隔的数据成员列表，每个”成员变量”后面跟一个放在括号中的初始值或表达式。</li>
<li>默认构造函数:无参或者全缺省</li>
</ul>
</blockquote>
<h5 id="如下例"><a href="#如下例" class="headerlink" title="如下例"></a>如下例</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Date(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span><br><span class="line"> : _year(year)</span><br><span class="line"> , _month(month)</span><br><span class="line"> , _day(day)</span><br><span class="line"> &#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="1-3关键字explicit"><a href="#1-3关键字explicit" class="headerlink" title="1.3关键字explicit"></a>1.3关键字explicit</h4><blockquote>
<p>构造函数不仅可以构造与初始化对象，对于单个参数的构造函数，还具有类型转换的作用</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Date(<span class="keyword">int</span> year)</span><br><span class="line">		:_year(year)</span><br><span class="line">	&#123;&#125;</span><br><span class="line">	<span class="comment">/*explicit Date(int year)</span></span><br><span class="line"><span class="comment">		:_year(year)</span></span><br><span class="line"><span class="comment">	&#123;&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _year;</span><br><span class="line">	<span class="keyword">int</span> _month;</span><br><span class="line">	<span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestDate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2018</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 用一个整形变量给日期类型对象赋值</span></span><br><span class="line">	<span class="comment">// 实际编译器背后会用2019构造一个无名对象，最后用无名对象给d1对象进行赋值</span></span><br><span class="line">	d1 = <span class="number">2019</span>;<span class="comment">//使用explicit时这种赋值也可以使用,阻止单三形式的隐式转换</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	TestDate();</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上述代码可读性不是很好，用explicit修饰构造函数，将会禁止单参构造函数的隐式转换。</p>
</blockquote>
<h4 id="​-2-关键字-static"><a href="#​-2-关键字-static" class="headerlink" title="​ 2.关键字  static"></a>​ 2.关键字  static</h4><h4 id="2-1-概念"><a href="#2-1-概念" class="headerlink" title="2.1 概念"></a>2.1 概念</h4><h6 id="声明为static的类成员称为类的静态成员，用static修饰的成员变量，称之为静态成员变量；"><a href="#声明为static的类成员称为类的静态成员，用static修饰的成员变量，称之为静态成员变量；" class="headerlink" title="声明为static的类成员称为类的静态成员，用static修饰的成员变量，称之为静态成员变量；"></a>声明为static的类成员称为类的静态成员，用static修饰的成员变量，称之为静态成员变量；</h6><h6 id="用static修饰的成员函数，称之为静态成员函数。静态的成员变量一定要在类外进行初始化"><a href="#用static修饰的成员函数，称之为静态成员函数。静态的成员变量一定要在类外进行初始化" class="headerlink" title="用static修饰的成员函数，称之为静态成员函数。静态的成员变量一定要在类外进行初始化"></a>用static修饰的成员函数，称之为静态成员函数。静态的成员变量一定要在类外进行初始化</h6><h6 id="对于静态成员函数不能访问它的成员变量，因为他没有this指针"><a href="#对于静态成员函数不能访问它的成员变量，因为他没有this指针" class="headerlink" title="对于静态成员函数不能访问它的成员变量，因为他没有this指针"></a>对于静态成员函数不能访问它的成员变量，因为他没有this指针</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    Date()&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">Date (<span class="keyword">const</span> Date&amp;d1)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Date d;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;Date::count&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;d.count&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//公有成员的访问方式</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>静态函数需要用类名+作用限定符去调用或者用对象去调用(. 操作符);</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此情况为static定义的函数为公有的</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  Date(<span class="keyword">int</span> year)&#123;</span><br><span class="line">      _count++;</span><br><span class="line">      _year = year;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Date(int)"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  Date(<span class="keyword">const</span> Date&amp; d1)&#123;</span><br><span class="line"></span><br><span class="line">      _count++;</span><br><span class="line">      _year = d1._year;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Dtae(const Date&amp; d1)"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//private: //将static定义为私有成员时就不能用d1._count 的方式访问了。</span></span><br><span class="line">  <span class="keyword">int</span> _year;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span> _count; </span><br><span class="line">  <span class="comment">//static定义的变量在类外面进行初始化</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Date::_count = <span class="number">0</span>; <span class="comment">//static定义的变量在类外初始化格式为"类型+作用域"</span></span><br><span class="line"></span><br><span class="line"><span class="function">Date <span class="title">fun1</span><span class="params">(Date d1)</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> d1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2019</span>)</span></span>;</span><br><span class="line">  <span class="function">Date <span class="title">d2</span><span class="params">(<span class="number">2015</span>)</span></span>;</span><br><span class="line">  <span class="function">Date <span class="title">d3</span><span class="params">(<span class="number">2015</span>)</span></span>;<span class="comment">//到此为止已经调用了3次构造函数</span></span><br><span class="line">  fun1(d1);    <span class="comment">//</span></span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; d1._count&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; &amp;d1._count &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; &amp;d2._count &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; &amp;d3._count &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  system(<span class="string">"pause"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此情况为static定义的函数为私有的</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">  Date(<span class="keyword">int</span> year)&#123;</span><br><span class="line">      _count++;</span><br><span class="line">      _year = year;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Date(int)"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Date(<span class="keyword">const</span> Date&amp; d1)&#123;</span><br><span class="line"></span><br><span class="line">      _count++;</span><br><span class="line">     _year = d1._year;</span><br><span class="line">     <span class="built_in">cout</span> &lt;&lt; <span class="string">"Dtae(const Date&amp; d1)"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="comment">//作用是将count 的值传到需要调用count的地方</span></span><br><span class="line">      <span class="keyword">return</span> _count;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//改为静态函数后,出现错误，静态函数不能调用非静态函数     </span></span><br><span class="line"> <span class="comment">// static int getCount()&#123;</span></span><br><span class="line"> <span class="comment">//                    //</span></span><br><span class="line"> <span class="comment">//       return _count;</span></span><br><span class="line"> <span class="comment">//  &#125;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> _year;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span> _count;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Date::_count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//static定义的变量在类外初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function">Date <span class="title">fun1</span><span class="params">(Date d1)</span></span>&#123;             <span class="comment">//fun(Date *this)</span></span><br><span class="line">                      <span class="comment">//非静态函数可以调用非静态函数</span></span><br><span class="line">  <span class="keyword">return</span> d1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2019</span>)</span></span>;</span><br><span class="line">  <span class="function">Date <span class="title">d2</span><span class="params">(<span class="number">2015</span>)</span></span>;</span><br><span class="line">  <span class="function">Date <span class="title">d3</span><span class="params">(<span class="number">2015</span>)</span></span>;</span><br><span class="line">  fun1(d1);</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; d1.getCount() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  system(<span class="string">"pause"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-特性"><a href="#2-2-特性" class="headerlink" title="2.2       特性"></a>2.2       特性</h4><blockquote>
<p>静态成员为所有类对象所共享，不属于某个具体的实例</p>
<p>静态成员变量必须在类外定义，定义时不添加static关键字</p>
<p> 类静态成员即可用类名::静态成员或者对象.静态成员来访问</p>
<p>静态成员函数没有隐藏的this指针，不能访问任何非静态成员</p>
<p> 静态成员和类的普通成员一样，也有public、protected、private3种访问级别，也可以具有返回值，const修饰符等参数</p>
</blockquote>
<h3 id="3-c-11的成员初始化新玩法"><a href="#3-c-11的成员初始化新玩法" class="headerlink" title="3.c++ 11的成员初始化新玩法"></a>3.c++ 11的成员初始化新玩法</h3><h6 id="c-11-支持非静态的成员变量在声明时直接进行初始化"><a href="#c-11-支持非静态的成员变量在声明时直接进行初始化" class="headerlink" title="c++11 支持非静态的成员变量在声明时直接进行初始化"></a>c++11 支持非静态的成员变量在声明时直接进行初始化</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">	Date(<span class="keyword">int</span> year,<span class="keyword">int</span> month,<span class="keyword">int</span> day)<span class="comment">//构造函数</span></span><br><span class="line">	:_year(year)      <span class="comment">//初始化可以放在初始化列表哪里构造函数赋值实现                               //也可以在声明时直接赋值</span></span><br><span class="line">	,_month(month)</span><br><span class="line">	,_day(day)</span><br><span class="line">        <span class="comment">//既在这里完成了函数参数的初始化</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; _year &lt;&lt;<span class="string">"-"</span>&lt;&lt; _month&lt;&lt;<span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">//输出的结果即为传参时传递上来的值</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _year;</span><br><span class="line">	<span class="keyword">int</span> _month;</span><br><span class="line">	<span class="keyword">int</span> _day;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2019</span>,<span class="number">3</span>,<span class="number">30</span>)</span></span>;</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>###### </p>
</blockquote>
<h3 id="4-友元"><a href="#4-友元" class="headerlink" title="4. 友元"></a>4. 友元</h3><blockquote>
<h6 id="友元分为：友元函数和友元类"><a href="#友元分为：友元函数和友元类" class="headerlink" title="友元分为：友元函数和友元类"></a>友元分为：友元函数和友元类</h6><h6 id="友元提供了一种突破封装的方式，有时提供了便利。但是友元会增加耦合度，破坏了封装，所以友元不宜多用"><a href="#友元提供了一种突破封装的方式，有时提供了便利。但是友元会增加耦合度，破坏了封装，所以友元不宜多用" class="headerlink" title="友元提供了一种突破封装的方式，有时提供了便利。但是友元会增加耦合度，破坏了封装，所以友元不宜多用"></a>友元提供了一种突破封装的方式，有时提供了便利。但是友元会增加耦合度，破坏了封装，所以友元不宜多用</h6></blockquote>
<h4 id="4-1友元函数"><a href="#4-1友元函数" class="headerlink" title="4.1友元函数"></a>4.1友元函数</h4><blockquote>
<p>友元函数可以直接访问类的私有成员，它是定义在类外部的普通函数，不属于任何类，但需要在类的内部声明，声明时需要加friend关键字</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Date(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span><br><span class="line"> : _year(year)</span><br><span class="line"> , _month(month)</span><br><span class="line"> , _day(day)</span><br><span class="line"> &#123;&#125;</span><br><span class="line"> </span><br><span class="line"> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; _cout)</span><br><span class="line"> &#123;</span><br><span class="line"> _cout&lt;&lt;d._year&lt;&lt;<span class="string">"-"</span>&lt;&lt;d._month&lt;&lt;<span class="string">"-"</span>&lt;&lt;d._day;</span><br><span class="line"> <span class="keyword">return</span> _cout;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line">prvate:</span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="function">Date <span class="title">d</span><span class="params">(<span class="number">2017</span>, <span class="number">12</span>, <span class="number">24</span>)</span></span>;</span><br><span class="line"> d&lt;&lt;<span class="built_in">cout</span>;</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; _cout, <span class="keyword">const</span> Date&amp; d);</span><br><span class="line"><span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp; _cin, <span class="keyword">const</span> Date&amp; d);</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Date(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span><br><span class="line"> : _year(year)</span><br><span class="line">     , _month(month)</span><br><span class="line"> , _day(day)</span><br><span class="line"> &#123;&#125;</span><br><span class="line"> </span><br><span class="line">prvate:</span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day</span><br><span class="line">&#125;;</span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; _cout, <span class="keyword">const</span> Date&amp; d)</span><br><span class="line">&#123;</span><br><span class="line"> _cout&lt;&lt;d._year&lt;&lt;<span class="string">"-"</span>&lt;&lt;d._month&lt;&lt;<span class="string">"-"</span>&lt;&lt;d._day;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> _cout;</span><br><span class="line">&#125;</span><br><span class="line">istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp; _cin, <span class="keyword">const</span> Date&amp; d)</span><br><span class="line">&#123;</span><br><span class="line"> _cin&gt;&gt;d._year;</span><br><span class="line"> _cin&gt;&gt;d._month;</span><br><span class="line"> _cin&gt;&gt;d._day;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> _cin;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> Date d;</span><br><span class="line"> <span class="built_in">cin</span>&gt;&gt;d;</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;d&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明:<br>友元函数可访问类的私有成员，但不是类的成员函数<br>友元函数不能用const修饰<br>友元函数可以在类定义的任何地方声明，不受类访问限定符限制<br>一个函数可以是多个类的友元函数<br>友元函数的调用与普通函数的调用和原理相同</p>
</blockquote>
<h4 id="4-2-友元类"><a href="#4-2-友元类" class="headerlink" title="4.2 友元类"></a>4.2 友元类</h4><blockquote>
<p>友元类的所有成员函数都可以是另一个类的友元函数，都可以访问另一个类中的非公有成员。</p>
<p>友元关系是单向的，不具有交换性。</p>
<p>比如下述Time类和Date类，在Time类中声明Date类为其友元类，那么可以在Date类中直接访问Time</p>
<p>类的私有成员变量，但想在Time类中访问Date类中私有的成员变量则不行。</p>
<p>友元关系不能传递.如果B是A的友元，C是B的友元，则不能说明C时A的友元</p>
</blockquote>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">Time</span>             //<span class="title">Time</span> 可以访问 <span class="title">Date</span> 对象的所有成员</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&#125;;</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Time</span>&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">Date</span>            //<span class="title">Date</span> 可以访问 <span class="title">Time</span> 对象的所以成员</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&#125;;</span></span><br></pre></td></tr></table></figure>
<h6 id="友元关系不能传递"><a href="#友元关系不能传递" class="headerlink" title="友元关系不能传递"></a>友元关系不能传递</h6><p><img src="https://wx1.sinaimg.cn/mw690/0071OE7sly1g1ds7y7iolj30pu0b90ta.jpg" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>;</span> <span class="comment">// 前置声明</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Time</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"> <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">Date</span>;</span> <span class="comment">// 声明日期类为时间类的友元类，则在日期类中就直接访问Time类中的私有成员变量</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Time(<span class="keyword">int</span> hour, <span class="keyword">int</span> minute, <span class="keyword">int</span> second)</span><br><span class="line"> : _hour(hour)</span><br><span class="line"> , _minute(minute)</span><br><span class="line"> , _second(second)</span><br><span class="line"> &#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">int</span> _hour;</span><br><span class="line"> <span class="keyword">int</span> _minute;</span><br><span class="line"> <span class="keyword">int</span> _second;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Date(<span class="keyword">int</span> year = <span class="number">1900</span>, <span class="keyword">int</span> month = <span class="number">1</span>, <span class="keyword">int</span> day = <span class="number">1</span>)</span><br><span class="line"> : _year(year)</span><br><span class="line"> , _month(month)</span><br><span class="line"> , _day(day)</span><br><span class="line"> &#123;&#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">SetTimeOfDate</span><span class="params">(<span class="keyword">int</span> hour, <span class="keyword">int</span> minute, <span class="keyword">int</span> second)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> <span class="comment">// 直接访问时间类私有的成员变量</span></span><br><span class="line"> <span class="keyword">_t</span>._hour = hour;</span><br><span class="line"> <span class="keyword">_t</span>._minute = minute;</span><br><span class="line"> <span class="keyword">_t</span>.second = second;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day;</span><br><span class="line"> Time <span class="keyword">_t</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="5-内部类"><a href="#5-内部类" class="headerlink" title="5. 内部类"></a>5. 内部类</h3><h4 id="特性："><a href="#特性：" class="headerlink" title="特性："></a>特性：</h4><h6 id="内部类可以定义在外部类的public、protected、private都是可以的。"><a href="#内部类可以定义在外部类的public、protected、private都是可以的。" class="headerlink" title="内部类可以定义在外部类的public、protected、private都是可以的。"></a>内部类可以定义在外部类的public、protected、private都是可以的。</h6><h6 id="注意内部类可以直接访问外部类中的static、枚举成员，不需要外部类的对象-类名。"><a href="#注意内部类可以直接访问外部类中的static、枚举成员，不需要外部类的对象-类名。" class="headerlink" title="注意内部类可以直接访问外部类中的static、枚举成员，不需要外部类的对象/类名。"></a>注意内部类可以直接访问外部类中的static、枚举成员，不需要外部类的对象/类名。</h6><h6 id="sizeof-外部类-外部类，和内部类没有任何关系。"><a href="#sizeof-外部类-外部类，和内部类没有任何关系。" class="headerlink" title="sizeof(外部类)=外部类，和内部类没有任何关系。"></a>sizeof(外部类)=外部类，和内部类没有任何关系。</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//B是A的内部类,相当于B是A的友元类</span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">B</span>&#123;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(A&amp; a)</span></span>&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; a._a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			<span class="comment">//外部类的普通的私有成员只能通过 对象. 的方式访问</span></span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; _s &lt;&lt; <span class="built_in">endl</span>;          <span class="comment">//直接访问</span></span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; a._s &lt;&lt; <span class="built_in">endl</span>;        <span class="comment">//对象. 的方式访问</span></span><br><span class="line">			<span class="comment">//外部类的静态的私有成员可以通过 对象. 的方式访问 也可以直接访问</span></span><br><span class="line">	</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">private</span>:</span><br><span class="line">		<span class="keyword">int</span> _b;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">Display</span><span class="params">(B&amp; b)</span></span>&#123;</span><br><span class="line">			<span class="comment">//外部类对于内部类没有任何优越的访问权限，不能访问内部的私有成(_b)</span></span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; b._b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _a=<span class="number">10</span>;<span class="comment">//非静态变可以直接在定义的时候初始化</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> _s;<span class="comment">//静态变量必须在类外面进行初始化</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> A::_s = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	 A::B b;</span><br><span class="line">	 A a;</span><br><span class="line">	 b.display(a);</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">	<span class="comment">//B是A的内部类，相当于B是A的友元类</span></span><br><span class="line">	<span class="keyword">public</span>: <span class="comment">//若不写作用限定符则会出现访问不了B的现象</span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">B</span>&#123;</span></span><br><span class="line">	<span class="keyword">public</span> :</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(A&amp; a)</span></span>&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; a._a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			<span class="comment">//外部类的普通成员必须通过“对象 . ”的方式去访问</span></span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; _s &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">			<span class="comment">//外部类的静态成员可以通过“对象 .”的方式去访问</span></span><br><span class="line">			<span class="comment">// 也可以直接去访问</span></span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; a._s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">private</span>:</span><br><span class="line">		<span class="keyword">int</span> b;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(B&amp; b)</span></span>&#123;</span><br><span class="line">        <span class="comment">//外部类对于内部类没有任何优越的访问权限，不能访问</span></span><br><span class="line">		<span class="comment">//内部类的私有成员</span></span><br><span class="line">		<span class="comment">//cout &lt;&lt; b._b &lt;&lt; endl;</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _a=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> _s;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> A::_s = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	A::B a;</span><br><span class="line">	a.Print(A());</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><h6 id="2-求1-2-3-…-n，要求不能使用乘除法、for、while、if、else、switch、case等关键字及条件判断语句（A-B-C"><a href="#2-求1-2-3-…-n，要求不能使用乘除法、for、while、if、else、switch、case等关键字及条件判断语句（A-B-C" class="headerlink" title="2.求1+2+3+…+n，要求不能使用乘除法、for、while、if、else、switch、case等关键字及条件判断语句（A?B:C)."></a>2.求1+2+3+…+n，要求不能使用乘除法、for、while、if、else、switch、case等关键字及条件判断语句（A?B:C).</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Sum</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        Sum()&#123;</span><br><span class="line"></span><br><span class="line">            _sum += _i;</span><br><span class="line"></span><br><span class="line">            ++_i;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Sum_solution</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        _sum=<span class="number">0</span>;    <span class="comment">//重新初始化，防止多次调用造成多加的情况</span></span><br><span class="line">        _i=<span class="number">1</span>;</span><br><span class="line">        Sum arr[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">return</span> _sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> _sum;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> _i;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> A::_sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> A::_i = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    A a;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a.Sum_solution(<span class="number">0</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="输入年月日-判断改天是今年的多少天"><a href="#输入年月日-判断改天是今年的多少天" class="headerlink" title="输入年月日,判断改天是今年的多少天"></a>输入年月日,判断改天是今年的多少天</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> days[<span class="number">13</span>] = &#123; <span class="number">0</span>, <span class="number">31</span>, <span class="number">59</span>, <span class="number">90</span>, <span class="number">120</span>, <span class="number">151</span>, <span class="number">181</span>, <span class="number">212</span>, <span class="number">243</span>, <span class="number">273</span>, <span class="number">304</span>, <span class="number">334</span>, <span class="number">365</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> year, month, day;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; year&gt;&gt; month&gt;&gt; day;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> total = days[month - <span class="number">1</span>] + day;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (month&gt;<span class="number">2</span>)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((year % <span class="number">4</span> == <span class="number">0</span>) &amp;&amp; (year % <span class="number">100</span> != <span class="number">0</span>) || (year % <span class="number">400</span> == <span class="number">0</span>))&#123;</span><br><span class="line"></span><br><span class="line">            total += <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; total &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/22/c语言内存管理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/22/c语言内存管理/" class="post-title-link" itemprop="url">c语言内存管理</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-22 16:57:25 / Modificado por: 18:19:18" itemprop="dateCreated datePublished" datetime="2019-03-22T16:57:25+08:00">2019-03-22</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">21k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">19 minutos.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一：数据在内存中的存储"><a href="#一：数据在内存中的存储" class="headerlink" title="一：数据在内存中的存储"></a>一：数据在内存中的存储</h1><h3 id="数据类型介绍"><a href="#数据类型介绍" class="headerlink" title="数据类型介绍"></a>数据类型介绍</h3><h4 id="1-基本的内存类型："><a href="#1-基本的内存类型：" class="headerlink" title="1.基本的内存类型："></a>1.基本的内存类型：</h4><p>类型的意义<br>1.使用这个类型开辟内存空间的大小（大小决定了使用范围）。<br>2.如何看待内存空间的视角。</p>
<blockquote>
<p>char                                       //字符数据类型占1个字节<br>shot                                       //短整形占2个字节<br>int                                          //整形占4个字节<br>long                                       // 长整形占4个字节<br>long long                               //更长的整形占8个字节<br>float                                        //单精度浮点数占4个字节<br>double                                     // 双精度浮点数占8个字节</p>
</blockquote>
<h5 id="验证这些类型长度"><a href="#验证这些类型长度" class="headerlink" title="验证这些类型长度"></a>验证这些类型长度</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">short</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">int</span> ));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">long</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">long</span> <span class="keyword">long</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">float</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">double</span>));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20181111173806517.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h4 id="2-整形家族："><a href="#2-整形家族：" class="headerlink" title="2.整形家族："></a>2.整形家族：</h4><blockquote>
<p>1.char<br>————————&gt;                              unsigned char                      //无符号字符形<br>———————— &gt;                              signed char                          //有符号字符形<br>2.short<br>———————— &gt;                             unsigned  short[int ]           //无符号短整形<br>———————— &gt;                              signed short [int]               //有符号短整形<br>3.int<br>———————— &gt;                             unsigned int                        //无符号整形<br>————————&gt;                               signed  int                          //有符号整形<br>4.long<br>————————&gt;                              unsigned long [int]             //无符号长整形<br> ————————&gt;                               signed  long [int]              //有符号长整形</p>
</blockquote>
<h4 id="3-浮点数家族-："><a href="#3-浮点数家族-：" class="headerlink" title="3.浮点数家族 ："></a>3.浮点数家族 ：</h4><blockquote>
<p>float<br>double</p>
</blockquote>
<h4 id="4-构造类型："><a href="#4-构造类型：" class="headerlink" title="4.构造类型："></a>4.构造类型：</h4><blockquote>
<p>数组类型<br>结构体类型  ————————&gt;        struct<br>枚举类型—————————–&gt;       enum<br>联合类型   —————————&gt;       union</p>
</blockquote>
<h4 id="5-指针类型————空类型："><a href="#5-指针类型————空类型：" class="headerlink" title="5.指针类型————空类型："></a>5.指针类型————空类型：</h4><blockquote>
<p>void不能定义变量【空类型、大小为0】（32位平台下大小为0字节 ，64位平台下为1字节–&gt;但也不能定义变量）<br> 通常用于函数的返回类型、函数的参数、指针类型。<br>void <em>可以定义变量，可以接受任意类型，与其他类型指针一样占四个字节 。（在32位平台下任何类型指针大小都为4个字节）<br>void </em> 不能被截引用</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">void</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">void</span>*));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>32位平台下void 与void *的大小如图<br><img src="https://img-blog.csdnimg.cn/20181111181051852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="这里是引用"></p>
<h1 id="二：整形在内存中的存储"><a href="#二：整形在内存中的存储" class="headerlink" title="二：整形在内存中的存储"></a>二：整形在内存中的存储</h1><h4 id="1-一个变量的创建是要在内存中开辟空间的，空间的大小是根据不同的类型决定的。"><a href="#1-一个变量的创建是要在内存中开辟空间的，空间的大小是根据不同的类型决定的。" class="headerlink" title="1.一个变量的创建是要在内存中开辟空间的，空间的大小是根据不同的类型决定的。"></a><strong><em>1.一个变量的创建是要在内存中开辟空间的，空间的大小是根据不同的类型决定的。</em></strong></h4><blockquote>
<p>计算机中符号数有三种表示方法，既原码、补码、反码。三种表示方法均有符号位和数值位两部分</p>
</blockquote>
<ol>
<li>符号位都是用0表示“正”，用1表示“负”。</li>
<li>而数值位有三种表示方法</li>
</ol>
<table>
<thead>
<tr>
<th>原码</th>
<th>直接将二进制按照正负数的形式翻译成二进制</th>
</tr>
</thead>
<tbody>
<tr>
<td>反码</td>
<td>将原码的符号位不变，其他位依次按位取反</td>
</tr>
<tr>
<td>补码</td>
<td>反码+1就得到补码（负数）。 <strong>正数的原、反、补码都相同</strong></td>
</tr>
</tbody>
</table>
<h4 id="无符号数原、反、补码都相同-amp-正数的原、反、补码都相同。"><a href="#无符号数原、反、补码都相同-amp-正数的原、反、补码都相同。" class="headerlink" title="~~~~  无符号数原、反、补码都相同 &amp; 正数的原、反、补码都相同。"></a>~~~~  无符号数原、反、补码都相同 &amp; 正数的原、反、补码都相同。</h4><h4 id="对于整数来说：数据存放在内存中时，其实存放的是数据的补码。只是正数的原、反、补码都相同。"><a href="#对于整数来说：数据存放在内存中时，其实存放的是数据的补码。只是正数的原、反、补码都相同。" class="headerlink" title="~~~~ 对于整数来说：数据存放在内存中时，其实存放的是数据的补码。只是正数的原、反、补码都相同。"></a>~~~~ 对于整数来说：数据存放在内存中时，其实存放的是数据的补码。只是正数的原、反、补码都相同。</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">-20</span>;</span><br><span class="line">	<span class="keyword">signed</span> <span class="keyword">int</span> b=<span class="number">-20</span>;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> c=<span class="number">-20</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d,b=%d,c=%u\n"</span>,a,b,c);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20181111201327776.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20181111201421334.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20181111201443182.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20181111202558334.png" alt="在这里插入图片描述"><br>那么为什么-20会被储存成ec ff ff ff 呢？(大小端有介绍)</p>
</blockquote>
<h4 id="2-数据存储和读取的差别"><a href="#2-数据存储和读取的差别" class="headerlink" title="2.数据存储和读取的差别"></a>2.数据存储和读取的差别</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;                  </span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">-20</span>;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> b=<span class="number">10</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,a+b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%u\n"</span>,a+b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>运算过程<br><img src="https://img-blog.csdnimg.cn/20181112201821147.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>存储数据时存到内存中的数据<br><img src="https://img-blog.csdnimg.cn/20181112194255960.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>程序运行结果<br><img src="https://img-blog.csdnimg.cn/20181112193912253.png" alt="在这里插入图片描述"></p>
<h5 id="由上面的程序和内存中储存的数值来看，不管定义的变量是什么类型的其往计算机中储存数据时存入的都是数据本身的反码，只是在取出的时候改变了它们的类型。"><a href="#由上面的程序和内存中储存的数值来看，不管定义的变量是什么类型的其往计算机中储存数据时存入的都是数据本身的反码，只是在取出的时候改变了它们的类型。" class="headerlink" title="由上面的程序和内存中储存的数值来看，不管定义的变量是什么类型的其往计算机中储存数据时存入的都是数据本身的反码，只是在取出的时候改变了它们的类型。"></a>由上面的程序和内存中储存的数值来看，不管定义的变量是什么类型的其往计算机中储存数据时存入的都是数据本身的反码，只是在取出的时候改变了它们的类型。</h5></blockquote>
<h4 id="3-在计算机中读取整形数据时的规则"><a href="#3-在计算机中读取整形数据时的规则" class="headerlink" title="3.在计算机中读取整形数据时的规则"></a>3.在计算机中读取整形数据时的规则</h4><blockquote>
<p><img src="https://img-blog.csdnimg.cn/20181114121614420.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h4 id="4-整形的提升"><a href="#4-整形的提升" class="headerlink" title="4.整形的提升"></a>4.整形的提升</h4><blockquote>
<p><img src="https://img-blog.csdnimg.cn/20181114000437198.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="下面拿char-类型转成-int形的提升来看"><a href="#下面拿char-类型转成-int形的提升来看" class="headerlink" title="下面拿char 类型转成 int形的提升来看"></a>下面拿char 类型转成 int形的提升来看</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a=<span class="number">-3</span>;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> b=<span class="number">-3</span>;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> c=a;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> d=b;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,c);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%u\n"</span>,c);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%u\n"</span>,d);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,d);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;c</span><br></pre></td></tr></table></figure>
<h5 id="监视结果"><a href="#监视结果" class="headerlink" title="监视结果"></a>监视结果</h5><blockquote>
<p><img src="https://img-blog.csdnimg.cn/20181114000845339.png" alt="在这里插入图片描述"><br>将 a 赋给 c 时，y由于涉及到提升比特位的缘故。所以将char形 -3 的反码1111 1101提升成了int 类型的1111 1111 1111 1111 1111 1111 1111 1101（十进制的4294967293）因为原数据类型为有符号数所以按符号位补充；<br><img src="https://img-blog.csdnimg.cn/20181114001811311.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>将 b 赋给 d 时，由于涉及到提升比特位的缘故。所以将unsigned char形 -3 的反码1111 1101提升成了int 类型的0000 0000 0000 0000 0000 0000  1111 1101（十进制的253）因为原数据类型为无符号整数所以拿“0”补充；</p>
</blockquote>
<h5 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h5><blockquote>
<p><img src="https://img-blog.csdnimg.cn/20181114000644552.png" alt="在这里插入图片描述"></p>
</blockquote>
<ul>
<li><h1 id="三：大端、小端"><a href="#三：大端、小端" class="headerlink" title="三：大端、小端"></a>三：大端、小端</h1><ul>
<li>地址有高低地址之分</li>
<li>数据有高低权位之别</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>1.大端（存储）模式，是指数据的低位保存在内存的高地址中，而数据的高位，保存在内存的低地址中；<ul>
<li>2.小端（存储）模式，是指数据的低位保存在内存的低地址中，而数据的高位,，保存在内存的高地址中。</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="那么为什么会有大端、小端的储存方式呢？"><a href="#那么为什么会有大端、小端的储存方式呢？" class="headerlink" title="那么为什么会有大端、小端的储存方式呢？"></a>那么为什么会有大端、小端的储存方式呢？</h4><blockquote>
<p>这是因为在计算机系统中，我们是以字节为单位的，每个地址单元都对应着一个字节，一个字节为8bit。但是在C语言中除了8bit的char之外，还有16bit的short型，32bit的long型（要看具体的编译器），另外，对于位数大于8位的处理器，例如16位或者32位的处理器，由于寄存器宽度大于一个字节，那么必然存在着一个如果将多个字节安排的问题。因此就导致了大端存储模式和小端存储模式。</p>
<p>例如：一个16bit的short型x，在内存中的地址为0x0010，x的值为0x1122，那么0x11为高字节，0x22为低字节。式，就将0x11放在低地址中，即0x0010中，0x22放在高地址中，即0x0011中。小端模式，刚好相反。我们常的X86结构是小端模式，而KEIL C51则为大端模式。很多的ARM，DSP都为小端模式。</p>
<h2 id="在32位平台下"><a href="#在32位平台下" class="headerlink" title="在32位平台下"></a>在32位平台下</h2></blockquote>
   <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">20</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d\n"</span>,a);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;`</span><br></pre></td></tr></table></figure>
<p>   如下图：</p>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20181111205729985.png" alt="在这里插入图片描述"></p>
</blockquote>
<p>   <strong>20按16进制储存时应该为00 00 00 14，但是电脑却储存成14 00 00 00。原因就是32位平台采用的是小端的储存方式。</strong></p>
<h2 id="既数值权位小的数据储存在低位置端为小端储存方式"><a href="#既数值权位小的数据储存在低位置端为小端储存方式" class="headerlink" title="既数值权位小的数据储存在低位置端为小端储存方式"></a>既数值权位小的数据储存在低位置端为小端储存方式</h2><h1 id="四：浮点数在内存中的储存"><a href="#四：浮点数在内存中的储存" class="headerlink" title="四：浮点数在内存中的储存"></a>四：浮点数在内存中的储存</h1><p>   <img src="https://img-blog.csdnimg.cn/20181111205210232.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<blockquote>
<p>例如：十进制的6.0，写成二进制是 110.0 ，相当于 1.10×2^2 。 那么，按照上面V的格式，可以得出s=0，M=1.10，E=2。<br>而十进制的-6.0，写成二进制是 -110.0 ，相当于 -1.10×2^2 。 那么，按照上面V的格式，可以得出s=1，M=1.10，E=2。</p>
</blockquote>
<h3 id="2-对于32位浮点数，最高的1位是符号位s-接着的8位是指数E，剩下的23位为有效数字M。"><a href="#2-对于32位浮点数，最高的1位是符号位s-接着的8位是指数E，剩下的23位为有效数字M。" class="headerlink" title="2.对于32位浮点数，最高的1位是符号位s,接着的8位是指数E，剩下的23位为有效数字M。"></a>2.对于32位浮点数，最高的1位是符号位s,接着的8位是指数E，剩下的23位为有效数字M。</h3><p>   <img src="https://img-blog.csdnimg.cn/20181111215516798.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-对于64位浮点数，最高的1位是符号位s-接着的11位是指数E，剩下的52位为有效数字M"><a href="#3-对于64位浮点数，最高的1位是符号位s-接着的11位是指数E，剩下的52位为有效数字M" class="headerlink" title="3.对于64位浮点数，最高的1位是符号位s,接着的11位是指数E，剩下的52位为有效数字M."></a>3.对于64位浮点数，最高的1位是符号位s,接着的11位是指数E，剩下的52位为有效数字M.</h3><p>   <img src="https://img-blog.csdnimg.cn/20181111215919722.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<blockquote>
<p><strong>有效数字M和指数E，还有一些特别规定。 前面说过， 1≤M&lt;2 ，也就是说，M可以写成 1.xxxxxx的形式，其中xxxxxx表示小数部分.在计算机内部保存M时，默认这个数的第一位总是1，因此可以被舍去，只保存后面的xxxxxx部分。比如保存1.01的时候，只保存01，等到读取的时候，再把第一位的1加上去。这样做的目的，是节省1位有效数字。以32位浮点数为例，留给M只有23位，将第一位的1舍去以后，等于可以保存24位有效数字。</strong></p>
</blockquote>
<h3 id="至于指数E"><a href="#至于指数E" class="headerlink" title="至于指数E"></a>至于指数E</h3><pre><code>首先，E为一个无符号整数（unsigned int） 这意味着，如果E为8位，它的取值范围为0~255；如果E为11位， 它的取值范围为0~2047。但是，我们知道，科学计数法 中的E是可以出现负数的，存入内存 时E的真实值必须再加上一个中间数，对于8位的E， 这个中间数是127；对于11位的E，这个中间数是1023。比如：2^10的E是10，所以保存成32位浮点数时，必须 保存成10+127=137，即10001001。
#### 如表例题：
</code></pre><table>
<thead>
<tr>
<th>存-7时</th>
<th>存入120（-7+127=120） ，取时取出-7（120-127=-7）</th>
</tr>
</thead>
<tbody>
<tr>
<td>存入0时</td>
<td>存入127(0+127=127)，取时取出0（127-127=0）</td>
</tr>
<tr>
<td>总结</td>
<td>存时浮点数+127,取时浮点数-127</td>
</tr>
</tbody>
</table>
<pre><code>### 指数E还可以再分成三种情况：
</code></pre><h3 id="1-E不全为0或不全为1"><a href="#1-E不全为0或不全为1" class="headerlink" title="1.E不全为0或不全为1"></a>1.E不全为0或不全为1</h3><blockquote>
<p>这时，浮点数就采用下面的规则表示，即指数E的计算值减去127（或1023），得到真实值，再将有效数字M加上第一位的1。 比如： 0.5（1/2）的二进制形式为0.1，由于规定正数部分必须为1，即将小数点右移1位，则1.0*2^(-1)，其阶码为-1+127=126，表示为01111110，而尾数1.0去掉整数部分为0，补齐0到2300000000000000000000000，则其二进制表示形式为:</p>
<h3 id="2-E全为0（浮点数的0值，不能直接与0比较）"><a href="#2-E全为0（浮点数的0值，不能直接与0比较）" class="headerlink" title="2.E全为0（浮点数的0值，不能直接与0比较）"></a>2.E全为0（浮点数的0值，不能直接与0比较）</h3><p>这时，浮点数的指数E等于1-127（或者1-1023）即为真实值， 有效数字M不再加上第一位的1，而是还原0.xxxxxx的小数。这样做是为了表示±0，以及接近于0的很小的数字。</p>
<h3 id="3-E全为1（S为0，E全为1，则为float表示的最大正数）"><a href="#3-E全为1（S为0，E全为1，则为float表示的最大正数）" class="headerlink" title="3.E全为1（S为0，E全为1，则为float表示的最大正数）"></a>3.E全为1（S为0，E全为1，则为float表示的最大正数）</h3><p>这时，如果有效数字M全为0，表示±无穷大（正负取决于符号位s）；</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/20/C ++类与对象-中/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/20/C ++类与对象-中/" class="post-title-link" itemprop="url">c++ 类与对象(中)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-20 21:06:58" itemprop="dateCreated datePublished" datetime="2019-03-20T21:06:58+08:00">2019-03-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Editado el</span>
                
                <time title="Modificado por: 2019-03-30 17:12:11" itemprop="dateModified" datetime="2019-03-30T17:12:11+08:00">2019-03-30</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">65k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">59 minutos.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="类与对象"><a href="#类与对象" class="headerlink" title="类与对象"></a>类与对象</h3><h4 id="1-类的6个默认成员函数"><a href="#1-类的6个默认成员函数" class="headerlink" title="1.类的6个默认成员函数"></a>1.类的6个默认成员函数</h4><blockquote>
<p>1.1 构造函数</p>
<p>1.2 拷贝函数构造</p>
<p>1.3 析构函数   </p>
<p>1.4 赋值操作符重载                       </p>
<p>1.5 取地址操作符重载                        </p>
<p>1.6 const修饰的取地址操作符重载                      </p>
</blockquote>
<h4 id="2-构造函数"><a href="#2-构造函数" class="headerlink" title="2. 构造函数"></a>2. 构造函数</h4><blockquote>
<p><img src="https://img-blog.csdnimg.cn/20190320211328591.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h5 id="2-1-概念：不是创建，某种意义上来说是初始化"><a href="#2-1-概念：不是创建，某种意义上来说是初始化" class="headerlink" title="2.1 概念：不是创建，某种意义上来说是初始化"></a>2.1 概念：不是创建，某种意义上来说是初始化</h5><blockquote>
<ul>
<li>对于以下的日期类：</li>
</ul>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span> &#123;</span>&#125;;</span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">SetDate</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> _year = year;</span><br><span class="line"> _month = month;</span><br><span class="line"> _day = day;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">Display</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> <span class="built_in">cout</span> &lt;&lt;_year&lt;&lt; <span class="string">"-"</span> &lt;&lt;_month &lt;&lt; <span class="string">"-"</span>&lt;&lt; _day &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> Date d1,d2;</span><br><span class="line"> d1.SetDate(<span class="number">2018</span>,<span class="number">5</span>,<span class="number">1</span>);</span><br><span class="line"> d1.Display();</span><br><span class="line"> </span><br><span class="line"> Date d2;</span><br><span class="line"> d2.SetDate(<span class="number">2018</span>,<span class="number">7</span>,<span class="number">1</span>);</span><br><span class="line"> d2.Display();</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>对于Date类，可以通过SetDate公有的方法给对象设置内容，但是如果每次创建对象都调用该方法设置信息，未免有点麻烦，那能否在对象创建时，就将信息设置进去呢？<br>构造函数是一个特殊的成员函数，名字与类名相同,创建类类型对象时由编译器自动调用，保证每个数据成员都有 一个合适的初始值，并且在对象的生命周期内只调用一次构造函数是一个特殊的成员函数，名字与类名相同,创建类类型对象时由编译器自动调用，保证每个数据成员都有 一个合适的初始值，并且在对象的生命周期内只调用一次</p>
</blockquote>
<h5 id="2-2-特征"><a href="#2-2-特征" class="headerlink" title="2.2. 特征"></a>2.2. 特征</h5><blockquote>
<p>构造函数是特殊的成员函数，需要注意的是，构造函数的虽然名称叫构造，但是需要注意的是构造函数的主要任务并不是开空间创建对象，而是初始化对象。</p>
</blockquote>
<blockquote>
<ul>
<li>其特征如下：<ul>
<li style="list-style: none"><input type="checkbox"> 2.2.1. 函数名与类名相同。</li>
<li style="list-style: none"><input type="checkbox"> 2.2.2. 无返回值。</li>
<li style="list-style: none"><input type="checkbox"> 2.2.3. 对象实例化时编译器自动调用对应的构造函数。</li>
<li style="list-style: none"><input type="checkbox"> 2.2.4. 构造函数可以重载。</li>
<li style="list-style: none"><input type="checkbox"> 2.2.5. 构造函数可以在类中定义，也可以在类外定义</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Date</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Date()&#123; <span class="comment">//构造函数，初始化了被它定义的对象</span></span><br><span class="line">		_year = <span class="number">2019</span>;</span><br><span class="line">		_month = <span class="number">3</span>;</span><br><span class="line">		_day = <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	Date1()&#123;&#125;<span class="comment">//类里面声明，在类外面定义</span></span><br><span class="line">	Date(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)&#123;</span><br><span class="line">		<span class="comment">//函数重载,函数名相同,参数不同</span></span><br><span class="line">		_year = year;</span><br><span class="line">		_month = month;</span><br><span class="line">		_day = day;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; _year &lt;&lt; <span class="string">"-"</span> &lt;&lt; _month &lt;&lt; <span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _year;</span><br><span class="line">	<span class="keyword">int</span> _month;</span><br><span class="line">	<span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line">Date :: Date1()&#123;  <span class="comment">//构造函数可以在类外面定义</span></span><br><span class="line">    _year = <span class="number">2019</span>;</span><br><span class="line">	_month = <span class="number">3</span>;</span><br><span class="line">	_day = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Date d1;<span class="comment">//期望d1一出来就被初始化</span></span><br><span class="line">	d1.Print();</span><br><span class="line"></span><br><span class="line">	<span class="function">Date <span class="title">d2</span><span class="params">(<span class="number">2019</span>,<span class="number">3</span>,<span class="number">20</span>)</span></span>;   <span class="comment">//函数的重载</span></span><br><span class="line">	d2.Print();</span><br><span class="line"></span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Date</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Date();<span class="comment">//类里面声明，在类外面定义</span></span><br><span class="line">	Date(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)&#123;</span><br><span class="line">		<span class="comment">//函数重载,函数名相同,参数不同</span></span><br><span class="line">		_year = year;</span><br><span class="line">		_month = month;</span><br><span class="line">		_day = day;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; _year &lt;&lt; <span class="string">"-"</span> &lt;&lt; _month &lt;&lt; <span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _year;</span><br><span class="line">	<span class="keyword">int</span> _month;</span><br><span class="line">	<span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line">Date :: Date()&#123;  <span class="comment">//构造函数可以在类外面定义</span></span><br><span class="line">    _year = <span class="number">2019</span>;</span><br><span class="line">	_month = <span class="number">3</span>;</span><br><span class="line">	_day = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function">Date <span class="title">d2</span><span class="params">(<span class="number">2019</span>,<span class="number">3</span>,<span class="number">20</span>)</span></span>;</span><br><span class="line">	d2.Print();</span><br><span class="line">	</span><br><span class="line">    Date d3; <span class="comment">//构造函数可以在类中定义，也可以在类外定义</span></span><br><span class="line">    d3.Print();</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 2.2.6 如果类中没有显式定义构造函数，则C++编译器会自动生成一个无参的默认构造函数，一旦用户显式定义编译器将不再生成</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment"> // 如果用户显式定义了构造函数，编译器将不再生成</span></span><br><span class="line"><span class="comment"> Date (int year, int month, int day)</span></span><br><span class="line"><span class="comment"> &#123;</span></span><br><span class="line"><span class="comment"> _year = year;</span></span><br><span class="line"><span class="comment"> _month = month;</span></span><br><span class="line"><span class="comment"> _day = day;</span></span><br><span class="line"><span class="comment"> &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="comment">// 没有定义构造函数，对象也可以创建成功，因此此处调用的是编译器生成的默认构造函数</span></span><br><span class="line"> Date d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 2.2.7.无参的构造函数和全缺省的构造函数都称为默认构造函数，并且默认构造函数只能有一</li>
<li style="list-style: none"><input type="checkbox"> 个。注意：无参构造函数、全缺省构造函数、我们没写编译器默认生成的构造函数，都可以认为</li>
<li><p>[ ] 是默认成员函数。</p>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认构造函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Date()&#123;</span><br><span class="line"> _year = <span class="number">1900</span> ;</span><br><span class="line"> _month = <span class="number">1</span> ;</span><br><span class="line"> _day = <span class="number">1</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> Date (<span class="keyword">int</span> year = <span class="number">1900</span>, <span class="keyword">int</span> month = <span class="number">1</span>, <span class="keyword">int</span> day = <span class="number">1</span>)&#123;</span><br><span class="line"> _year = year;</span><br><span class="line"> _month = month;</span><br><span class="line"> _day = day;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">private</span> :</span><br><span class="line"> <span class="keyword">int</span> _year ;</span><br><span class="line"> <span class="keyword">int</span> _month ;</span><br><span class="line"> <span class="keyword">int</span> _day ;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 以下测试函数能通过编译吗？</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">()</span></span>&#123;</span><br><span class="line"> Date d1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 2.2.8 关于编译器生成的默认成员函数，很多童鞋会有疑惑：在我们不实现构造函数的情况下，</li>
<li style="list-style: none"><input type="checkbox"> 编译器会生成</li>
</ul>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Time</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Time()</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">cout</span> &lt;&lt; <span class="string">"Time()"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"> _hour = <span class="number">0</span>;</span><br><span class="line"> _minute = <span class="number">0</span>;</span><br><span class="line"> _second = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">int</span> _hour;</span><br><span class="line"> <span class="keyword">int</span> _minute;</span><br><span class="line"> <span class="keyword">int</span> _second;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="comment">// 基本类型(内置类型)</span></span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day;</span><br><span class="line"> <span class="comment">// 自定义类型</span></span><br><span class="line"> Time <span class="keyword">_t</span>;</span><br><span class="line"> <span class="comment">//默认生成的构造函数对于 1 不做处理，对于 2 默认调用无参构造初始化</span></span><br><span class="line"> <span class="comment">//1.基本类型：int 、char ....</span></span><br><span class="line"> <span class="comment">//2.自定义类型：class/struct定义的类型。。。</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> Date d;</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>默认的构造函数。但是看起来默认构造函数又没什么用？d对象调用了编译器生成的默认构造函数，但是d对象year/month/_day，依旧是随机值。也就说在这里编译器生成的默认构造函数并没有什么卵用？</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>解答：C++把类型分成内置类型(基本类型)和自定义类型。内置类型就是语法已经定义好的类型：如int/char…，自定义类型就是我们使用class/struct/union自己定义的类型，看看下面的程序，就会发现编译器生成默认的构造函数会对自定类型成员_t调用的它的默认成员函数</li>
</ul>
</blockquote>
<h4 id="3-析构函数"><a href="#3-析构函数" class="headerlink" title="3.析构函数"></a>3.析构函数</h4><h5 id="3-1-概念："><a href="#3-1-概念：" class="headerlink" title="3.1 概念："></a>3.1 概念：</h5><blockquote>
<ul>
<li>析构函数：与构造函数功能相反，析构函数不是完成对象的销毁，局部对象销毁工作是由编译器<ul>
<li>完成的。而对象在销毁时会自动调用析构函数，完成类的一些资源清理工作</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="3-2-特性"><a href="#3-2-特性" class="headerlink" title="3.2. 特性"></a>3.2. 特性</h5><ul>
<li style="list-style: none"><input type="checkbox"> 析构函数是特殊的成员函数。</li>
<li style="list-style: none"><input type="checkbox"> 其特征如下<h6 id="3-2-1-析构函数名是在类名前加上字符-。"><a href="#3-2-1-析构函数名是在类名前加上字符-。" class="headerlink" title="3.2.1. 析构函数名是在类名前加上字符  ~ 。"></a>3.2.1. 析构函数名是在类名前加上字符  ~ 。</h6><h6 id="3-2-2-无参数无返回值。"><a href="#3-2-2-无参数无返回值。" class="headerlink" title="3.2.2. 无参数无返回值。"></a>3.2.2. 无参数无返回值。</h6><h6 id="3-2-3-一个类有且只有一个析构函数。若未显式定义，系统会自动生成默认的析构函数。"><a href="#3-2-3-一个类有且只有一个析构函数。若未显式定义，系统会自动生成默认的析构函数。" class="headerlink" title="3.2.3. 一个类有且只有一个析构函数。若未显式定义，系统会自动生成默认的析构函数。"></a>3.2.3. 一个类有且只有一个析构函数。若未显式定义，系统会自动生成默认的析构函数。</h6><h6 id="3-2-4-对象生命周期结束时，C-编译系统系统自动调用析构函数"><a href="#3-2-4-对象生命周期结束时，C-编译系统系统自动调用析构函数" class="headerlink" title="3.2.4. 对象生命周期结束时，C++编译系统系统自动调用析构函数."></a>3.2.4. 对象生命周期结束时，C++编译系统系统自动调用析构函数.</h6><blockquote>
<ul>
<li>析构函数建造时按定义的相反顺序建造函数</li>
<li>对于内置类型来说没有定义析构函数的话，编译器默认去掉用析构函数</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> DataType;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SeqList</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line"> SeqList (<span class="keyword">int</span> capacity = <span class="number">10</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> _pData = (DataType*)<span class="built_in">malloc</span>(capacity * <span class="keyword">sizeof</span>(DataType));</span><br><span class="line"> assert(_pData);</span><br><span class="line"> </span><br><span class="line"> _size = <span class="number">0</span>;</span><br><span class="line"> _capacity = capacity;</span><br><span class="line"> &#125;</span><br><span class="line"> ~SeqList()</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span> (_pData)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">free</span>(_pData ); <span class="comment">// 释放堆上的空间</span></span><br><span class="line"> _pData = <span class="literal">NULL</span>; <span class="comment">// 将指针置为空</span></span><br><span class="line"> _capacity = <span class="number">0</span>;</span><br><span class="line"> _size = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> :</span><br><span class="line"> <span class="keyword">int</span>* _pData ;</span><br><span class="line"> <span class="keyword">size_t</span> _size;</span><br><span class="line"> <span class="keyword">size_t</span> _capacity;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="4-拷贝构造函数"><a href="#4-拷贝构造函数" class="headerlink" title="4. 拷贝构造函数"></a>4. 拷贝构造函数</h4><h5 id="4-1-概念"><a href="#4-1-概念" class="headerlink" title="4.1   概念"></a>4.1   概念</h5><ul>
<li style="list-style: none"><input type="checkbox"> 构造函数：只是单个形参，该形参是对本类类型对象的引用(一般常用const 修饰)，在已存在的</li>
<li style="list-style: none"><input type="checkbox"> 类型对象创建新对象时由编译器自动调用</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Date(<span class="keyword">int</span> year = <span class="number">1900</span>, <span class="keyword">int</span> month = <span class="number">1</span>, <span class="keyword">int</span> day = <span class="number">1</span>)&#123;</span><br><span class="line">		_year = year;</span><br><span class="line">		_month = month;</span><br><span class="line">		_day = day;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; _year &lt;&lt; <span class="string">"-"</span> &lt;&lt; _month &lt;&lt; <span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	~Date()&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"~Date"</span> &lt;&lt; <span class="built_in">endl</span>;<span class="comment">//析构函数</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _year;</span><br><span class="line">	<span class="keyword">int</span> _month;</span><br><span class="line">	<span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 以下测试函数能通过编译吗？</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Date d1;</span><br><span class="line">	d1.print();</span><br><span class="line"></span><br><span class="line">	<span class="function">Date  <span class="title">d2</span><span class="params">(d1)</span></span>;   <span class="comment">//拷贝构造</span></span><br><span class="line">	d2.print();</span><br><span class="line"></span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-2-特征"><a href="#4-2-特征" class="headerlink" title="4.2 特征"></a>4.2 特征</h5><h6 id="4-2-1-拷贝构造函数是构造函数的一个重载形式"><a href="#4-2-1-拷贝构造函数是构造函数的一个重载形式" class="headerlink" title="4.2.1 拷贝构造函数是构造函数的一个重载形式"></a>4.2.1 拷贝构造函数是构造函数的一个重载形式</h6><h6 id="4-2-2-拷贝构造函数的参数只有一个且必须使用引用传参，使用传参方式会引发无穷递归调用"><a href="#4-2-2-拷贝构造函数的参数只有一个且必须使用引用传参，使用传参方式会引发无穷递归调用" class="headerlink" title="4.2.2 拷贝构造函数的参数只有一个且必须使用引用传参，使用传参方式会引发无穷递归调用"></a>4.2.2 拷贝构造函数的参数只有一个且必须使用引用传参，使用传参方式会引发无穷递归调用</h6><blockquote>
<p><img src="https://img-blog.csdnimg.cn/20190322192703218.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h6 id="4-2-3-若未显示定义，系统生成默认的拷贝构造函数。-默认的拷贝构造函数对象按内存存储按字节序完成拷贝，这种拷贝我们叫做浅拷贝，或者值拷贝"><a href="#4-2-3-若未显示定义，系统生成默认的拷贝构造函数。-默认的拷贝构造函数对象按内存存储按字节序完成拷贝，这种拷贝我们叫做浅拷贝，或者值拷贝" class="headerlink" title="4.2.3 若未显示定义，系统生成默认的拷贝构造函数。 默认的拷贝构造函数对象按内存存储按字节序完成拷贝，这种拷贝我们叫做浅拷贝，或者值拷贝"></a>4.2.3 若未显示定义，系统生成默认的拷贝构造函数。 默认的拷贝构造函数对象按内存存储按字节序完成拷贝，这种拷贝我们叫做浅拷贝，或者值拷贝</h6><h6 id="4-2-4-那么编译器生成的默认拷贝构造函数已经可以完成字节序的值拷贝了，我们还需要自己实现吗？当然像日期类这样的类是没必要的。"><a href="#4-2-4-那么编译器生成的默认拷贝构造函数已经可以完成字节序的值拷贝了，我们还需要自己实现吗？当然像日期类这样的类是没必要的。" class="headerlink" title="4.2.4  那么编译器生成的默认拷贝构造函数已经可以完成字节序的值拷贝了，我们还需要自己实现吗？当然像日期类这样的类是没必要的。"></a>4.2.4  那么编译器生成的默认拷贝构造函数已经可以完成字节序的值拷贝了，我们还需要自己实现吗？当然像日期类这样的类是没必要的。</h6></blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> 代码示例<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Date</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	</span><br><span class="line">	Date(<span class="keyword">int</span> year = <span class="number">2019</span>, <span class="keyword">int</span> month = <span class="number">3</span>, <span class="keyword">int</span> day = <span class="number">10</span>)&#123;</span><br><span class="line">		_year = year;</span><br><span class="line">		_month = month;</span><br><span class="line">		_day = day;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; _year &lt;&lt; <span class="string">"-"</span> &lt;&lt; _month &lt;&lt; <span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	Date ( Date&amp; d)&#123;   <span class="comment">//拷贝构造出现问题</span></span><br><span class="line">		_year = d._year;</span><br><span class="line">		_month = d._month;</span><br><span class="line">		_day = d._day;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _year;</span><br><span class="line">	<span class="keyword">int</span> _month;</span><br><span class="line">	<span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Date d1;</span><br><span class="line">	d1.Print();</span><br><span class="line"></span><br><span class="line">	<span class="function">Date <span class="title">d2</span><span class="params">(<span class="number">2018</span>, <span class="number">6</span>, <span class="number">30</span>)</span></span>;<span class="comment">// 特征2</span></span><br><span class="line">	d2.Print();</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="function">Date <span class="title">d3</span><span class="params">(<span class="number">2019</span>)</span></span>;</span><br><span class="line">	d3.Print();</span><br><span class="line"></span><br><span class="line">	<span class="function">Date <span class="title">d4</span><span class="params">(d2)</span></span>;    <span class="comment">//拷贝构造--&gt;浅拷贝(按字节进行拷贝)</span></span><br><span class="line">	d4.Print();</span><br><span class="line"></span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里会发现下面的程序会崩溃掉？这里就需要我们以后讲的深拷贝去解决。</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">String</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> String(<span class="keyword">const</span> <span class="keyword">char</span>* str = <span class="string">"jack"</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> _str = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="built_in">strlen</span>(str) + <span class="number">1</span>);</span><br><span class="line"> <span class="built_in">strcpy</span>(_str, str);</span><br><span class="line"> &#125;</span><br><span class="line"> ~String()</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">cout</span> &lt;&lt; <span class="string">"~String()"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"> <span class="built_in">free</span>(_str);</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">char</span>* _str;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="function">String <span class="title">s1</span><span class="params">(<span class="string">"hello"</span>)</span></span>;</span><br><span class="line"> <span class="function">String <span class="title">s2</span><span class="params">(s1)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//程序奔溃的原因是在进行浅拷贝时，将s1和s2的指针指向了同一片空间，在释放时空间</span></span><br><span class="line"><span class="comment">//已经倍s2释放了，所以s1再去释放这块空间就会出错</span></span><br></pre></td></tr></table></figure>
<h4 id="5-赋值运算符重载"><a href="#5-赋值运算符重载" class="headerlink" title="5.赋值运算符重载"></a>5.赋值运算符重载</h4><h5 id="5-1-运算符重载"><a href="#5-1-运算符重载" class="headerlink" title="5.1 运算符重载"></a>5.1 运算符重载</h5><blockquote>
<p>C++为了增强代码的可读性引入了运算符重载，运算符重载是具有特殊函数名的函数，也具有其返回值类型，函数名字以及参数列表，其返回值类型与参数列表与普通的函数类似。<br>函数名字为：关键字operator后面接需要重载的运算符符号。函数原型：返回值类型 operator操作符(参数列表)</p>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局的operator==</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Date(<span class="keyword">int</span> year = <span class="number">1900</span>, <span class="keyword">int</span> month = <span class="number">1</span>, <span class="keyword">int</span> day = <span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> _year = year;</span><br><span class="line"> _month = month;</span><br><span class="line"> _day = day;</span><br><span class="line"> &#125; </span><br><span class="line"><span class="comment">//private:</span></span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 这里会发现运算符重载成全局的就需要成员变量是共有的，那么问题来了，封装性如何保证？</span></span><br><span class="line"><span class="comment">// 这里其实可以用我们后面学习的友元解决，或者干脆重载成成员函数。</span></span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> Date&amp; d1, <span class="keyword">const</span> Date&amp; d2)</span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">return</span> d1._year == d2._year;</span><br><span class="line"> &amp;&amp; d1._month == d2._month</span><br><span class="line"> &amp;&amp; d1._day == d2._day;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2018</span>, <span class="number">9</span>, <span class="number">26</span>)</span></span>;</span><br><span class="line"> <span class="function">Date <span class="title">d2</span><span class="params">(<span class="number">2018</span>, <span class="number">9</span>, <span class="number">27</span>)</span></span>;</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;(d1 == d2)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//可读性</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> Date(<span class="keyword">int</span> year = <span class="number">1900</span>, <span class="keyword">int</span> month = <span class="number">1</span>, <span class="keyword">int</span> day = <span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> _year = year;</span><br><span class="line"> _month = month;</span><br><span class="line"> _day = day;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// bool operator==(Date* this, const Date&amp; d2) //增加可读性</span></span><br><span class="line"> <span class="comment">// 这里需要注意的是，左操作数是this指向的调用函数的对象</span></span><br><span class="line"> <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> Date&amp; d2)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">return</span> _year == d2._year</span><br><span class="line"> &amp;&amp; _month == d2._month</span><br><span class="line"> &amp;&amp; _day == d2._day;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">int</span> _year;</span><br><span class="line"> <span class="keyword">int</span> _month;</span><br><span class="line"> <span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2018</span>, <span class="number">9</span>, <span class="number">26</span>)</span></span>;</span><br><span class="line"> <span class="function">Date <span class="title">d2</span><span class="params">(<span class="number">2018</span>, <span class="number">9</span>, <span class="number">27</span>)</span></span>;</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;(d1 == d2)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;<span class="keyword">operator</span>==(d1,d2)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<h6 id="5-1-1-不能通过连接其他符号来创建新的操作符：比如operator"><a href="#5-1-1-不能通过连接其他符号来创建新的操作符：比如operator" class="headerlink" title="5.1.1 不能通过连接其他符号来创建新的操作符：比如operator@"></a>5.1.1 不能通过连接其他符号来创建新的操作符：比如operator@</h6><h6 id="5-1-2-重载操作符必须有一个类类型或者枚举类型的操作数"><a href="#5-1-2-重载操作符必须有一个类类型或者枚举类型的操作数" class="headerlink" title="5.1.2 重载操作符必须有一个类类型或者枚举类型的操作数"></a>5.1.2 重载操作符必须有一个类类型或者枚举类型的操作数</h6><h6 id="5-1-3-用于内置类型的操作符，其含义不能改变，例如：内置的整型-，不能改变其含义"><a href="#5-1-3-用于内置类型的操作符，其含义不能改变，例如：内置的整型-，不能改变其含义" class="headerlink" title="5.1.3 用于内置类型的操作符，其含义不能改变，例如：内置的整型+，不能改变其含义"></a>5.1.3 用于内置类型的操作符，其含义不能改变，例如：内置的整型+，不能改变其含义</h6><h6 id="5-1-4-作为类成员的重载函数时，其形参看起来比操作数数目少1成员函数的操作符有一个默认的形参this，限定为第一个形参"><a href="#5-1-4-作为类成员的重载函数时，其形参看起来比操作数数目少1成员函数的操作符有一个默认的形参this，限定为第一个形参" class="headerlink" title="5.1.4 作为类成员的重载函数时，其形参看起来比操作数数目少1成员函数的操作符有一个默认的形参this，限定为第一个形参"></a>5.1.4 作为类成员的重载函数时，其形参看起来比操作数数目少1成员函数的操作符有一个默认的形参this，限定为第一个形参</h6><h6 id="5-1-5-lt-gt-lt-gt-lt-sizeof-gt-lt-gt-lt-gt-注意以上5个运算符不能重载。这个经常在笔试选择题中出现"><a href="#5-1-5-lt-gt-lt-gt-lt-sizeof-gt-lt-gt-lt-gt-注意以上5个运算符不能重载。这个经常在笔试选择题中出现" class="headerlink" title="5.1.5 &lt; .* &gt;&lt; ::  &gt; &lt; sizeof  &gt; &lt;  ?:  &gt;&lt; . &gt;注意以上5个运算符不能重载。这个经常在笔试选择题中出现"></a>5.1.5 &lt; .* &gt;&lt; ::  &gt; &lt; sizeof  &gt; &lt;  ?:  &gt;&lt; . &gt;注意以上5个运算符不能重载。这个经常在笔试选择题中出现</h6><h5 id="5-2-赋值运算符重载"><a href="#5-2-赋值运算符重载" class="headerlink" title="5.2. 赋值运算符重载"></a>5.2. 赋值运算符重载</h5><p>赋值运算符主要有四点：</p>
<h6 id="5-2-1-参数类型"><a href="#5-2-1-参数类型" class="headerlink" title="5.2.1. 参数类型"></a>5.2.1. 参数类型</h6><h6 id="5-2-2-返回值"><a href="#5-2-2-返回值" class="headerlink" title="5.2.2. 返回值"></a>5.2.2. 返回值</h6><h6 id="5-2-3-检测是否自己给自己赋值"><a href="#5-2-3-检测是否自己给自己赋值" class="headerlink" title="5.2.3. 检测是否自己给自己赋值"></a>5.2.3. 检测是否自己给自己赋值</h6><h6 id="5-2-4-返回-this"><a href="#5-2-4-返回-this" class="headerlink" title="5.2.4. 返回*this"></a>5.2.4. 返回*this</h6><h6 id="5-2-5-一个类如果没有显式定义赋值运算符重载，编译器也会生成一个，完成对象按字节序的值拷贝"><a href="#5-2-5-一个类如果没有显式定义赋值运算符重载，编译器也会生成一个，完成对象按字节序的值拷贝" class="headerlink" title="5.2.5. 一个类如果没有显式定义赋值运算符重载，编译器也会生成一个，完成对象按字节序的值拷贝"></a>5.2.5. 一个类如果没有显式定义赋值运算符重载，编译器也会生成一个，完成对象按字节序的值拷贝</h6><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Date(<span class="keyword">int</span> year = <span class="number">1900</span>, <span class="keyword">int</span> month = <span class="number">1</span>, <span class="keyword">int</span> day = <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		_year = year;</span><br><span class="line">		_month = month;</span><br><span class="line">		_day = day;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//d2=d1</span></span><br><span class="line">	<span class="comment">//d2.operator(d1)</span></span><br><span class="line">	<span class="comment">//d2.operator(&amp;d2,d1)</span></span><br><span class="line">	<span class="keyword">void</span> <span class="keyword">operator</span>=(<span class="keyword">const</span> Date&amp; d)&#123;  <span class="comment">//默认含有第一个参数的地址，</span></span><br><span class="line">		<span class="comment">//已经被this指针所指代</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> != &amp;d)&#123;   <span class="comment">//防止自己给自己传值</span></span><br><span class="line">			<span class="keyword">this</span>-&gt;_year = d._year;</span><br><span class="line">			<span class="keyword">this</span>-&gt;_month = d._month;</span><br><span class="line">			<span class="keyword">this</span>-&gt;_day = d._day;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*Date operator=(const Date&amp; d)&#123; //有返回值</span></span><br><span class="line"><span class="comment">		if (this != &amp;d)&#123;</span></span><br><span class="line"><span class="comment">			this-&gt;_year = d._year;</span></span><br><span class="line"><span class="comment">			this-&gt;_month = d._month;</span></span><br><span class="line"><span class="comment">			this-&gt;_day = d._day;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		return *this;</span></span><br><span class="line"><span class="comment">	&#125;*/</span></span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; _year &lt;&lt; <span class="string">"-"</span> &lt;&lt; _month &lt;&lt; <span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _year;</span><br><span class="line">	<span class="keyword">int</span> _month;</span><br><span class="line">	<span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2018</span>,<span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="function">Date <span class="title">d2</span><span class="params">(<span class="number">2019</span>,<span class="number">10</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">	d1.print();</span><br><span class="line"><span class="comment">// 这里d1调用的编译器生成operator=完成拷贝，d2和d1的值也是一样的。</span></span><br><span class="line">	<span class="function">Date <span class="title">d3</span><span class="params">(d1)</span></span>;  <span class="comment">//拷贝构造</span></span><br><span class="line">	d1 = d2;  <span class="comment">//赋值运算符的用运</span></span><br><span class="line"></span><br><span class="line">	d3.print();</span><br><span class="line">	d1.print();</span><br><span class="line">	<span class="comment">//用运这个表达式需要调用函数Date operator=(const Date&amp; d)</span></span><br><span class="line">	<span class="comment">//d3 = d2 = d1;//被转换成 d3=(d2.oprator=(&amp;d2,d1))</span></span><br><span class="line">	<span class="comment">//d3.print();</span></span><br><span class="line">   <span class="comment">//Date d4 = d1; //拷贝构造，将已知的值赋给创建的变量。</span></span><br><span class="line">  <span class="comment">//运算符重载</span></span><br><span class="line">  <span class="comment">//函数重载   两者没有任何关系</span></span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>运行结果<br>不加<br>d3 = d2 = d1;<img src="https://img-blog.csdnimg.cn/20190322203217720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>加上d3 = d2 = d1;<br><img src="https://img-blog.csdnimg.cn/20190322203402120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Date <span class="keyword">operator</span>-(<span class="keyword">int</span> day);<span class="comment">//日期减去日期</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">operator</span>-(<span class="keyword">const</span> Date&amp; day);  <span class="comment">//返回天数</span></span><br><span class="line"><span class="comment">//两者而言即是函数重载，又是运算符重载</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>简单整理：<br>封装：管理<br>构造、析构：初始化、清理<br>拷贝构造、operator= ： 复制</p>
</blockquote>
<blockquote>
<ul>
<li>那么编译器生成的默认赋值重载函数已经可以完成字节序的值拷贝了，我们还需要自己实现吗？当然像日期类这样的类是没必要的。那么下面的类呢？验证一下试试？</li>
</ul>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里会发现下面的程序会崩溃掉？这里就需要我们以后讲的深拷贝去解决。</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">String</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> String(<span class="keyword">const</span> <span class="keyword">char</span>* str = <span class="string">"jack"</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> _str = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="built_in">strlen</span>(str) + <span class="number">1</span>);</span><br><span class="line"> <span class="built_in">strcpy</span>(_str, str);</span><br><span class="line"> &#125;</span><br><span class="line"> ~String()</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">cout</span> &lt;&lt; <span class="string">"~String()"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"> <span class="built_in">free</span>(_str);</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">char</span>* _str;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="function">String <span class="title">s1</span><span class="params">(<span class="string">"hello"</span>)</span></span>;</span><br><span class="line"> <span class="function">String <span class="title">s2</span><span class="params">(<span class="string">"world"</span>)</span></span>;</span><br><span class="line"> </span><br><span class="line"> s1 = s2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/19/数据结构-双向链表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/19/数据结构-双向链表/" class="post-title-link" itemprop="url">数据结构--双向链表</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-19 22:05:31" itemprop="dateCreated datePublished" datetime="2019-03-19T22:05:31+08:00">2019-03-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Editado el</span>
                
                <time title="Modificado por: 2019-03-21 20:44:59" itemprop="dateModified" datetime="2019-03-21T20:44:59+08:00">2019-03-21</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">24k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">22 minutos.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="DList-h"><a href="#DList-h" class="headerlink" title="DList.h"></a>DList.h</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> DLDataType;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义链表的结点结构</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DListNode</span>&#123;</span></span><br><span class="line">	DLDataType value;         <span class="comment">//头节点中的value没有意义</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">DListNode</span> *<span class="title">prev</span>;</span>  <span class="comment">//指向该节点的前一个结点</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">DListNode</span> *<span class="title">next</span>;</span>  <span class="comment">//指向该节点的后一个结点</span></span><br><span class="line">&#125;DListNode;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义双向链表</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DList</span>&#123;</span></span><br><span class="line">	DListNode *head;    <span class="comment">//指向双向链表的头节点</span></span><br><span class="line">&#125;DList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListInit</span><span class="params">(DList *dlist)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//销毁</span></span><br><span class="line"><span class="comment">//1.清空链表</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListClear</span><span class="params">(DList *dlist)</span></span>;</span><br><span class="line"><span class="comment">//2.彻底的清空链表，彻底销毁</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListDestory</span><span class="params">(DList *dlist)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//申请空间的函数</span></span><br><span class="line"><span class="function">DListNode * <span class="title">DListBuyNode</span><span class="params">(DLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//增</span></span><br><span class="line"><span class="comment">//头插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">DListPushFront</span><span class="params">(DList *dlist,DLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//尾插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListPushBack</span><span class="params">(DList *dlist, DLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//删</span></span><br><span class="line"><span class="comment">//头删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListPopFront</span><span class="params">(DList *dlist,DLDataType value)</span></span>;</span><br><span class="line"><span class="comment">//尾删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListPopBack</span><span class="params">(DList *dlist, DLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//查找</span></span><br><span class="line"></span><br><span class="line"><span class="function">DListNode * <span class="title">DListFind</span><span class="params">(DList *dlist,DLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//插</span></span><br><span class="line"><span class="comment">// 在pos的前面进行插入</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListInsert</span><span class="params">(DListNode *pos, DLDataType value)</span></span>;</span><br><span class="line"><span class="comment">// 删除pos位置的节点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListErase</span><span class="params">(DListNode *pos)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ListRemove</span><span class="params">(DList * dlsit, DLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListPrint</span><span class="params">(<span class="keyword">const</span> DList *dlist)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="DList-c"><a href="#DList-c" class="headerlink" title="DList.c"></a>DList.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"DList.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListInit</span><span class="params">(DList *dlist)</span></span>&#123;</span><br><span class="line">	dlist-&gt;head = DListBuyNode(<span class="number">0</span>);<span class="comment">//0没有实际意义，这里指头结点</span></span><br><span class="line">	</span><br><span class="line">	dlist-&gt;head-&gt;next = dlist-&gt;head;</span><br><span class="line">	dlist-&gt;head-&gt;prev = dlist-&gt;head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//销毁</span></span><br><span class="line"><span class="comment">//1.清空链表</span></span><br><span class="line"><span class="comment">//保留链表的头结点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListClear</span><span class="params">(DList *dlist)</span></span>&#123;</span><br><span class="line">	DListNode *cur, *next;</span><br><span class="line">	cur = dlist-&gt;head -&gt;next;</span><br><span class="line">	<span class="keyword">while</span> (cur != dlist-&gt;head)&#123;</span><br><span class="line">		next = cur-&gt;next;</span><br><span class="line">		<span class="built_in">free</span>(cur);</span><br><span class="line">		cur = next;</span><br><span class="line">	&#125;</span><br><span class="line">	dlist-&gt;head-&gt;next = dlist-&gt;head-&gt;prev = dlist-&gt;head;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//彻底的清空链表，彻底销毁</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListDestory</span><span class="params">(DList *dlist)</span></span>&#123;</span><br><span class="line">	DListClear(dlist);</span><br><span class="line">	<span class="built_in">free</span>(dlist-&gt;head);</span><br><span class="line">	dlist-&gt;head = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//申请新结点</span></span><br><span class="line"><span class="function">DListNode * <span class="title">DListBuyNode</span><span class="params">(DLDataType value)</span></span>&#123;</span><br><span class="line">	DListNode *new_node = (DListNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(DListNode));</span><br><span class="line">	new_node-&gt;value = value;</span><br><span class="line">	new_node-&gt;next = new_node-&gt;prev = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> new_node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//增</span></span><br><span class="line"><span class="comment">//头插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">DListPushFront</span><span class="params">(DList *dlist, DLDataType value)</span></span>&#123;</span><br><span class="line">	DListNode *node = DListBuyNode(value);</span><br><span class="line">	node-&gt;prev = dlist-&gt;head;</span><br><span class="line">	node-&gt;next = dlist-&gt;head-&gt;next;</span><br><span class="line">	dlist-&gt;head-&gt;next-&gt;prev = node;</span><br><span class="line">	dlist-&gt;head-&gt;next = node;</span><br><span class="line">	<span class="comment">//特殊情况，空链表是没有问题的</span></span><br><span class="line">	<span class="comment">//DListInsert(dlist-&gt;head-&gt;next,value)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//尾插</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListPushBack</span><span class="params">(DList *dlist,DLDataType value)</span></span>&#123;</span><br><span class="line">	DListNode *node = DListBuyNode(value);</span><br><span class="line">	</span><br><span class="line">		node-&gt;prev = dlist-&gt;head-&gt;prev;</span><br><span class="line">		node-&gt;next = dlist-&gt;head;</span><br><span class="line">		node-&gt;prev-&gt;next = node;</span><br><span class="line">		dlist-&gt;head-&gt;prev=node;</span><br><span class="line">	    <span class="comment">//DListInsert(dlist-&gt;head,value)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//头删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListPopFront</span><span class="params">(DList *dlist, DLDataType value)</span></span>&#123;</span><br><span class="line">	assert(dlist-&gt;head-&gt;next!=dlist-&gt;head);</span><br><span class="line">	DListNode *cur = dlist-&gt;head-&gt;next; <span class="comment">//指向头节点的下一结点 </span></span><br><span class="line">	 dlist-&gt;head-&gt;next= cur-&gt;next; <span class="comment">//</span></span><br><span class="line">	 cur-&gt;next-&gt;prev = dlist-&gt;head;</span><br><span class="line">	 <span class="built_in">free</span>(cur);</span><br><span class="line">	 <span class="comment">//空链表也适用</span></span><br><span class="line">	 <span class="comment">//DListErase(dlist-&gt;head-&gt;next)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//尾删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListPopBack</span><span class="params">(DList *dlist, DLDataType value)</span></span>&#123;</span><br><span class="line">	assert(dlist-&gt;head-&gt;next!=dlist-&gt;head);</span><br><span class="line">	DListNode *old_node = dlist-&gt;head-&gt;prev;</span><br><span class="line">	old_node-&gt;prev-&gt;next = dlist-&gt;head; <span class="comment">//dlist-&gt;head-&gt;prev-&gt;prev-&gt;next</span></span><br><span class="line">	old_node-&gt;next-&gt;prev = old_node-&gt;prev;<span class="comment">//dlist-&gt;head-&gt;prev;</span></span><br><span class="line">	<span class="built_in">free</span>(old_node);</span><br><span class="line">	<span class="comment">//DListErase(dlist-&gt;head-&gt;prev)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//查找</span></span><br><span class="line"><span class="function">DListNode * <span class="title">DListFind</span><span class="params">(DList *dlist, DLDataType value)</span></span>&#123;</span><br><span class="line">	DListNode *cur;</span><br><span class="line">	<span class="keyword">for</span> (cur = dlist-&gt;head-&gt;next; cur != dlist-&gt;head; cur = cur-&gt;next)&#123;</span><br><span class="line">		<span class="keyword">if</span> (cur-&gt;value = value)&#123;</span><br><span class="line">			<span class="keyword">return</span> cur;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//插</span></span><br><span class="line"><span class="comment">// 在pos的前面进行插入</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListInsert</span><span class="params">(DListNode *pos, DLDataType value)</span></span>&#123;</span><br><span class="line">	DListNode *node = DListBuyNode(value);</span><br><span class="line">	node-&gt;next = pos;</span><br><span class="line">	node-&gt;prev = pos-&gt;prev;</span><br><span class="line">	node-&gt;prev-&gt;next = node;</span><br><span class="line">	pos-&gt;prev = node;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 删除pos位置的节点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListErase</span><span class="params">(DListNode *pos)</span></span>&#123;</span><br><span class="line">	pos-&gt;prev-&gt;next = pos-&gt;next;</span><br><span class="line">	pos-&gt;next-&gt;prev = pos-&gt;prev;</span><br><span class="line">	<span class="built_in">free</span>(pos);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DListPrint</span><span class="params">(<span class="keyword">const</span> DList *dlist)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (DListNode *cur = dlist-&gt;head-&gt;next;</span><br><span class="line">		cur != dlist-&gt;head; cur = cur-&gt;next)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d --&gt;"</span>,cur-&gt;value);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"DList.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestDList1</span><span class="params">()</span></span>&#123;</span><br><span class="line">	DList dlist;</span><br><span class="line">	DListInit(&amp;dlist);</span><br><span class="line">	DListPushFront(&amp;dlist,<span class="number">1</span>);</span><br><span class="line">	DListPushFront(&amp;dlist, <span class="number">15</span>);</span><br><span class="line">	DListPrint(&amp;dlist);</span><br><span class="line">	DListPushFront(&amp;dlist, <span class="number">16</span>);</span><br><span class="line">	DListPushBack(&amp;dlist, <span class="number">18</span>);</span><br><span class="line">	DListPushFront(&amp;dlist, <span class="number">2</span>);</span><br><span class="line">	DListPrint(&amp;dlist);</span><br><span class="line">	DListPushBack(&amp;dlist,<span class="number">20</span>);</span><br><span class="line">	DListPushFront(&amp;dlist, <span class="number">12</span>);</span><br><span class="line">	DListPushBack(&amp;dlist,<span class="number">17</span>);</span><br><span class="line">	DListPrint(&amp;dlist);</span><br><span class="line">	DListDestory(&amp;dlist);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	TestDList1();</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/18/C ++入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/18/C ++入门/" class="post-title-link" itemprop="url">C++入门</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-18 17:25:52" itemprop="dateCreated datePublished" datetime="2019-03-18T17:25:52+08:00">2019-03-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Editado el</span>
                
                <time title="Modificado por: 2019-03-30 16:01:23" itemprop="dateModified" datetime="2019-03-30T16:01:23+08:00">2019-03-30</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">54k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">49 minutos.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="c-入门笔记"><a href="#c-入门笔记" class="headerlink" title="c++入门笔记"></a>c++入门笔记</h4><h4 id="4-基础的C-程序编写"><a href="#4-基础的C-程序编写" class="headerlink" title="4.基础的C++程序编写"></a>4.基础的C++程序编写</h4><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"> <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//不写这句会出现cin与cout 未定义的错误</span></span><br><span class="line">    <span class="keyword">namespace</span> N1&#123;</span><br><span class="line">       <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">       <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">       <span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">      <span class="comment">//命名空间中可以有函数的存在</span></span><br><span class="line">           <span class="keyword">return</span> a + b;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">namespace</span> N2&#123;</span><br><span class="line">   <span class="comment">//命名空间中可以出现嵌套式的命名空间 </span></span><br><span class="line">   <span class="comment">//引用时只需要注意调用方式即可</span></span><br><span class="line">           <span class="function"><span class="keyword">int</span> <span class="title">Swap</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">               <span class="keyword">return</span> x*y;    </span><br><span class="line">           &#125;    </span><br><span class="line">       &#125;    </span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">    </span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a,b;</span><br><span class="line">       <span class="built_in">cin</span> &gt;&gt; a;</span><br><span class="line">       <span class="comment">//c++语言的输入格式</span></span><br><span class="line">       <span class="built_in">cin</span> &gt;&gt; b;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"a="</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">//C++语言的输出格式，其中""中间的部分为输出的格式，而后面紧跟的</span></span><br><span class="line">   <span class="comment">//则为输出的内容，“&lt;&lt;endl”表示的是“\n”-&gt;换行符</span></span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt;<span class="string">"b="</span> &lt;&lt;b  &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"a="</span>&lt;&lt;N1::a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"b="</span> &lt;&lt; N1::b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"a+b="</span>&lt;&lt;N1::Add(a,b) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"a*b="</span> &lt;&lt; N1::N2::Swap(a, b) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       system(<span class="string">"pause"</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-函数重载"><a href="#5-函数重载" class="headerlink" title="5.函数重载"></a>5.函数重载</h4><h5 id="5-1-概念：c-允许在同一作用域中声明几个功能相似的几个同名函数，这些函数的形参列表（参数的个数或类型或顺序）必须不同，"><a href="#5-1-概念：c-允许在同一作用域中声明几个功能相似的几个同名函数，这些函数的形参列表（参数的个数或类型或顺序）必须不同，" class="headerlink" title="5.1 概念：c++允许在同一作用域中声明几个功能相似的几个同名函数，这些函数的形参列表（参数的个数或类型或顺序）必须不同，"></a>5.1 概念：c++允许在同一作用域中声明几个功能相似的几个同名函数，这些函数的形参列表（参数的个数或类型或顺序）必须不同，</h5><blockquote>
<p>  常用来处理实现功能类似数据类型不同的问题</p>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数重载实例</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Add</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span></span>&#123;</span><br><span class="line">    <span class="comment">//相较第一个而言形参的类型不同</span></span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Add</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">int</span> b, <span class="keyword">float</span> c)</span></span>&#123;</span><br><span class="line">    <span class="comment">//相较第一个而言形参的类型不同既个数不同</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">double</span> c = <span class="number">2.0</span>;</span><br><span class="line">    <span class="keyword">double</span> d = <span class="number">3.0</span>;</span><br><span class="line">    <span class="keyword">float</span> f = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;Add(a,b)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; Add(c, d) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; Add(d, a, f) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="5-2名字修饰"><a href="#5-2名字修饰" class="headerlink" title="5.2名字修饰"></a>5.2名字修饰</h5><ul>
<li><p>[ ] 在c/c++中，一个程序要跑起来需要经历：预处理、编辑、汇编、链接等步骤</p>
<h6 id="5-2-1-预处理：去注释，宏替换，头文件展开"><a href="#5-2-1-预处理：去注释，宏替换，头文件展开" class="headerlink" title="5.2.1   预处理：去注释，宏替换，头文件展开"></a>5.2.1   预处理：去注释，宏替换，头文件展开</h6><h6 id="5-2-2-汇编：语法检查，转换成汇编代码"><a href="#5-2-2-汇编：语法检查，转换成汇编代码" class="headerlink" title="5.2.2   汇编：语法检查，转换成汇编代码"></a>5.2.2   汇编：语法检查，转换成汇编代码</h6><h6 id="5-2-3-编译：汇编代码————-gt-机器码"><a href="#5-2-3-编译：汇编代码————-gt-机器码" class="headerlink" title="5.2.3   编译：汇编代码————&gt;机器码"></a>5.2.3   编译：汇编代码————&gt;机器码</h6><h6 id="5-2-4-链接：生成可执行文件"><a href="#5-2-4-链接：生成可执行文件" class="headerlink" title="5.2.4   链接：生成可执行文件"></a>5.2.4   链接：生成可执行文件</h6><h6 id="5-2-5-在Linux下的修饰"><a href="#5-2-5-在Linux下的修饰" class="headerlink" title="5.2.5    在Linux下的修饰"></a>5.2.5    在Linux下的修饰</h6><blockquote>
<p>void F1(int a);</p>
<p>——Z2F1I</p>
<p>其中—Z为前缀，2代表函数名有两个字符，F1为函数名，而i(int)为参数的类型的首字母<br>void F1(char b);<br>//_Z2F1C<br>void F1(int a,char b);<br>//——Z2F1IC</p>
</blockquote>
<h6 id="5-2-6-C语言的名字修饰规则非常简单，只是在函数名字前面加一个下划线-函数名-，"><a href="#5-2-6-C语言的名字修饰规则非常简单，只是在函数名字前面加一个下划线-函数名-，" class="headerlink" title="5.2.6    C语言的名字修饰规则非常简单，只是在函数名字前面加一个下划线(_函数名)，"></a>5.2.6    C语言的名字修饰规则非常简单，只是在函数名字前面加一个下划线(_函数名)，</h6></li>
<li><p>[ ] 而在C++文件(xx.cpp)中在函数名字前面加一个  extern “c”既是告诉编辑器该函数按照c语言规则来编译</p>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">"c"</span> <span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"><span class="comment">//一个函数的形式</span></span></span><br><span class="line"><span class="function"><span class="comment">// 若需要全部都用C语言的风格来编辑，形式如下</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line">extern "c"&#123;</span><br><span class="line">    <span class="comment">//很多行C语言代码;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 函数重载总结</li>
</ul>
<blockquote>
<ul>
<li>1   C语言不支持，C++支持</li>
<li>2   特点：函数名相同，参数不同(1.类型不同。2.顺序不同 3.参数个数不同)<br>-3   C++语言支持重载：函数名修饰规则　name mangling</li>
<li>4   C语言中底层函数名：”_” + 函数名<br> -5   C++底层函数名： 前缀+函数名+参数类型首字母</li>
</ul>
</blockquote>
<h4 id="6：引用"><a href="#6：引用" class="headerlink" title="6：引用"></a>6：引用</h4><h5 id="6-1-引用概念：引用不是重新定义了一个变量，而是给已经存在的变量取个别名，编译器不会为引用变量开辟内存空间。它和它引用的变量公用同一块内存空间"><a href="#6-1-引用概念：引用不是重新定义了一个变量，而是给已经存在的变量取个别名，编译器不会为引用变量开辟内存空间。它和它引用的变量公用同一块内存空间" class="headerlink" title="6.1 引用概念：引用不是重新定义了一个变量，而是给已经存在的变量取个别名，编译器不会为引用变量开辟内存空间。它和它引用的变量公用同一块内存空间"></a>6.1 引用概念：引用不是重新定义了一个变量，而是给已经存在的变量取个别名，编译器不会为引用变量开辟内存空间。它和它引用的变量公用同一块内存空间</h5><ul>
<li style="list-style: none"><input type="checkbox"> 示例代码如下：</li>
<li style="list-style: none"><input type="checkbox"> 引用格式：类型名&amp; 引用变量名(对象名) = 引用对象</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Testfun</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> &amp;ra = a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ra  &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">//结果出现一个10</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ra &lt;&lt;<span class="built_in">endl</span>&lt;&lt; a&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">//结果出现两个10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Testfun();</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>[ ] 监视结果：&amp;ra=&amp;a,ra=a=10;</p>
<blockquote>
<p>注意点： 引用类型和引用实体必须是相同类型的</p>
<p>上例中如果出现  double &amp;ra=a;  则会报错</p>
</blockquote>
<h5 id="6-2-引用特性"><a href="#6-2-引用特性" class="headerlink" title="6.2 引用特性"></a>6.2 引用特性</h5><blockquote>
<ul>
<li>1.引用在定义时必须初始化</li>
</ul>
</blockquote>
</li>
<li><p>[ ] 错误示例： int &ra;</p>
<blockquote>
<ul>
<li>2.一个变量可以有多个引用</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正确用法示例：</span></span><br><span class="line">       <span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">       <span class="keyword">int</span> &amp;ra=a;</span><br><span class="line">       <span class="keyword">int</span> &amp;rra=a;</span><br><span class="line">       <span class="keyword">int</span> &amp;rrra=a;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>3.引用一旦引用一个实体则不能在引用其他实体</li>
</ul>
</blockquote>
<h5 id="6-3-常引用"><a href="#6-3-常引用" class="headerlink" title="6.3 常引用"></a>6.3 常引用</h5><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestContRef</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">const</span> <span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">       <span class="comment">//int &amp; ra=1;   //该语句编译时出错，a为常量</span></span><br><span class="line">       <span class="keyword">const</span> <span class="keyword">int</span> &amp;ra=a;</span><br><span class="line">       <span class="comment">//int&amp; b=10;    //该语句编译时出错，b为常量</span></span><br><span class="line">       <span class="keyword">const</span> <span class="keyword">int</span>&amp; b=<span class="number">10</span>;</span><br><span class="line">       <span class="keyword">double</span> d=<span class="number">12.34</span>;</span><br><span class="line">       <span class="keyword">const</span> <span class="keyword">int</span>&amp; rd==d;</span><br><span class="line">       <span class="comment">//隐式类型转换---&gt;临时变量具有常性</span></span><br><span class="line">       <span class="keyword">int</span> c=d;</span><br><span class="line">       <span class="comment">//int&amp; rd=d;     //该语句编译时出错，类型不同</span></span><br><span class="line">       <span class="keyword">const</span> <span class="keyword">int</span>&amp; rd=d;     </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-4-使用场景"><a href="#6-4-使用场景" class="headerlink" title="6.4   使用场景"></a>6.4   使用场景</h4><ul>
<li><p>[ ] 1. 做参数</p>
<blockquote>
<ul>
<li>传指针和传引用效果一样；</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//示例代码：</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(<span class="keyword">int</span> *pa,<span class="keyword">int</span> *pb)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp = *pa;</span><br><span class="line">    *pa = *pb;</span><br><span class="line">    *pb = tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(<span class="keyword">int</span> &amp;ra,<span class="keyword">int</span> &amp;rb)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp = ra;</span><br><span class="line">    ra = rb;</span><br><span class="line">    rb = tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">    Swap(a, b);</span><br><span class="line">    Swap(&amp;a, &amp;b);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 2.做返回值</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">      <span class="function"><span class="keyword">int</span>&amp; <span class="title">Testfuc</span><span class="params">(<span class="keyword">int</span> &amp;a)</span></span>&#123;</span><br><span class="line">          a+=<span class="number">10</span>;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> &amp;ra=Testfuc(a);</span><br><span class="line">        system(<span class="string">"pause"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//注意：如果函数返时，离开函数作用域后，其栈上空间已经还给了系统，因此不能用栈上的</span></span><br><span class="line">  <span class="comment">//空间做为引用类型的返回，如果函数类型返回，返回值的生命周期必须不受函数的限制(既函数周期比较长)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">size_t</span> beginl = clock();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"i="</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">size_t</span> <span class="built_in">endl</span> = clock();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (<span class="built_in">endl</span>- beginl) /CLOCKS_PER_SEC&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以毫秒的形式输出循环的</span></span><br><span class="line"><span class="comment">//引用传值的效率高于值拷贝的形式</span></span><br></pre></td></tr></table></figure>
<h5 id="6-6-指针与引用的区别"><a href="#6-6-指针与引用的区别" class="headerlink" title="6.6 指针与引用的区别"></a>6.6 指针与引用的区别</h5><ul>
<li style="list-style: none"><input type="checkbox"> 引用语法层面：和指针指向同一块内存空间，引用没有开辟新的空间</li>
<li style="list-style: none"><input type="checkbox"> 引用底层实现：引用开辟新的空间，和指针的的实现相同</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a=<span class="number">10</span>;                               inta=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">mov  dword ptr [a], OAh                  mov      dword ptr [a], <span class="number">0</span>Ah</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>&amp; ra = a;                             <span class="keyword">int</span>* pa = &amp;a;</span><br><span class="line"></span><br><span class="line">lea       eax, [a]                       lea  еах,[a]</span><br><span class="line"></span><br><span class="line"> mov      dword ptr [ra], eax            mov  dword ptr [pa], eax</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">ra = <span class="number">20</span>;                                 *pa = <span class="number">20</span>；</span><br><span class="line"></span><br><span class="line">mov       eax, dword ptr [ra]             mov    eax, dword ptr[ра]</span><br><span class="line"></span><br><span class="line">mov       dword ptr [eax], <span class="number">14</span>h            mov    dword ptr [eax], <span class="number">14</span>h</span><br></pre></td></tr></table></figure>
<h5 id="引用和指针的不同点"><a href="#引用和指针的不同点" class="headerlink" title="引用和指针的不同点:"></a>引用和指针的不同点:</h5><h6 id="6-6-1-引用在定义时必须初始化，指针没有要求"><a href="#6-6-1-引用在定义时必须初始化，指针没有要求" class="headerlink" title="6.6.1. 引用在定义时必须初始化，指针没有要求"></a>6.6.1. 引用在定义时必须初始化，指针没有要求</h6><h6 id="6-6-2-引用在初始化时引用一个实体后，就不能再引用其他实体，而指针可以在任何时候指向任何一个同类型实体"><a href="#6-6-2-引用在初始化时引用一个实体后，就不能再引用其他实体，而指针可以在任何时候指向任何一个同类型实体" class="headerlink" title="6.6.2. 引用在初始化时引用一个实体后，就不能再引用其他实体，而指针可以在任何时候指向任何一个同类型实体"></a>6.6.2. 引用在初始化时引用一个实体后，就不能再引用其他实体，而指针可以在任何时候指向任何一个同类型实体</h6><h6 id="6-6-3-没有NULL引用，但有NULL指针"><a href="#6-6-3-没有NULL引用，但有NULL指针" class="headerlink" title="6.6.3. 没有NULL引用，但有NULL指针"></a>6.6.3. 没有NULL引用，但有NULL指针</h6><h6 id="6-6-4-在sizeof中含义不同：引用结果为引用类型的大小，但指针始终是地址空间所占字节个数-32位平台下占4个字节-cout-lt-lt-sizeof-a-lt-lt-endl-结果为4"><a href="#6-6-4-在sizeof中含义不同：引用结果为引用类型的大小，但指针始终是地址空间所占字节个数-32位平台下占4个字节-cout-lt-lt-sizeof-a-lt-lt-endl-结果为4" class="headerlink" title="6.6.4. 在sizeof中含义不同：引用结果为引用类型的大小，但指针始终是地址空间所占字节个数(32位平台下占4个字节)cout &lt;&lt; sizeof(*a)&lt;&lt;endl;   //结果为4"></a>6.6.4. 在sizeof中含义不同：引用结果为引用类型的大小，但指针始终是地址空间所占字节个数(32位平台下占4个字节)cout &lt;&lt; sizeof(*a)&lt;&lt;endl;   //结果为4</h6><h6 id="6-6-5-引用自加即引用的实体增加1，指针自加即指针向后偏移一个类型的大小"><a href="#6-6-5-引用自加即引用的实体增加1，指针自加即指针向后偏移一个类型的大小" class="headerlink" title="6.6.5. 引用自加即引用的实体增加1，指针自加即指针向后偏移一个类型的大小"></a>6.6.5. 引用自加即引用的实体增加1，指针自加即指针向后偏移一个类型的大小</h6><h6 id="6-6-6-有多级指针，但是没有多级引用"><a href="#6-6-6-有多级指针，但是没有多级引用" class="headerlink" title="6.6.6. 有多级指针，但是没有多级引用"></a>6.6.6. 有多级指针，但是没有多级引用</h6><h6 id="6-6-7-访问实体方式不同，指针需要显式解引用，引用编译器自己处理"><a href="#6-6-7-访问实体方式不同，指针需要显式解引用，引用编译器自己处理" class="headerlink" title="6.6.7. 访问实体方式不同，指针需要显式解引用，引用编译器自己处理"></a>6.6.7. 访问实体方式不同，指针需要显式解引用，引用编译器自己处理</h6><h6 id="6-6-8-引用比指针使用起来相对更安全"><a href="#6-6-8-引用比指针使用起来相对更安全" class="headerlink" title="6.6.8. 引用比指针使用起来相对更安全"></a>6.6.8. 引用比指针使用起来相对更安全</h6><h4 id="7-内联函数"><a href="#7-内联函数" class="headerlink" title="7.内联函数"></a>7.内联函数</h4><h5 id="7-1-概念：以inline修饰的函数叫做内联函数，编译时C-编译器会在调用内联函数的地方展开，没有函数压栈的开销，内联函数提升程序运行的效率。"><a href="#7-1-概念：以inline修饰的函数叫做内联函数，编译时C-编译器会在调用内联函数的地方展开，没有函数压栈的开销，内联函数提升程序运行的效率。" class="headerlink" title="7.1 概念：以inline修饰的函数叫做内联函数，编译时C++编译器会在调用内联函数的地方展开，没有函数压栈的开销，内联函数提升程序运行的效率。"></a>7.1 概念：以inline修饰的函数叫做内联函数，编译时C++编译器会在调用内联函数的地方展开，没有函数压栈的开销，内联函数提升程序运行的效率。</h5><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret=Add(<span class="number">1</span>,<span class="number">3</span>) -------&gt;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="面试题："><a href="#面试题：" class="headerlink" title="面试题："></a>面试题：</h5><blockquote>
<ul>
<li>【面试题】宏的优缺点？</li>
</ul>
</blockquote>
<h6 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h6><ul>
<li style="list-style: none"><input type="checkbox"> 1.增强代码的复用性。</li>
<li style="list-style: none"><input type="checkbox"> 2.提高性能。<h6 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h6></li>
<li style="list-style: none"><input type="checkbox"> 1.不方便调试宏。（因为预编译阶段进行了替换)</li>
<li style="list-style: none"><input type="checkbox"> 2.导致代码可读性差，可维护性差，容易误用。</li>
<li style="list-style: none"><input type="checkbox"> 3.没有类型安全的检查 。</li>
</ul>
<h6 id="C-有哪些技术替代宏"><a href="#C-有哪些技术替代宏" class="headerlink" title="C++有哪些技术替代宏"></a>C++有哪些技术替代宏</h6><ul>
<li style="list-style: none"><input type="checkbox"> 1. 常量定义 换用const</li>
<li style="list-style: none"><input type="checkbox"> 2. 函数定义 换用内联函数<h4 id="8-关键字auto"><a href="#8-关键字auto" class="headerlink" title="8.关键字auto"></a>8.关键字auto</h4></li>
<li style="list-style: none"><input type="checkbox"> 特点：使用auto定义变量时必须对其进行初始化，在编译阶段编译器需要根据初始化</li>
<li style="list-style: none"><input type="checkbox"> 表达式来推导auto的实际类型。因此auto并非是一种“类型”的声明，而是一个类型声明</li>
<li style="list-style: none"><input type="checkbox"> 时的“占位符”，编译器在编译期会将auto替换为变量实际的类型。</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">auto</span> b = a;</span><br><span class="line">    <span class="keyword">double</span> c = <span class="number">20.3</span>;</span><br><span class="line">    <span class="keyword">auto</span> d = c;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(a).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(b).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(c).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(d).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//显示出了类型的名称</span></span><br></pre></td></tr></table></figure>
<h5 id="8-2-使用规则"><a href="#8-2-使用规则" class="headerlink" title="8.2 使用规则"></a>8.2 使用规则</h5><h6 id="8-2-1-auto与指针和引用结合起来使用用auto声明指针类型时，用auto和auto-没有任何区别，但用auto声明引用类型时则必须加-amp"><a href="#8-2-1-auto与指针和引用结合起来使用用auto声明指针类型时，用auto和auto-没有任何区别，但用auto声明引用类型时则必须加-amp" class="headerlink" title="8.2.1. auto与指针和引用结合起来使用用auto声明指针类型时，用auto和auto*没有任何区别，但用auto声明引用类型时则必须加&amp;"></a>8.2.1. auto与指针和引用结合起来使用用auto声明指针类型时，用auto和auto*没有任何区别，但用auto声明引用类型时则必须加&amp;</h6><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">auto</span> a = &amp;x;</span><br><span class="line">    <span class="keyword">auto</span>* b = &amp;x;</span><br><span class="line">    <span class="keyword">auto</span>&amp; c = x;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(a).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(b).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(c).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    *a = <span class="number">20</span>;</span><br><span class="line">    *b = <span class="number">30</span>;</span><br><span class="line">     c = <span class="number">40</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="8-2-2-在同一行定义多个变量"><a href="#8-2-2-在同一行定义多个变量" class="headerlink" title="8.2.2 在同一行定义多个变量"></a>8.2.2 在同一行定义多个变量</h6><ul>
<li style="list-style: none"><input type="checkbox"> 当在同一行声明多个变量时，这些变量必须是相同的类型，否则编译器将会报错，</li>
<li style="list-style: none"><input type="checkbox"> 为编译器实际只对第一个类型进行推导，然后用推导出来的类型定义其他变量。</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestAuto</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> a = <span class="number">1</span>, b = <span class="number">2</span>; </span><br><span class="line">    <span class="keyword">auto</span> c = <span class="number">3</span>, d = <span class="number">4.0</span>;  <span class="comment">// 该行代码会编译失败，因为c和d的初始化表达式类型不同</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 若同一个程序中同时定义了多个 auto ，其会根据第一个变量表达式去推导类型。<h5 id="8-3-auto不能推导的场景。"><a href="#8-3-auto不能推导的场景。" class="headerlink" title="8.3 auto不能推导的场景。"></a>8.3 auto不能推导的场景。</h5><h6 id="8-3-1-auto不能做函数的参数"><a href="#8-3-1-auto不能做函数的参数" class="headerlink" title="8.3.1   auto不能做函数的参数"></a>8.3.1   auto不能做函数的参数</h6></li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此处代码编译失败，auto不能作为形参类型，因为编译器无法对a的实际类型进行推导</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestAuto</span><span class="params">(<span class="keyword">auto</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h6 id="8-3-2-auto不能直接用来声明数组"><a href="#8-3-2-auto不能直接用来声明数组" class="headerlink" title="8.3.2  auto不能直接用来声明数组"></a>8.3.2  auto不能直接用来声明数组</h6><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestAuto</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">    <span class="keyword">auto</span> b[] = &#123;<span class="number">4</span>，<span class="number">5</span>，<span class="number">6</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="8-3-3为了避免与C-98中的auto发生混淆，C-11只保留了auto作为类型指示符的用法"><a href="#8-3-3为了避免与C-98中的auto发生混淆，C-11只保留了auto作为类型指示符的用法" class="headerlink" title="8.3.3为了避免与C++98中的auto发生混淆，C++11只保留了auto作为类型指示符的用法"></a>8.3.3为了避免与C++98中的auto发生混淆，C++11只保留了auto作为类型指示符的用法</h6><h6 id="8-3-4-auto在实际中最常见的优势用法就是跟以后会讲到的C-11提供的新式for循环，还有lambda表达式等进"><a href="#8-3-4-auto在实际中最常见的优势用法就是跟以后会讲到的C-11提供的新式for循环，还有lambda表达式等进" class="headerlink" title="8.3.4 auto在实际中最常见的优势用法就是跟以后会讲到的C++11提供的新式for循环，还有lambda表达式等进"></a>8.3.4 auto在实际中最常见的优势用法就是跟以后会讲到的C++11提供的新式for循环，还有lambda表达式等进</h6><p>行配合使用。</p>
<h6 id="8-3-5-auto不能定义类的非静态成员变量-暂不做讲解，后面讲"><a href="#8-3-5-auto不能定义类的非静态成员变量-暂不做讲解，后面讲" class="headerlink" title="8.3.5 auto不能定义类的非静态成员变量(暂不做讲解，后面讲)"></a>8.3.5 auto不能定义类的非静态成员变量(暂不做讲解，后面讲)</h6><h6 id="8-3-6实例化模板时不能使用auto作为模板参数-暂不做讲解，后面讲"><a href="#8-3-6实例化模板时不能使用auto作为模板参数-暂不做讲解，后面讲" class="headerlink" title="8.3.6实例化模板时不能使用auto作为模板参数(暂不做讲解，后面讲)"></a>8.3.6实例化模板时不能使用auto作为模板参数(暂不做讲解，后面讲)</h6><h4 id="9-基于范围的for循环-C-11"><a href="#9-基于范围的for循环-C-11" class="headerlink" title="9. 基于范围的for循环(C++11)"></a>9. 基于范围的for循环(C++11)</h4><h5 id="9-1-for循环后的括号由冒号“-：”分为两部分：第一部分是范围内用于迭代的变量，第二部分则表示被迭代的范围。"><a href="#9-1-for循环后的括号由冒号“-：”分为两部分：第一部分是范围内用于迭代的变量，第二部分则表示被迭代的范围。" class="headerlink" title="9.1  for循环后的括号由冒号“ ：”分为两部分：第一部分是范围内用于迭代的变量，第二部分则表示被迭代的范围。"></a>9.1  for循环后的括号由冒号“ ：”分为两部分：第一部分是范围内用于迭代的变量，第二部分则表示被迭代的范围。</h5><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> size = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; i &lt; size; i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"arr1[i]="</span> &lt;&lt; arr[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> e : arr)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"arr2[i]="</span> &lt;&lt; e &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; e : arr)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"arr3[i]="</span> &lt;&lt;e &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 注意：与普通循环类似，可以用continue来结束本次循环，也可以用break来跳出整个循环<h5 id="9-2-范围for的使用条件"><a href="#9-2-范围for的使用条件" class="headerlink" title="9.2 范围for的使用条件"></a>9.2 范围for的使用条件</h5><h6 id="1-for循环迭代的范围必须是确定的"><a href="#1-for循环迭代的范围必须是确定的" class="headerlink" title="1. for循环迭代的范围必须是确定的"></a>1. for循环迭代的范围必须是确定的</h6></li>
<li style="list-style: none"><input type="checkbox"> 对于数组而言，就是数组中第一个元素和最后一个元素的范围；对于类而言，应该提</li>
<li style="list-style: none"><input type="checkbox"> 供begin和end的方法，begin和end就是for循环迭代的范围。</li>
<li style="list-style: none"><input type="checkbox"> 注意：以下代码就有问题，因为for的范围不确定</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestFor</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; e : <span class="built_in">array</span>) </span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt; e &lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="10-指针空值nullptr-C-11"><a href="#10-指针空值nullptr-C-11" class="headerlink" title="10.指针空值nullptr(C++11)"></a>10.指针空值nullptr(C++11)</h4><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">int</span> *pp = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(pp).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(<span class="literal">nullptr</span>).name() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">结果如下： </span><br><span class="line"><span class="comment">//int *</span></span><br><span class="line"><span class="comment">//std::nullptr_t</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>程序本意是想通过f(NULL)调用指针版本的f(int<em>)函数，但是由于NULL被定义成 0，因此与程序的初衷相悖。在C++98中，字面常量0既可以是一个整形数字，也可以是无类型的指针(void</em>)常量，但是编译器默认情况下将其看成是一个整形常量，如果要将其按照指针方式来使用，必须对其进行强转(void*)0。</p>
</blockquote>
<h5 id="10-2-nullptr-与-nullptr-t"><a href="#10-2-nullptr-与-nullptr-t" class="headerlink" title="10.2 nullptr 与 nullptr_t"></a>10.2 nullptr 与 nullptr_t</h5><blockquote>
<p>为了考虑兼容性，C++11并没有消除常量0的二义性，C++11给出了全新的nullptr表示空值指针。C++11为什么不在NULL的基础上进行扩展，这是因为NULL以前就是一个宏，而且不同的编译器厂商对于NULL的实现可能不太相同，而且直接扩展NULL，可能会影响以前旧的程序。因此：为了避免混淆，C++11提供了nullptr，</p>
<p>即：nullptr代表一个指针空值常量。nullptr是有类型的，其类型为nullptr_t，仅仅可以被隐式转化为指针类型，nullptr_t被定义在头文件中</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">decltype</span><span class="params">(<span class="literal">nullptr</span>)</span> nullptr_t</span>;</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<blockquote>
<p>1 在使用nullptr表示指针空值时，不需要包含头文件，因为nullptr是C++11作为新关键字引入的。</p>
<p>2 在C++11中，sizeof(nullptr) 与 sizeof((void*)0)所占的字节数相同。</p>
<p>3 为了提高代码的健壮性，在后续表示指针空值时建议最好使用nullptr。</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/17/数据结构 - 链表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/17/数据结构 - 链表/" class="post-title-link" itemprop="url">数据结构->链表</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-17 23:08:06" itemprop="dateCreated datePublished" datetime="2019-03-17T23:08:06+08:00">2019-03-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Editado el</span>
                
                <time title="Modificado por: 2019-03-21 20:44:43" itemprop="dateModified" datetime="2019-03-21T20:44:43+08:00">2019-03-21</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">31k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">28 minutos.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="SList-h"><a href="#SList-h" class="headerlink" title="SList.h"></a>SList.h</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> SLDataType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SLNode</span>&#123;</span><span class="comment">//链表中的一个节点</span></span><br><span class="line">	SLDataType value;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">SLNode</span> *<span class="title">next</span>;</span> <span class="comment">//指向链表中的下一个结点地址</span></span><br><span class="line">&#125;SLNode;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SList</span>&#123;</span>   <span class="comment">//一个链表</span></span><br><span class="line">	SLNode *first;   <span class="comment">//指向链表中的第一个结点地址</span></span><br><span class="line">&#125;SList;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListInit</span><span class="params">(SList*<span class="built_in">list</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//销毁过程</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListDestory</span><span class="params">(SList *<span class="built_in">list</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//增</span></span><br><span class="line"><span class="comment">//头插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListPushFront</span><span class="params">(SList *<span class="built_in">list</span>,SLDataType value)</span></span>;</span><br><span class="line"><span class="comment">//尾插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListpushBack</span><span class="params">(SList *<span class="built_in">list</span>, SLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//删</span></span><br><span class="line"><span class="comment">//头删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListPopFront</span><span class="params">(SList *<span class="built_in">list</span>)</span></span>;</span><br><span class="line"><span class="comment">//尾删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListPopBack</span><span class="params">(SList *<span class="built_in">list</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListPrint</span><span class="params">(SList *<span class="built_in">list</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//查</span></span><br><span class="line"><span class="function">SLNode * <span class="title">SListFind</span><span class="params">(<span class="keyword">const</span> SList *<span class="built_in">list</span>, SLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//改</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">SlistNodeUpdate</span><span class="params">(SLNode *node, SLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定位置插入元素</span></span><br><span class="line"><span class="comment">//1--&gt;2--&gt;3--&gt;NULL</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListInsertAfter</span><span class="params">(SLNode *pos, SLDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除给定pos位置后面的结点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListEraseAfter</span><span class="params">(SLNode *pos)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定位置pos 前面插入新结点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListInsertBefore</span><span class="params">(SList *<span class="built_in">list</span>, SLNode *pos, SLDataType value)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="SList-c"><a href="#SList-c" class="headerlink" title="SList.c"></a>SList.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"SList.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListInit</span><span class="params">(SList*<span class="built_in">list</span>)</span></span>&#123;</span><br><span class="line">	assert(<span class="built_in">list</span>!= <span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">list</span>-&gt;first = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//销毁过程</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListDestory</span><span class="params">(SList *<span class="built_in">list</span>)</span></span>&#123;</span><br><span class="line">	assert(<span class="built_in">list</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	SLNode *cur = <span class="built_in">list</span>-&gt;first;</span><br><span class="line">	SLNode *next=<span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">while</span> (cur != <span class="literal">NULL</span>)&#123;</span><br><span class="line">		next = cur-&gt;next;</span><br><span class="line">		<span class="built_in">free</span>(cur);</span><br><span class="line">		cur = next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">list</span>-&gt;first = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//头插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListPushFront</span><span class="params">(SList *<span class="built_in">list</span>, SLDataType value)</span></span>&#123;</span><br><span class="line">	assert(<span class="built_in">list</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	SLNode *node = (SLNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SLNode));</span><br><span class="line">	assert(node);</span><br><span class="line">	node-&gt;value = value;</span><br><span class="line">	node-&gt;next = <span class="built_in">list</span>-&gt;first;</span><br><span class="line">	<span class="built_in">list</span>-&gt;first = node;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//尾插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListpushBack</span><span class="params">(SList *<span class="built_in">list</span>, SLDataType value)</span></span>&#123;</span><br><span class="line">	assert(<span class="built_in">list</span> != <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">list</span>-&gt;first == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="comment">//链表中没有结点,调用头插法</span></span><br><span class="line">		SListPushFront(<span class="built_in">list</span>,value);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//链表中有节点的情况</span></span><br><span class="line">	<span class="comment">//找链表中的最后一个节点</span></span><br><span class="line">	SLNode *ptr;</span><br><span class="line">	<span class="keyword">for</span> (ptr = <span class="built_in">list</span>-&gt;first; ptr-&gt;next != <span class="literal">NULL</span>; ptr = ptr-&gt;next)&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//ptr就是最后一个节点</span></span><br><span class="line">	SLNode *new_node = (SLNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SLNode));</span><br><span class="line">	ptr-&gt;next = new_node;</span><br><span class="line">	new_node-&gt;value = value;</span><br><span class="line">	new_node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//头删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListPopFront</span><span class="params">(SList *<span class="built_in">list</span>)</span></span>&#123;</span><br><span class="line">	assert(<span class="built_in">list</span> != <span class="literal">NULL</span>);       <span class="comment">//保证链表是有的</span></span><br><span class="line">	assert(<span class="built_in">list</span>-&gt;first!=<span class="literal">NULL</span>);   <span class="comment">//保证链表不为空</span></span><br><span class="line">	SLNode *old_first = <span class="built_in">list</span>-&gt;first;  <span class="comment">//拷贝原来的空间，防止丢失。</span></span><br><span class="line">	<span class="built_in">list</span>-&gt;first = <span class="built_in">list</span>-&gt;first-&gt;next;</span><br><span class="line">	<span class="built_in">free</span>(old_first);<span class="comment">//释放老空间</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//尾删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListPopBack</span><span class="params">(SList *<span class="built_in">list</span>)</span></span>&#123;</span><br><span class="line">	assert(<span class="built_in">list</span> != <span class="literal">NULL</span>);       <span class="comment">//保证链表是有的</span></span><br><span class="line">	assert(<span class="built_in">list</span>-&gt;first != <span class="literal">NULL</span>);   <span class="comment">//保证链表不为空</span></span><br><span class="line">	<span class="comment">//自己的想法</span></span><br><span class="line">	<span class="comment">/*SLNode *ret;</span></span><br><span class="line"><span class="comment">	for (ret = list-&gt;first; ret-&gt;next-&gt;next != NULL; ret= ret-&gt;next)&#123;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	SLNode *cur = ret-&gt;next;</span></span><br><span class="line"><span class="comment">	ret-&gt;next = NULL;</span></span><br><span class="line"><span class="comment">	free(cur);*/</span></span><br><span class="line">	<span class="comment">//如果只有一个节结点</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">list</span>-&gt;first-&gt;next == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		SListPopFront(<span class="built_in">list</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	SLNode *ret = <span class="built_in">list</span>-&gt;first;</span><br><span class="line">	<span class="keyword">while</span> (ret-&gt;next-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line">		ret = ret-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">free</span>(ret-&gt;next);</span><br><span class="line">	ret-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListPrint</span><span class="params">(SList *<span class="built_in">list</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (SLNode *cur = <span class="built_in">list</span>-&gt;first; cur != <span class="literal">NULL</span>; cur = cur-&gt;next)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d--&gt; "</span>,cur-&gt;value);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"NULL\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//查找value</span></span><br><span class="line"><span class="comment">//找到链表中遇到的第一个value ,如果没找到，返回NULL</span></span><br><span class="line"><span class="function">SLNode * <span class="title">SListFind</span><span class="params">(<span class="keyword">const</span> SList *<span class="built_in">list</span>, SLDataType value)</span></span>&#123;</span><br><span class="line">	assert(<span class="built_in">list</span> != <span class="literal">NULL</span>);</span><br><span class="line">	<span class="comment">//自己的版本</span></span><br><span class="line">	<span class="comment">/*SLNode *ret = list-&gt;first;</span></span><br><span class="line"><span class="comment">	while ( ret != NULL)&#123;</span></span><br><span class="line"><span class="comment">		if (ret-&gt;value == value)&#123;</span></span><br><span class="line"><span class="comment">			return ret;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		else&#123;</span></span><br><span class="line"><span class="comment">			ret = ret-&gt;next;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	return NULL;*/</span></span><br><span class="line">	<span class="keyword">for</span> (SLNode *ret = <span class="built_in">list</span>-&gt;first; ret != <span class="literal">NULL</span>; ret = ret-&gt;next)&#123;</span><br><span class="line">		<span class="keyword">if</span> (ret-&gt;value == value)&#123;</span><br><span class="line">			<span class="keyword">return</span> ret;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//改</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">SlistNodeUpdate</span><span class="params">(SLNode *node, SLDataType value)</span></span>&#123;</span><br><span class="line">	node-&gt;value = value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定位置插入元素</span></span><br><span class="line"><span class="comment">//1--&gt;2--&gt;3--&gt;NULL</span></span><br><span class="line"><span class="comment">//pos必须是链表中的有效结点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListInsertAfter</span><span class="params">(SLNode *pos, SLDataType value)</span></span>&#123;</span><br><span class="line">	<span class="comment">//给 value 申请结点</span></span><br><span class="line">	SLNode *node = (SLNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SLNode));</span><br><span class="line">	node-&gt;value = value;</span><br><span class="line">	node-&gt;next = pos-&gt;next;</span><br><span class="line">	pos-&gt;next = node;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//删除给定pos位置后面的结点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListEraseAfter</span><span class="params">(SLNode *pos)</span></span>&#123;</span><br><span class="line">	SLNode *new_node = pos-&gt;next;</span><br><span class="line">	pos-&gt;next = new_node-&gt;next;</span><br><span class="line">	<span class="built_in">free</span>(new_node);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定位置pos 前面插入新结点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SListInsertBefore</span><span class="params">(SList *<span class="built_in">list</span>, SLNode *pos, SLDataType value)</span></span>&#123;</span><br><span class="line">	assert(<span class="built_in">list</span> != <span class="literal">NULL</span>);</span><br><span class="line">	SLNode *cur = <span class="built_in">list</span>-&gt;first;</span><br><span class="line">	<span class="keyword">while</span> (cur-&gt;next != pos)&#123;<span class="comment">//判断cur 指向的是不是pos的前一个结点</span></span><br><span class="line">		cur = cur-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	SLNode *new_node = (SLNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SLNode));</span><br><span class="line">	new_node-&gt;value = value;</span><br><span class="line">	cur-&gt;next = new_node;</span><br><span class="line">	new_node-&gt;next = pos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"SList.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestSList</span><span class="params">()</span></span>&#123;</span><br><span class="line">	SList <span class="built_in">list</span>;</span><br><span class="line">	SListInit(&amp;<span class="built_in">list</span>);</span><br><span class="line">	<span class="comment">//检验头插尾插</span></span><br><span class="line">	<span class="comment">/*SListPushFront(&amp;list,1);</span></span><br><span class="line"><span class="comment">	SListPushFront(&amp;list, 2); </span></span><br><span class="line"><span class="comment">	SListPushFront(&amp;list, 3);</span></span><br><span class="line"><span class="comment">	SListpushBack(&amp;list,11);</span></span><br><span class="line"><span class="comment">	SListpushBack(&amp;list,12);</span></span><br><span class="line"><span class="comment">	SListpushBack(&amp;list,13);*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//检测没有节点时的尾插</span></span><br><span class="line">	SListpushBack(&amp;<span class="built_in">list</span>,<span class="number">11</span>);</span><br><span class="line">	SListpushBack(&amp;<span class="built_in">list</span>,<span class="number">12</span>);</span><br><span class="line">	SListpushBack(&amp;<span class="built_in">list</span>,<span class="number">13</span>);</span><br><span class="line">	SListpushBack(&amp;<span class="built_in">list</span>,<span class="number">14</span>);</span><br><span class="line">	SListpushBack(&amp;<span class="built_in">list</span>,<span class="number">15</span>);</span><br><span class="line">	SListPrint(&amp;<span class="built_in">list</span>);</span><br><span class="line">	<span class="comment">//尾删</span></span><br><span class="line">	SListPopFront(&amp;<span class="built_in">list</span>);</span><br><span class="line">	SListPopBack(&amp;<span class="built_in">list</span>);</span><br><span class="line">	</span><br><span class="line">	SLNode *node = SListFind(&amp;<span class="built_in">list</span>,<span class="number">14</span>);</span><br><span class="line">	assert(node!=<span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">	SListInsertAfter(node, <span class="number">103</span>);</span><br><span class="line">	SListPrint(&amp;<span class="built_in">list</span>);</span><br><span class="line">	</span><br><span class="line">	SListEraseAfter(node);</span><br><span class="line">	SListPrint(&amp;<span class="built_in">list</span>);</span><br><span class="line">	SListInsertBefore(&amp;<span class="built_in">list</span>, node, <span class="number">101</span>);</span><br><span class="line">	SListPrint(&amp;<span class="built_in">list</span>);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	TestSList();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"程序运行成功!\n"</span>);</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/17/C++ 内存管理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/17/C++ 内存管理/" class="post-title-link" itemprop="url">C++内存管理</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-17 10:01:47" itemprop="dateCreated datePublished" datetime="2019-03-17T10:01:47+08:00">2019-03-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Editado el</span>
                
                <time title="Modificado por: 2019-03-27 00:26:29" itemprop="dateModified" datetime="2019-03-27T00:26:29+08:00">2019-03-27</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">93k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">1:25</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-例题"><a href="#1-例题" class="headerlink" title="1 . 例题"></a>1 . 例题</h3><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">int</span> globalVar = <span class="number">1</span>;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">int</span> staticGlobalVar = <span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span> staticVar = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> localVar = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> num1[<span class="number">10</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">  <span class="keyword">char</span> char2[] = <span class="string">"abcd"</span>;</span><br><span class="line">  <span class="keyword">char</span>* pChar3 = <span class="string">"abcd"</span>;</span><br><span class="line">  <span class="keyword">int</span>* ptr1 = (<span class="keyword">int</span>)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span> (<span class="keyword">int</span>)<span class="number">4</span>);</span><br><span class="line">  <span class="keyword">int</span>* ptr2 = (<span class="keyword">int</span>*)<span class="built_in">calloc</span>(<span class="number">4</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">  <span class="keyword">int</span>* ptr3 = (<span class="keyword">int</span>)<span class="built_in">realloc</span>(ptr2, <span class="keyword">sizeof</span>(<span class="keyword">int</span>)<span class="number">4</span>);</span><br><span class="line">  <span class="built_in">free</span> (ptr1);</span><br><span class="line">  <span class="built_in">free</span> (ptr3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="1-选择题：选项-A-栈-B-堆-C-数据段-D-代码段"><a href="#1-选择题：选项-A-栈-B-堆-C-数据段-D-代码段" class="headerlink" title="1.选择题：选项: A.栈 B.堆 C.数据段 D.代码段"></a>1.选择题：选项: A.栈 B.堆 C.数据段 D.代码段</h6><blockquote>
<p>globalVar在哪里？_C_    staticGlobalVar在哪里？C__<br>staticVar在哪里？_C_    localVar在哪里？A__<br>num1 在哪里？_A___<br>char2在哪里？A_ <em>char2在哪里？A<br>pChar3在哪里？_A _ </em>pChar3在哪里？D<br>ptr1在哪里？_A *ptr1在哪里？B</p>
</blockquote>
<h6 id="全局变量放在数据段-静态的也放在数据段"><a href="#全局变量放在数据段-静态的也放在数据段" class="headerlink" title="全局变量放在数据段,静态的也放在数据段"></a>全局变量放在数据段,静态的也放在数据段</h6><h6 id="局部变量放在栈上-属于栈帧-，数组若为局部变量也放在栈上"><a href="#局部变量放在栈上-属于栈帧-，数组若为局部变量也放在栈上" class="headerlink" title="局部变量放在栈上(属于栈帧)，数组若为局部变量也放在栈上"></a>局部变量放在栈上(属于栈帧)，数组若为局部变量也放在栈上</h6><h6 id="2-填空题："><a href="#2-填空题：" class="headerlink" title="2. 填空题："></a>2. 填空题：</h6><blockquote>
<p>sizeof(num1) =40 ; </p>
<p>sizeof(char2) = 5; strlen(char2) =4 ;</p>
<p>sizeof(pChar3) = _4 或者 8;  </p>
<p>strlen(pChar3) = _4;sizeof(ptr1) = _4 或者 8__;</p>
<p>//跟系统有关系，32位的为4，64位的为8。32/64 位与虚拟机的地址空间有关，虚拟机的地址空间又与进程有关</p>
<p>sizeof(ptr2)= 4/8</p>
<p>sizeof:类型大小     strlen: 有效字符长度</p>
</blockquote>
<h6 id="sizeof-用来计算类型或者是对象的大小"><a href="#sizeof-用来计算类型或者是对象的大小" class="headerlink" title="sizeof 用来计算类型或者是对象的大小"></a>sizeof 用来计算类型或者是对象的大小</h6><h6 id="strlen-遇到’-0’就结束，计算自字符的大小。"><a href="#strlen-遇到’-0’就结束，计算自字符的大小。" class="headerlink" title="strlen 遇到’\0’就结束，计算自字符的大小。"></a>strlen 遇到’\0’就结束，计算自字符的大小。</h6><h6 id="3-总结"><a href="#3-总结" class="headerlink" title="3.总结"></a>3.总结</h6><blockquote>
<ul>
<li>定义的局部变量(不管类型)都在栈空间上。</li>
<li>动态加载的都在堆上。</li>
<li>解引用的空间在堆上，本身的空间在栈上。</li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20190317144450564.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190317144533379.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h6 id="3-【说明】"><a href="#3-【说明】" class="headerlink" title="3.【说明】"></a>3.【说明】</h6><blockquote>
<ul>
<li>1.栈又叫堆栈，非静态局部变量/函数参数/返回值等等，栈是向下增长的。</li>
<li>2.内存映射段是高效的I/O映射方式，用于装载一个共享的动态内存库。用户可使用系统接口创建共享共享内存，做进程间通信。（Linux课程如果没学到这块，现在只需要了解一下）</li>
<li>3.堆用于程序运行时动态内存分配，堆是可以上增长的。</li>
<li>4.数据段–存储全局数据和静态数据。</li>
<li>5.代码段–可执行的代码/只读常量。</li>
</ul>
</blockquote>
<h3 id="2-c-语言中动态内存管理方式"><a href="#2-c-语言中动态内存管理方式" class="headerlink" title="2. c 语言中动态内存管理方式"></a>2. c 语言中动态内存管理方式</h3><h4 id="2-1-malloc-calloc-realloc和free"><a href="#2-1-malloc-calloc-realloc和free" class="headerlink" title="2.1  malloc/calloc/realloc和free"></a>2.1  malloc/calloc/realloc和free</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证32位平台中malloc 可以申请多大空间</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> * <span class="title">malloc</span><span class="params">(<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>)</span></span>;</span><br><span class="line"><span class="comment">//申请了1G的空间。管理在堆上的空间malloc</span></span><br><span class="line"><span class="comment">//用于动态申请空间calloc 用于开辟空间并进行初始化</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p> 管理在堆上的空间</p>
</blockquote>
<p>######malloc 用于动态申请空间</p>
<h6 id="calloc-用于开辟空间并进行初始化"><a href="#calloc-用于开辟空间并进行初始化" class="headerlink" title="calloc 用于开辟空间并进行初始化"></a>calloc 用于开辟空间并进行初始化</h6><h6 id="realloc-用于调整大小，用于扩容"><a href="#realloc-用于调整大小，用于扩容" class="headerlink" title="realloc 用于调整大小，用于扩容"></a>realloc 用于调整大小，用于扩容</h6><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">  </span><br><span class="line">   <span class="keyword">int</span>* p1 = (<span class="keyword">int</span>*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">  </span><br><span class="line">   <span class="built_in">free</span>(p1);</span><br><span class="line">  </span><br><span class="line">   <span class="comment">// 1.malloc/calloc/realloc的区别是什么？</span></span><br><span class="line">  </span><br><span class="line">   <span class="keyword">int</span>* p2 = (<span class="keyword">int</span>*)<span class="built_in">calloc</span>(<span class="number">4</span>, <span class="keyword">sizeof</span> (<span class="keyword">int</span>));</span><br><span class="line">  </span><br><span class="line">   <span class="keyword">int</span>* p3 = (<span class="keyword">int</span>)<span class="built_in">realloc</span>(p2, <span class="keyword">sizeof</span>(<span class="keyword">int</span>)<span class="number">10</span>);<span class="comment">//给p2 阔占空间</span></span><br><span class="line">  </span><br><span class="line">   <span class="comment">// 这里需要free(p2)吗？</span></span><br><span class="line">  </span><br><span class="line">   <span class="built_in">free</span>(p3 );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-1-1-malloc"><a href="#2-1-1-malloc" class="headerlink" title="2.1.1 malloc"></a>2.1.1 malloc</h5><ul>
<li style="list-style: none"><input type="checkbox"> 动态申请内存</li>
</ul>
<h5 id="2-1-2-calloc"><a href="#2-1-2-calloc" class="headerlink" title="2.1.2   calloc"></a>2.1.2   calloc</h5><blockquote>
<ul>
<li>不光申请空间，还对这个空间进行初始化</li>
<li>初始化的空间用户不能指定，它自己规定为 0</li>
</ul>
</blockquote>
<h5 id="2-1-3-realloc"><a href="#2-1-3-realloc" class="headerlink" title="2.1.3 realloc"></a>2.1.3 realloc</h5><blockquote>
<ul>
<li>调整空间</li>
<li>空间已经存在，只需要做调整空间大小</li>
</ul>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">realloc</span><span class="params">(<span class="keyword">int</span> *ptr,<span class="keyword">int</span> size)</span></span></span><br><span class="line"><span class="function">        <span class="comment">//ptr 指向需要调整的空间，而size 表示需要的空间大小</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span></span><br><span class="line"><span class="function">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> *pi=(<span class="keyword">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span> )*<span class="number">20</span>);</span><br><span class="line">        <span class="comment">//申请动态内存</span></span><br><span class="line">        <span class="built_in">free</span>(pi);</span><br><span class="line">        <span class="comment">//将申请的内存释放掉</span></span><br><span class="line">        <span class="keyword">char</span> *pc=(<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="number">20</span>);</span><br><span class="line">        <span class="keyword">char</span> *ppc=(<span class="keyword">char</span> *)<span class="built_in">realloc</span>(pc,<span class="number">40</span>);</span><br><span class="line">        <span class="comment">//free(pc); 释放pc 不保险</span></span><br><span class="line">        <span class="built_in">free</span>(ppc);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-C-的内存管理方式"><a href="#3-C-的内存管理方式" class="headerlink" title="3.C++ 的内存管理方式"></a>3.C++ 的内存管理方式</h3><ul>
<li style="list-style: none"><input type="checkbox"> C语言内存管理方式在C++中可以继续使用，但有些地方就无能为力而且使用起来比较麻烦，因此C++又提出了自己的内存管理方式：通过new和delete操作符进行动态内存管理。</li>
</ul>
<h4 id="3-1-new-delete操作内置类型"><a href="#3-1-new-delete操作内置类型" class="headerlink" title="3.1 new/delete操作内置类型"></a>3.1 new/delete操作内置类型</h4><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line">   <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   	<span class="keyword">int</span> *pa = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">   	<span class="comment">//new 为关键字， 而int 为需要申请的空间类型 </span></span><br><span class="line">   	<span class="keyword">int</span> *pb = <span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">1</span>);</span><br><span class="line">       <span class="comment">//申请一块空间，并且初始值赋为 1</span></span><br><span class="line">   	<span class="keyword">delete</span> pb;</span><br><span class="line">   	<span class="comment">//c++释放单个空间的方式</span></span><br><span class="line">   	<span class="keyword">int</span> *pc = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">   	<span class="comment">//申请一块连续的空间，空间为10个int类型的空间大小为 40 字节</span></span><br><span class="line">   	<span class="keyword">delete</span>[]pc;</span><br><span class="line">   	<span class="comment">//c++释放连续空间的方式</span></span><br><span class="line">   	<span class="comment">//new/delete     new[]/delete []</span></span><br><span class="line">   	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>注意：申请和释放单个元素的空间，使用new和delete操作符，申请和释放连续的空间，使用new[]和delete[]</li>
</ul>
</blockquote>
<p><img src="http://wx2.sinaimg.cn/mw690/0071OE7sly1g1dycvpj0cj30m10dy40d.jpg" alt></p>
<blockquote>
<p>内置类型    malloc 和 new 效果一样</p>
<p>自定义类型  malloc 和new 不一样</p>
<p>C++推荐使用new </p>
</blockquote>
<h5 id="3-2-new和delete操作自定义类型"><a href="#3-2-new和delete操作自定义类型" class="headerlink" title="3.2 new和delete操作自定义类型"></a>3.2 new和delete操作自定义类型</h5><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例一</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    	<span class="keyword">int</span> _a;</span><br><span class="line">    	<span class="keyword">int</span> _b;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	A* pa = (A *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(A));</span><br><span class="line">    	<span class="built_in">free</span>(pa);</span><br><span class="line">    	A *pb = <span class="keyword">new</span> A;</span><br><span class="line">    	<span class="keyword">delete</span> pb;</span><br><span class="line">    	A *pc = <span class="keyword">new</span> A[<span class="number">10</span>];</span><br><span class="line">    	<span class="keyword">delete</span>[]pc;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例二</span></span><br><span class="line">   <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line">   <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	A()&#123;</span><br><span class="line">    		<span class="built_in">cout</span> &lt;&lt; <span class="string">"A"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    </span><br><span class="line">    	~A()&#123;</span><br><span class="line">    		<span class="comment">//释放空间</span></span><br><span class="line">    		<span class="comment">//if(_pi)&#123;</span></span><br><span class="line">    		<span class="comment">//free(_pi);</span></span><br><span class="line">    		<span class="comment">//_pi=nullptr;</span></span><br><span class="line">    		<span class="built_in">cout</span> &lt;&lt; <span class="string">"~A"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    	<span class="keyword">int</span> _a;</span><br><span class="line">    	<span class="keyword">int</span> _b;</span><br><span class="line">    	<span class="keyword">int</span> *_pi;</span><br><span class="line">    	<span class="comment">//加入申请了空间</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">/*A* pa = (A *)malloc(sizeof(A));</span></span><br><span class="line"><span class="comment">    	free(pa);*/</span></span><br><span class="line">    	A *pb = <span class="keyword">new</span> A;</span><br><span class="line">    	<span class="comment">//new 调用自定义类型的构造函数，malloc不会</span></span><br><span class="line">    	<span class="keyword">delete</span> pb;</span><br><span class="line">    	<span class="comment">//delete 调用自定义类型的析构函数，free不会 </span></span><br><span class="line">    	<span class="comment">/*A *pc = new A[10];</span></span><br><span class="line"><span class="comment">    	delete[] pc;*/</span></span><br><span class="line">    	system(<span class="string">"pause"</span>);</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//总结：new-&gt;operator new -&gt;构造</span></span><br><span class="line">    <span class="comment">//     delete --&gt;析构 ---&gt;opeator delete</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例三</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Test()</span><br><span class="line">		: _data(<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"Test():"</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	~Test()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"~Test():"</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> _data;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Test* pa = (Test *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Test));<span class="comment">//只是开辟空间</span></span><br><span class="line">	<span class="built_in">free</span>(pa);</span><br><span class="line">	Test *pb = <span class="keyword">new</span> Test;</span><br><span class="line">	<span class="comment">//new 对于自定义类型来说，他是开辟空间+调用构造函数(初始化)</span></span><br><span class="line">	<span class="keyword">delete</span> pb;</span><br><span class="line">	Test *pc = <span class="keyword">new</span> Test[<span class="number">10</span>];<span class="comment">//调用构造函数</span></span><br><span class="line">	<span class="keyword">delete</span>[]pc;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>课件例题</p>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">    &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">     Test()</span><br><span class="line">     : _data(<span class="number">0</span>)</span><br><span class="line">     &#123;</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;<span class="string">"Test():"</span>&lt;&lt;<span class="keyword">this</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     ~Test()</span><br><span class="line">     &#123;</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;<span class="string">"~Test():"</span>&lt;&lt;<span class="keyword">this</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">     <span class="keyword">int</span> _data;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">     <span class="comment">// 申请单个Test类型的空间</span></span><br><span class="line">     Test* p1 = (Test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Test));</span><br><span class="line">     <span class="built_in">free</span>(p1);</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// 申请10个Test类型的空间</span></span><br><span class="line">     Test* p2 = (Test*)<span class="built_in">malloc</span>(sizoef(Test) * <span class="number">10</span>);</span><br><span class="line">     <span class="built_in">free</span>(p2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">     <span class="comment">// 申请单个Test类型的对象</span></span><br><span class="line">     Test* p1 = <span class="keyword">new</span> Test;</span><br><span class="line">     <span class="keyword">delete</span> p1;</span><br><span class="line">     <span class="comment">// 申请10个Test类型的对象</span></span><br><span class="line">     Test* p2 = <span class="keyword">new</span> Test[<span class="number">10</span>];</span><br><span class="line">     <span class="keyword">delete</span>[] p2;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>注意：在申请自定义类型的空间时，new会调用构造函数，delete会调用析构函数，而malloc与free不会</li>
</ul>
</blockquote>
<h3 id="4-operator-new与operator-delete函数"><a href="#4-operator-new与operator-delete函数" class="headerlink" title="4. operator new与operator delete函数"></a>4. operator new与operator delete函数</h3><blockquote>
<p>new和delete是用户进行动态内存申请和释放的操作符，operator new 和operator delete是系统提供的全局函数，new在底层调用operator new全局函数来申请空间，delete在底层通过operator delete全局函数来释放空间。</p>
<p>malloc 匹配 free</p>
<p>new 匹配 delete</p>
<p>new [] 匹配 delete []</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">内置类型</span><br><span class="line"><span class="keyword">new</span> <span class="keyword">int</span>==》<span class="keyword">operator</span> <span class="keyword">new</span> 开空间==》<span class="built_in">malloc</span>==》构造函数</span><br><span class="line"></span><br><span class="line"><span class="built_in">malloc</span> <span class="keyword">int</span> ==》<span class="built_in">malloc</span> </span><br><span class="line"><span class="keyword">int</span> 也有构造函数；</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Test ==&gt;<span class="keyword">operator</span> <span class="keyword">new</span> =&gt;<span class="built_in">malloc</span> ==构造</span><br><span class="line"><span class="built_in">malloc</span> Test== <span class="built_in">malloc</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">    operator new：该函数实际通过malloc来申请空间，当malloc申请空间成功时直接返回；申请空间失败，尝试执行空 间不足应对措施，如果改应对措施用户设置了，则继续申请，否则抛异常。</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">void</span> *__<span class="function">CRTDECL <span class="keyword">operator</span> <span class="title">new</span><span class="params">(<span class="keyword">size_t</span> size)</span> _<span class="title">THROW1</span><span class="params">(_STD bad_alloc)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">     <span class="comment">// try to allocate size bytes</span></span><br><span class="line">     <span class="keyword">void</span> *p;</span><br><span class="line">     <span class="keyword">while</span> ((p = <span class="built_in">malloc</span>(size)) == <span class="number">0</span>)</span><br><span class="line">     <span class="keyword">if</span> (_callnewh(size) == <span class="number">0</span>)</span><br><span class="line">     &#123;</span><br><span class="line">     <span class="comment">// report no memory</span></span><br><span class="line">     <span class="comment">// 如果申请内存失败了，这里会抛出bad_alloc 类型异常</span></span><br><span class="line">     <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">std</span>::bad_alloc nomem;</span><br><span class="line">     _RAISE(nomem);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> (p);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//用法上:opeartor new &lt;==&gt;封装了( malloc + 失败抛异常)</span></span><br><span class="line"><span class="comment">//用法上:operatir delete &lt;==&gt; free</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>申请空间异常的情况</li>
</ul>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"> <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   	<span class="comment">//两种处理异常的方式</span></span><br><span class="line">   	<span class="built_in">cout</span> &lt;&lt; <span class="string">"malloc:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   	<span class="keyword">char</span> *p = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="number">0x7ffffffff</span>);</span><br><span class="line">   	<span class="built_in">cout</span> &lt;&lt; (<span class="keyword">void</span>*)p &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="built_in">free</span>(p);</span><br><span class="line">   	<span class="built_in">cout</span> &lt;&lt; <span class="string">"new:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   	<span class="keyword">try</span>&#123;</span><br><span class="line">   		<span class="keyword">char</span> *p = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">0X7fffffff</span>];</span><br><span class="line">   		<span class="built_in">cout</span> &lt;&lt; (<span class="keyword">void</span>*)p &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   	&#125;</span><br><span class="line">   	<span class="keyword">catch</span> (exception&amp; e)&#123;</span><br><span class="line">   		<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   		<span class="comment">//特殊接口：e.what()</span></span><br><span class="line">   	&#125;</span><br><span class="line">       <span class="comment">//operator new:malloc + 异常</span></span><br><span class="line">       <span class="comment">//operator delete&lt;==&gt;free(相当于)</span></span><br><span class="line">   	system(<span class="string">"pause"</span>);</span><br><span class="line">   	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-1双向链表中的应用"><a href="#4-1双向链表中的应用" class="headerlink" title="4.1双向链表中的应用"></a>4.1双向链表中的应用</h5><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>&#123;</span></span><br><span class="line">       ListNode *_prev;</span><br><span class="line">       LisrNode *_next;</span><br><span class="line">       <span class="keyword">int</span> _date;</span><br><span class="line">       </span><br><span class="line">       <span class="function"><span class="keyword">void</span> *<span class="keyword">operator</span> <span class="title">new</span><span class="params">(<span class="keyword">size_t</span> n)</span></span>&#123;</span><br><span class="line">           <span class="keyword">void</span> *p=allocator&lt;ListNode&gt;().allocate(<span class="number">1</span>);</span><br><span class="line">           <span class="built_in">cout</span>&lt;&lt;<span class="string">"mem pool allocate"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">           <span class="keyword">return</span> p;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="function"><span class="keyword">void</span> <span class="keyword">operator</span> <span class="title">delete</span> <span class="params">(<span class="keyword">void</span> *p)</span></span>&#123;</span><br><span class="line">           allocator&lt;ListNode&gt;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;;</span><br><span class="line">    </span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">mian</span><span class="params">()</span></span>&#123;</span><br><span class="line">       List *p1=<span class="keyword">new</span> List[<span class="number">10</span>];</span><br><span class="line">       <span class="comment">// free(p1); //用new 申请的空间必须要delete 来释放</span></span><br><span class="line">       <span class="keyword">delete</span>[] p1;   <span class="comment">//</span></span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h6 id="new-delete-总结"><a href="#new-delete-总结" class="headerlink" title="new\delete\总结"></a>new\delete\总结</h6><ul>
<li style="list-style: none"><input type="checkbox"> 自定义类型：new malloc delete free</li>
<li style="list-style: none"><input type="checkbox"> new: opeator new —-&gt;malloc  +  构造</li>
<li style="list-style: none"><input type="checkbox"> malloc: malloc</li>
<li style="list-style: none"><input type="checkbox"> new[N] : operator new [N]—&gt;opertor new —&gt;malloc + N次构造</li>
<li style="list-style: none"><input type="checkbox"> delete :析构 + opeator delete —&gt;free</li>
<li style="list-style: none"><input type="checkbox"> free:  free</li>
<li style="list-style: none"><input type="checkbox"> delete[]: N(析构 + operator delete –&gt; free) </li>
</ul>
<blockquote>
<ul>
<li>new 申请的空间，系统不会自己释放，需要自己手动释放(delete)</li>
<li>内置类型：</li>
<li>new : malloc + 异常</li>
<li>malloc :malloc</li>
<li>delete: 封装free</li>
<li>free: free</li>
</ul>
</blockquote>
<h3 id="5-new和delete的实现原理"><a href="#5-new和delete的实现原理" class="headerlink" title="5.new和delete的实现原理"></a>5.new和delete的实现原理</h3><h5 id="5-1-内置类型"><a href="#5-1-内置类型" class="headerlink" title="5.1 内置类型"></a>5.1 内置类型</h5><blockquote>
<ul>
<li>如果申请的是内置类型的空间，new和malloc，delete和free基</li>
<li>本类似，不同的地方是：new/delete申请和释放的是单个元素的</li>
<li>空间，new[]和delete[]申请的是连续空间，而且new在申请空间</li>
<li>失败时会抛异常，malloc会返回NULL。</li>
</ul>
</blockquote>
<h5 id="5-2-自定义类型"><a href="#5-2-自定义类型" class="headerlink" title="5.2 自定义类型"></a>5.2 自定义类型</h5><ul>
<li style="list-style: none"><input type="checkbox"> new的原理 : 调用operator new函数申请空间<blockquote>
<ul>
<li>在申请的空间上执行构造函数，完成对象的构造</li>
</ul>
</blockquote>
</li>
<li style="list-style: none"><input type="checkbox"> delete的原理<blockquote>
<ul>
<li>在空间上执行析构函数，完成对象中资源的清理工作</li>
</ul>
</blockquote>
</li>
<li style="list-style: none"><input type="checkbox"> new T[N]的原理<blockquote>
<ul>
<li>1.调用operator new[]函数，在operator new[]中实际调用operator new函数完成N个对象空间的申请</li>
<li>2.在申请的空间上执行N次构造函数</li>
</ul>
</blockquote>
</li>
<li style="list-style: none"><input type="checkbox"> delete[]的原理<blockquote>
<ul>
<li>1.在释放的对象空间上执行N次析构函数，完成N个对象中资源的清理</li>
<li>2.调用operator delete[]释放空间，实际在operator delete[]中</li>
<li>调用operator delete来释放空间</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="6-定位new表达式-placement-new"><a href="#6-定位new表达式-placement-new" class="headerlink" title="6.定位new表达式(placement-new)"></a>6.定位new表达式(placement-new)</h3><blockquote>
<ul>
<li>定位new表达式是在已分配的原始内存空间中调用构造函数初始化一个对象。</li>
</ul>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> 使用格式：<blockquote>
<ul>
<li>1.new (place_address) type或者new (place_address) type(initializer-list)</li>
<li>2.place_address必须是一个指针，initializer-list是类型的初始化列表</li>
</ul>
</blockquote>
</li>
<li style="list-style: none"><input type="checkbox"> 使用场景：<blockquote>
<ul>
<li>定位new表达式在实际中一般是配合内存池使用。因为内存池分配出的内存没有初始化，所以如果是自定义类型的对象，需要使用new的定义表达式进行显示调构造函数进行初始化</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">   &#123;</span></span><br><span class="line">   <span class="keyword">public</span>:</span><br><span class="line">    Test()</span><br><span class="line">    : _data(<span class="number">0</span>)       <span class="comment">//初始化表达式</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Test():"</span>&lt;&lt;<span class="keyword">this</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~Test()</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"~Test():"</span>&lt;&lt;<span class="keyword">this</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> _data;</span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">    <span class="comment">// pt现在指向的只不过是与Test对象相同大小的一段空间，还不能算是一个对象，因为构造函数没有执行</span></span><br><span class="line">    Test* pt = (Test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Test));</span><br><span class="line">    <span class="keyword">new</span>(pt) Test; <span class="comment">// 注意：如果Test类的构造函数有参数时，此处需要传参</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//初始化表达式使用的例子</span></span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line">       <span class="keyword">public</span>:</span><br><span class="line">       Date(<span class="keyword">int</span> year=<span class="number">1900</span>,<span class="keyword">int</span> month=<span class="number">1</span>,<span class="keyword">int</span> day=<span class="number">1</span>)            </span><br><span class="line">           :_year(year)     </span><br><span class="line">            ,_month(month)<span class="comment">//初始化表达式使用的例子</span></span><br><span class="line">               ,_day(day)</span><br><span class="line">           &#123;&#125;</span><br><span class="line">       <span class="keyword">private</span>:</span><br><span class="line">       <span class="keyword">int</span> _year;</span><br><span class="line">       <span class="keyword">int</span> _month;</span><br><span class="line">       <span class="keyword">int</span> _day;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">       Date* pd=(Date*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Date));</span><br><span class="line">       Date* pd2=(Date*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Date));</span><br><span class="line">       <span class="comment">//pd2的值是随机的</span></span><br><span class="line">       <span class="keyword">new</span>(pd)Date;             <span class="comment">//不带参</span></span><br><span class="line">       <span class="keyword">new</span>(pd2)Date（<span class="number">1939</span>，<span class="number">2</span>，<span class="number">3</span>）; <span class="comment">//带参</span></span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">       <span class="keyword">int</span> a;</span><br><span class="line">   &#125;;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">       A* pa =<span class="keyword">new</span> A;</span><br><span class="line">       <span class="keyword">delete</span> pa;<span class="comment">//delete释放指针指向的那一快堆上的空间</span></span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-常见的面试题"><a href="#7-常见的面试题" class="headerlink" title="7.常见的面试题"></a>7.常见的面试题</h3><h5 id="7-1-malloc-free和new-delete的区别"><a href="#7-1-malloc-free和new-delete的区别" class="headerlink" title="7.1 malloc/free和new/delete的区别"></a>7.1 malloc/free和new/delete的区别</h5><blockquote>
<ul>
<li>malloc/free和new/delete的共同点是：都是从堆上申请空间，并且需要用户手动释放。不同的地方是：</li>
</ul>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> 1. malloc和free是函数，new和delete是操作符</li>
<li style="list-style: none"><input type="checkbox"> 2. malloc申请的空间不会初始化，new可以初始化</li>
<li style="list-style: none"><input type="checkbox"> 3.malloc申请空间时，需要手动计算空间大小并传递，new只需在其后跟上空间的类型即可</li>
<li style="list-style: none"><input type="checkbox"> 4.malloc的返回值为void*, 在使用时必须强转，new不需要，因为new后跟的是空间的类型</li>
<li style="list-style: none"><input type="checkbox"> 5 .malloc申请空间失败时，返回的是NULL，因此使用时必须判空，new不需要，但是new需要捕获异常</li>
<li style="list-style: none"><input type="checkbox"> 6 .申请自定义类型对象时，malloc/free只会开辟空间，不会调用构造函数与析构函数，而new在申请空间后会调用构造函数完成对象的初始化，delete在释放空间前会调用析构函数完成空间中资源的清理</li>
<li style="list-style: none"><input type="checkbox"> 7. new/delete比malloc和free的效率稍微低点，因为new/delete的底层封装了malloc/free<ol start="8">
<li>new 失败会抛异常，malloc 失败返回 0；</li>
</ol>
</li>
</ul>
<h5 id="7-2-请设计一个类，该类只能在堆上创建对象"><a href="#7-2-请设计一个类，该类只能在堆上创建对象" class="headerlink" title="7.2  请设计一个类，该类只能在堆上创建对象"></a>7.2  请设计一个类，该类只能在堆上创建对象</h5><ul>
<li style="list-style: none"><input type="checkbox"> 方法一：构造函数私有化<blockquote>
<ul>
<li>将类的构造函数私有，拷贝构造声明成私有。防止别人调用拷贝</li>
<li>在栈上生成对象</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeapOnly</span> </span></span><br><span class="line"><span class="class">    &#123;</span> </span><br><span class="line">    <span class="keyword">public</span>: </span><br><span class="line">     <span class="function"><span class="keyword">static</span> HeapOnly* <span class="title">CreateObject</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">     </span>&#123; </span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> HeapOnly; </span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">private</span>: </span><br><span class="line">     HeapOnly() &#123;&#125;</span><br><span class="line">     <span class="comment">// C++98</span></span><br><span class="line">     <span class="comment">// 1.只声明,不实现。因为实现可能会很麻烦，而你本身不需要</span></span><br><span class="line">     <span class="comment">// 2.声明成私有</span></span><br><span class="line">     HeapOnly(<span class="keyword">const</span> HeapOnly&amp;)；</span><br><span class="line">     <span class="comment">// or</span></span><br><span class="line">     <span class="comment">// C++11 </span></span><br><span class="line">     HeapOnly(<span class="keyword">const</span> HeapOnly&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上课例题代码</span></span><br><span class="line">   <span class="comment">//指针访问 -&gt;</span></span><br><span class="line">   <span class="comment">//对象 .</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">//1.构造函数私有化</span></span><br><span class="line">   <span class="comment">//2.提供公共接口：在堆上创建对象</span></span><br><span class="line">   <span class="comment">//3.在类外面无法创建对象，函数用类名调用，公共接口必须为static接口</span></span><br><span class="line">   <span class="comment">//4.防止拷贝:</span></span><br><span class="line">   <span class="comment">//&lt;1&gt;:拷贝构造私有化，只声明不实现</span></span><br><span class="line">   <span class="comment">//&lt;2&gt;：拷贝构造声明成delete函数(C++11的特性)</span></span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Heap</span></span></span><br><span class="line"><span class="class">   &#123;</span></span><br><span class="line">   	<span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="keyword">public</span>:</span><br><span class="line">   	<span class="function"><span class="keyword">static</span> Heap* <span class="title">getHeap</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   	</span>&#123;</span><br><span class="line">   		<span class="keyword">return</span> <span class="keyword">new</span> Heap;</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="comment">//以下两种拷贝构造都可以</span></span><br><span class="line">   	 Heap(<span class="keyword">const</span> Heap&amp; hp) = <span class="keyword">delete</span>;</span><br><span class="line">   <span class="keyword">private</span>:</span><br><span class="line">   Heap()&#123;&#125;</span><br><span class="line">  <span class="comment">//Heap(const Heap&amp; hp)；</span></span><br><span class="line">  <span class="comment">//&#123;&#125;</span></span><br><span class="line">  <span class="comment">//只申明不实习，因为实现可能会很麻烦，而你本身不需要</span></span><br><span class="line">  <span class="comment">//2.申明成私有</span></span><br><span class="line">   &#125;;</span><br><span class="line">   </span><br><span class="line">   Heap::Heap(<span class="keyword">const</span> Heap&amp; hp)&#123;&#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">   	Heap* hp = Heap::getHeap();</span><br><span class="line">   	<span class="function">Heap <span class="title">hp2</span><span class="params">(*hp)</span></span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">   	<span class="comment">/*Heap* hp = new Heap;</span></span><br><span class="line"><span class="comment">   	Heap hhp;</span></span><br><span class="line"><span class="comment">   	hp-&gt;getHeap();</span></span><br><span class="line"><span class="comment">   	hhp.getHeap();*/</span></span><br><span class="line">       Heap* hp = Heap::getHeap();</span><br><span class="line">   	<span class="function">Heap <span class="title">hp2</span><span class="params">(*hp)</span></span>;<span class="comment">//声明了不写编译器会自动生成</span></span><br><span class="line">   	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h5 id="7-3-请设计一个类，该类只能在栈上创建对象-类似上面"><a href="#7-3-请设计一个类，该类只能在栈上创建对象-类似上面" class="headerlink" title="7.3 请设计一个类，该类只能在栈上创建对象(类似上面)"></a>7.3 请设计一个类，该类只能在栈上创建对象(类似上面)</h5><ul>
<li style="list-style: none"><input type="checkbox"> new 关键字是如何执行的</li>
<li style="list-style: none"><input type="checkbox"> 不能在堆上建造空间</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&#123;</span></span><br><span class="line">      <span class="keyword">public</span>:</span><br><span class="line">      <span class="function"><span class="keyword">static</span>  Stack <span class="title">getStack</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Stack();<span class="comment">//不能返回指针(也不能返回引用)</span></span><br><span class="line">            <span class="comment">//当前函数的返回值，在栈上</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">private</span>:</span><br><span class="line">        <span class="built_in">stack</span>()&#123;  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">statck2</span>&#123;</span></span><br><span class="line">      <span class="comment">///new --&gt; opeator new;</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> *<span class="keyword">operator</span> <span class="title">new</span><span class="params">(<span class="keyword">size_t</span> n)</span></span>=<span class="keyword">delete</span>;</span><br><span class="line">        <span class="comment">//放在公共的申明下，依旧不可调动</span></span><br><span class="line">        <span class="comment">//无法使用，被删除的函数</span></span><br><span class="line">        <span class="keyword">private</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> *<span class="keyword">operator</span> <span class="title">new</span><span class="params">(<span class="keyword">size_t</span> n)</span></span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//Stack *ps=new Stack;//1.开空间 2.构造(已经用delete封死)</span></span><br><span class="line">        Stack s=Stack :: getStack():</span><br><span class="line">        Stack cp(s);  <span class="comment">//  cp在栈上</span></span><br><span class="line">        stack2 ps =<span class="keyword">new</span> stack2;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 只能在栈上创建对象的类</li>
<li style="list-style: none"><input type="checkbox"> new —&gt;operator new –&gt;构造<h6 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h6><blockquote>
<ul>
<li>1.构造函数私有化，间接阻止new 关键字的执行逻辑</li>
<li>2.构造公共接口：在栈上创建对象</li>
<li>3.在类外面无法创建对象，函数用类名调用，公共接口必须为static接口</li>
</ul>
</blockquote>
</li>
</ul>
<h6 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h6><blockquote>
<ul>
<li>1.重载operator new 函数，申明成私有的，并且不实现</li>
<li>2.构造函数公有</li>
</ul>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">匿名对象：</span><br><span class="line">定义对象的两种方式</span><br><span class="line"><span class="number">1.</span>Date d1;</span><br><span class="line"><span class="number">2.</span>Date ();    <span class="comment">//生命周期只是在这一行。</span></span><br></pre></td></tr></table></figure>
<h6 id="单例模式-全局唯一一份"><a href="#单例模式-全局唯一一份" class="headerlink" title="单例模式:全局唯一一份"></a>单例模式:全局唯一一份</h6><h6 id="一个类只能创建一个对象，即单例模式，该模式可以保证系统中该类只有一个实例，并提供一个访问它的全局访问点，该实例被所有程序模块共享"><a href="#一个类只能创建一个对象，即单例模式，该模式可以保证系统中该类只有一个实例，并提供一个访问它的全局访问点，该实例被所有程序模块共享" class="headerlink" title="一个类只能创建一个对象，即单例模式，该模式可以保证系统中该类只有一个实例，并提供一个访问它的全局访问点，该实例被所有程序模块共享"></a>一个类只能创建一个对象，即单例模式，该模式可以保证系统中该类只有一个实例，并提供一个访问它的全局访问点，该实例被所有程序模块共享</h6><ul>
<li><p>[ ] 1.饿汉模式</p>
<blockquote>
<p>缺点： 1.启动比较慢      </p>
<pre><code>2.没有办法控制多个单例模式之间的启动顺序
</code></pre><figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//饿汉模式</span></span><br><span class="line"><span class="comment">//优点：简单</span></span><br><span class="line"><span class="comment">// 缺点：可能会导致进程启动慢，且如果有多个单例类对象实例启动顺序不确定。</span></span><br><span class="line">      <span class="class"><span class="keyword">class</span> <span class="title">singleton</span>&#123;</span></span><br><span class="line">          <span class="keyword">public</span>:</span><br><span class="line">          <span class="function"><span class="keyword">static</span> singlleton* <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">              <span class="keyword">return</span> &amp; _sin;</span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          <span class="comment">//Singleton&amp; GetInstance()&#123;</span></span><br><span class="line">         <span class="comment">// return &amp;_sin;</span></span><br><span class="line">      <span class="comment">//&#125;</span></span><br><span class="line">          <span class="keyword">private</span>:</span><br><span class="line">          singleton()&#123; &#125;</span><br><span class="line">          <span class="comment">//防拷贝</span></span><br><span class="line">          <span class="comment">//singleton (const singlenton &amp;s);//或写成删除函数都可以</span></span><br><span class="line">          singleton (<span class="keyword">const</span> singlenton &amp;s)=<span class="keyword">delete</span>;</span><br><span class="line">          <span class="comment">//singlrton &amp;operator=(const singleton &amp;s);</span></span><br><span class="line">            <span class="keyword">static</span>  singleton _sin;  <span class="comment">//c程序启动前，已经定义好了</span></span><br><span class="line">          <span class="comment">//singleton _sin;//不能如此定义，其会自己调自己。</span></span><br><span class="line">      &#125;;</span><br><span class="line">      </span><br><span class="line">      singleton singleton::_sin;</span><br><span class="line">      </span><br><span class="line">      <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">          singleton *ps=singleton :: getInstance;</span><br><span class="line">          <span class="function">singleton <span class="title">s</span><span class="params">(*ps)</span></span>;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>[ ] 懒汉模式</p>
<blockquote>
<p>如果单例对象构造十分耗时或者占用很多资源，比如加载插件啊， 初始化网络连接啊，读取文件啊等等，而有可能该对象程序运行时不会用到，那么也要在程序一开始就进行初始化，就会导致程序启动时非常的缓慢。 所以这种情况使用懒汉模式（延迟加载）更好.</p>
<p>优点：第一次使用实例对象时，创建对象</p>
<p>缺点：复杂</p>
</blockquote>
</li>
</ul>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">singleton</span>&#123;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span>:</span><br><span class="line">        <span class="function">singleton *<span class="title">getIntance</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(_ps==<span class="literal">nullptr</span>)&#123;</span><br><span class="line">               _ps = <span class="keyword">new</span> singleton; </span><br><span class="line">                <span class="comment">//第一次还没有，现场做</span></span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">return</span> _ps;</span><br><span class="line">            <span class="comment">//第二次以后已经做好了，直接拿去用</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">private</span>:</span><br><span class="line">        singleton()&#123;&#125;</span><br><span class="line">        singleton(<span class="keyword">const</span> singleton&amp; s);<span class="comment">//只声明不是</span></span><br><span class="line">        <span class="keyword">static</span> singleton* _ps;<span class="comment">//全局唯一</span></span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    singleton *singleton ::_ps=<span class="literal">nullptr</span>;</span><br><span class="line">    <span class="comment">//先置空，啥时候需要再给你</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        singleton* ps = singleton :: getIntance();</span><br><span class="line">        singleton *ps2 =singleton :: getIntance();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">//加把锁</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt; </span></span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mutex&gt;</span></span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span></span><br><span class="line"><span class="class">    &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="function"><span class="keyword">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    	</span>&#123;</span><br><span class="line">    		<span class="comment">// double check</span></span><br><span class="line">    		<span class="keyword">if</span> (_ps == <span class="literal">nullptr</span>)</span><br><span class="line">    		&#123;<span class="comment">//双检查</span></span><br><span class="line">    			_mtx.lock();<span class="comment">//加锁</span></span><br><span class="line">    			<span class="keyword">if</span> (_ps == <span class="literal">nullptr</span>)</span><br><span class="line">    			&#123;<span class="comment">//第一次获取对象的时候会加锁</span></span><br><span class="line">    				_ps = <span class="keyword">new</span> Singleton;</span><br><span class="line">    			&#125;</span><br><span class="line">    			_mtx.unlock(); <span class="comment">//解锁</span></span><br><span class="line">    		&#125;</span><br><span class="line">    </span><br><span class="line">    		<span class="keyword">return</span> _ps;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">testSing</span><span class="params">()</span><span class="comment">//多线程</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="built_in">cout</span> &lt;&lt; Singleton::getInstance() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="comment">/*Singleton* ps = Singleton::getInstance();</span></span><br><span class="line"><span class="comment">    	Singleton* ps2 = Singleton::getInstance();</span></span><br><span class="line"><span class="comment">    	int i = 0;</span></span><br><span class="line"><span class="comment">    	i++;*/</span>  </span><br><span class="line">    	<span class="comment">/*fun();           //串行</span></span><br><span class="line"><span class="comment">    	fun();*/</span></span><br><span class="line">    	<span class="comment">/*thread t1(fun);  //并行，同时执行</span></span><br><span class="line"><span class="comment">        thread t2(fun);*/</span></span><br><span class="line">    	<span class="comment">/*testSing();</span></span><br><span class="line"><span class="comment">    	testSing();*/</span></span><br><span class="line">    </span><br><span class="line">    	<span class="function">thread <span class="title">t1</span><span class="params">(testSing)</span></span>;</span><br><span class="line">        <span class="function">thread <span class="title">t2</span><span class="params">(testSing)</span></span>;</span><br><span class="line">    </span><br><span class="line">    	t1.join();   <span class="comment">// 等待</span></span><br><span class="line">    	t2.join();</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//造成无限递归</span></span><br><span class="line">    ~Singleton()&#123;  <span class="comment">//析构函数</span></span><br><span class="line">        <span class="keyword">if</span>(_ps)&#123;</span><br><span class="line">            <span class="keyword">delete</span> _ps; <span class="comment">//无限递归</span></span><br><span class="line">            _ps=nullpte</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//能做到释放空间</span></span><br><span class="line">    ~Singleton()</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="built_in">cout</span> &lt;&lt; <span class="string">"~Singleton()"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    </span><br><span class="line">    	<span class="class"><span class="keyword">class</span> <span class="title">GC</span></span></span><br><span class="line"><span class="class">    	&#123;</span></span><br><span class="line">    	<span class="keyword">public</span>:</span><br><span class="line">    		~GC()</span><br><span class="line">    		&#123;</span><br><span class="line">    			<span class="keyword">if</span> (_ps)</span><br><span class="line">    			&#123;</span><br><span class="line">    				<span class="keyword">delete</span> _ps;</span><br><span class="line">    				_ps = <span class="literal">nullptr</span>;</span><br><span class="line">    			&#125;</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	Singleton* ps = Singleton::getInstance();</span><br><span class="line">    	<span class="comment">//delete ps;//不能这样去释放堆上的空间，造成无限递归</span></span><br><span class="line">        <span class="comment">//调用析构函数，造成栈溢出</span></span><br><span class="line">    	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 实现一个内嵌垃圾回收类 </span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">CGarbo</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  ~CGarbo()&#123;</span><br><span class="line">  <span class="keyword">if</span> (Singleton::m_pInstance)</span><br><span class="line">  <span class="keyword">delete</span> Singleton::m_pInstance;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>多线程：多个人做一份工作(好处可以同时进行多个进程)</p>
<p>单线程：一个人做一份工作</p>
<p>多个线程加把锁</p>
<p>include<mutex></mutex></p>
<p>_mtx.clock();  // 加锁</p>
<p>。。。。。<br>_mtx.unlock();   //解锁<br>加锁的代价 —&gt;<br>多个进程同时进行时，锁只影响第一批进程。<br>static mutex </p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="7-5-内存泄漏（指针丢失）"><a href="#7-5-内存泄漏（指针丢失）" class="headerlink" title="7.5 内存泄漏（指针丢失）"></a>7.5 内存泄漏（指针丢失）</h5><h6 id="7-5-1-什么是内存泄漏"><a href="#7-5-1-什么是内存泄漏" class="headerlink" title="7.5.1 什么是内存泄漏"></a>7.5.1 什么是内存泄漏</h6><blockquote>
<ul>
<li>内存泄漏指因为疏忽或错误造成程序未能释放已经不再使用的内</li>
<li>存的情况。内存泄漏并不是指内存在物理上的消失，而是应用程</li>
<li>序分配某段内存后，因为设计错误，失去了对该段内存的控制，</li>
<li>因而造成了内存的浪费</li>
</ul>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当使用delet时，调用析构函数，导致无限递归</span></span><br><span class="line">    ~singleton()&#123;</span><br><span class="line">        <span class="keyword">if</span>(_ps)&#123;</span><br><span class="line">            <span class="comment">//无限递归，导致栈溢出</span></span><br><span class="line">            <span class="keyword">delete</span> _ps;</span><br><span class="line">            _ps = nulllpter;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//常见的内存泄漏问题有一下两种</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">MemoryLeaks</span><span class="params">()</span></span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line">     <span class="comment">// 1.内存申请了忘记释放</span></span><br><span class="line">     <span class="keyword">int</span>* p1 = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">     <span class="keyword">int</span>* p2 = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">     <span class="comment">// 2.异常安全问题</span></span><br><span class="line">     <span class="keyword">int</span>* p3 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">     Func(); <span class="comment">// 这里Func函数抛异常导致 delete[] p3未执行，p3没被放.</span></span><br><span class="line">        <span class="keyword">delete</span> []p3;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h6 id="7-5-2-内存泄漏的分类"><a href="#7-5-2-内存泄漏的分类" class="headerlink" title="7.5.2 内存泄漏的分类"></a>7.5.2 内存泄漏的分类</h6><blockquote>
<h6 id="C-C-程序中一般我们关心两种方面的内存泄漏："><a href="#C-C-程序中一般我们关心两种方面的内存泄漏：" class="headerlink" title="C/C++程序中一般我们关心两种方面的内存泄漏："></a>C/C++程序中一般我们关心两种方面的内存泄漏：</h6><ol>
<li><h6 id="堆内存泄漏-Heap-leak"><a href="#堆内存泄漏-Heap-leak" class="headerlink" title="堆内存泄漏(Heap leak)"></a>堆内存泄漏(Heap leak)</h6></li>
</ol>
<p>堆内存指的是程序执行中依据须要分配通过malloc / calloc / realloc / new等从堆中分配的一块内存，用完后必须通过调用相应的 free或者delete 删掉。假设程序的设计错误导致这部分内存没有被释放，那么以后这部分空间将无法再被使用，就会产生Heap Leak。</p>
<ol start="2">
<li><h6 id="系统资源泄漏"><a href="#系统资源泄漏" class="headerlink" title="系统资源泄漏"></a>系统资源泄漏</h6></li>
</ol>
<p>指程序使用系统分配的资源，比方套接字、文件描述符、管道等没有使用对应的函数释放掉，导致系统资源的浪费，严重可导致系统效能减少，系统执行不稳定</p>
</blockquote>
<h6 id="7-5-3-如何检测内存泄漏"><a href="#7-5-3-如何检测内存泄漏" class="headerlink" title="7.5.3 如何检测内存泄漏"></a>7.5.3 如何检测内存泄漏</h6><ul>
<li style="list-style: none"><input type="checkbox"> 在linux下内存泄漏检测：linux下几款内存泄漏检测工具，valgrind</li>
<li style="list-style: none"><input type="checkbox"> 在windows下使用第三方工具：VLD工具说明&lt;(windows 自带的)</li>
<li style="list-style: none"><input type="checkbox"> 其他工具：内存泄漏工具比较</li>
</ul>
<h6 id="7-5-4如何避免内存泄漏"><a href="#7-5-4如何避免内存泄漏" class="headerlink" title="7.5.4如何避免内存泄漏"></a>7.5.4如何避免内存泄漏</h6><blockquote>
<ul>
<li>工程前期良好的设计规范，养成良好的编码规范，申请的内存空间记着匹配的去释放。ps：这个理想状</li>
<li>态。但是如果碰上异常时，就算注意释放了，还是可能会出问题。需要下一条智能指针来管理才有保证。</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>泄露的空间是虚拟空间，不会对电脑造成伤害。进程结束后，系统内存会被返还。</li>
<li>在嵌入式的设备里面会对系统造成影响</li>
</ul>
</blockquote>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 采用RAII思想或者智能指针来管理资源。</span></span><br><span class="line">      <span class="function"><span class="keyword">void</span> <span class="title">MemoryLeaks</span><span class="params">()</span></span></span><br><span class="line"><span class="function">       </span>&#123;</span><br><span class="line">       <span class="comment">// 1.内存申请了忘记释放</span></span><br><span class="line">       <span class="keyword">int</span>* p1 = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">       <span class="keyword">int</span>* p2 = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">// 2.异常安全问题</span></span><br><span class="line">   </span><br><span class="line">    <span class="keyword">int</span>* p3 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">   </span><br><span class="line">    Func(); <span class="comment">// 这里Func函数抛异常导致 delete[] p3未执行，p3没被释放.</span></span><br><span class="line">   </span><br><span class="line">    <span class="keyword">delete</span>[] p3;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>有些公司内部规范使用内部实现的私有内存管理库。这套库自带内存泄漏检测的功能选项。</li>
<li>出问题了使用内存泄漏工具检测。ps：不过很多工具都不够靠谱，或者收费昂贵。</li>
</ul>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> 总结一下:<blockquote>
<ul>
<li>内存泄漏非常常见，解决方案分为两种：</li>
<li>1、事前预防型。如智能指针等。</li>
<li>2、事后查错型。如泄漏检测工具。</li>
</ul>
</blockquote>
</li>
</ul>
<p>7.6 如何一次在堆上申请4G的内存</p>
<figure class="highlight c"><figcaption><span>++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将程序编译成x64的进程，运行下面的程序试试？</span></span><br><span class="line">  <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line">  <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">   <span class="keyword">void</span>* p = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">0xffffffff</span>ul];</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"new:"</span> &lt;&lt; p &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/14/C++ 类与对象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/14/C++ 类与对象/" class="post-title-link" itemprop="url">C ++ 类与对象</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-14 23:18:39" itemprop="dateCreated datePublished" datetime="2019-03-14T23:18:39+08:00">2019-03-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Editado el</span>
                
                <time title="Modificado por: 2019-04-02 20:11:13" itemprop="dateModified" datetime="2019-04-02T20:11:13+08:00">2019-04-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">48k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">44 minutos.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-类的引入"><a href="#1-类的引入" class="headerlink" title="1.类的引入"></a>1.类的引入</h4><h5 id="1-1-c语言中对结构体的引用"><a href="#1-1-c语言中对结构体的引用" class="headerlink" title="1.1 c语言中对结构体的引用"></a>1.1 c语言中对结构体的引用</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">next</span>;</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">prev</span>;</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类型：struct ListNode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//c++兼容c语言</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> <span class="title">node</span>;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="1-2-c-中也可以编过"><a href="#1-2-c-中也可以编过" class="headerlink" title="1.2 c++中也可以编过"></a>1.2 c++中也可以编过</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> data;</span><br><span class="line"></span><br><span class="line">   ListNode* next;</span><br><span class="line"></span><br><span class="line">   ListNode* prev;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//两个程序中的不同引用方式</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类型：struct ListNode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//c++兼容c语言</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> <span class="title">node</span>;</span></span><br><span class="line"></span><br><span class="line">  system(<span class="string">"pause"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="1-3-struct的双重身份"><a href="#1-3-struct的双重身份" class="headerlink" title="1.3 struct的双重身份"></a>1.3 struct的双重身份</h5><ul>
<li style="list-style: none"><input type="checkbox"> 1.3.1 c语言中表示结构体。                 类型：struct ListNode  </li>
</ul>
<ul>
<li style="list-style: none"><input type="checkbox"> 1.3.2 C++中升级成了类。类型：ListNode ，   struct 为关键字，而</li>
<li style="list-style: none"><input type="checkbox"> LIstnode为类名,就可以当作类型</li>
<li><p>[ ] struct 类里面既可以定义变量，也可以定义函数.</p>
</li>
<li><p>[ ] struct 与 class的区别是啥？</p>
</li>
<li style="list-style: none"><input type="checkbox"> struct 在c语言阶段就是一个结构体，而在c++中做为类存在。</li>
<li style="list-style: none"><input type="checkbox"> class在c++中就是一个类，</li>
<li style="list-style: none"><input type="checkbox"> 两者做为类在c++中的区别是什么？</li>
<li style="list-style: none"><input type="checkbox"> struct 是公有的，class 是私有的</li>
</ul>
<h4 id="2-类的定义"><a href="#2-类的定义" class="headerlink" title="2.类的定义"></a>2.类的定义</h4><h5 id="2-1-类的定义方式："><a href="#2-1-类的定义方式：" class="headerlink" title="2.1 类的定义方式："></a>2.1 类的定义方式：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">classname</span>&#123;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//类体由成员变量和成员函数组成</span></span><br><span class="line"></span><br><span class="line">    &#125;;  <span class="comment">//一定要注意后面的分号</span></span><br><span class="line"><span class="comment">//class  为关键字，classname 为类的名字 ，&#123;&#125;中的类为主体，注意类定义结束时后面的分号。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类中的元素称为类的成员：类的数据称为类的属性或者成员变量；类中的函数称为类的方法或者成员函数</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-类的两种定义方式"><a href="#2-2-类的两种定义方式" class="headerlink" title="2.2 类的两种定义方式"></a>2.2 类的两种定义方式</h5><h6 id="2-2-1-声明和定义全都放到类体中"><a href="#2-2-1-声明和定义全都放到类体中" class="headerlink" title="2.2.1 :  声明和定义全都放到类体中"></a>2.2.1 :  声明和定义全都放到类体中</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">	       <span class="comment">//成员函数</span></span><br><span class="line">	        <span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">	    &#125;</span><br><span class="line">	       <span class="comment">//成员变量</span></span><br><span class="line">	      <span class="keyword">int</span> a;</span><br><span class="line">	      <span class="keyword">int</span> b;</span><br><span class="line">	      <span class="keyword">int</span>  c;</span><br><span class="line">       &#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>需要注意的是：成员函数如果在类中定义，编译器可能会将</li>
<li>其当成内联函数处理</li>
</ul>
</blockquote>
<p><img src="https://wx3.sinaimg.cn/mw690/0071OE7sly1g19gea3dvaj30iv0dgta0.jpg" alt></p>
<h6 id="2-2-1-1-；声明和定义全都放到类体中"><a href="#2-2-1-1-；声明和定义全都放到类体中" class="headerlink" title="2.2.1.1 ；声明和定义全都放到类体中"></a>2.2.1.1 ；声明和定义全都放到类体中</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">         <span class="comment">//成员函数</span></span><br><span class="line">          <span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">         <span class="comment">//成员变量</span></span><br><span class="line">        <span class="keyword">int</span> a;</span><br><span class="line">        <span class="keyword">int</span> b;</span><br><span class="line">        <span class="keyword">int</span>  c;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<h6 id="2-2-1-2-在类里面声明在外定义"><a href="#2-2-1-2-在类里面声明在外定义" class="headerlink" title="2.2.1.2 :在类里面声明在外定义"></a>2.2.1.2 :在类里面声明在外定义</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">     <span class="keyword">void</span> B::fun()&#123;</span><br><span class="line">       <span class="comment">//::作用域限定符</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<h6 id="2-2-2-声明在-h中，类的定义在-cpp中"><a href="#2-2-2-声明在-h中，类的定义在-cpp中" class="headerlink" title="2.2.2:声明在.h中，类的定义在.cpp中"></a>2.2.2:声明在.h中，类的定义在.cpp中</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//b.h</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">B</span>&#123;</span></span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span> </span>;</span><br><span class="line"> &#125;;</span><br><span class="line"> <span class="comment">//b.cpp  #include "p.h"</span></span><br><span class="line"> <span class="keyword">void</span> B::fun()&#123;</span><br><span class="line"> <span class="comment">//::作用域解析符</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://wx1.sinaimg.cn/mw690/0071OE7sly1g19gmh105tj30ku08rmza.jpg" alt></p>
<h4 id="3-类的访问限定符及封装"><a href="#3-类的访问限定符及封装" class="headerlink" title="3.类的访问限定符及封装"></a>3.类的访问限定符及封装</h4><h5 id="3-1-访问限定符"><a href="#3-1-访问限定符" class="headerlink" title="3.1 访问限定符"></a>3.1 访问限定符</h5><blockquote>
<ul>
<li>C++实现封装的方式：用类将对象的属性与方法结合在一</li>
<li>块，让对象更加完善，通过访问权限选择性的将其</li>
<li>接口提供给外部的用户使用。</li>
</ul>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> <strong><em>访问限定符； 1.public(公有)   2.protected(保护)  3.private (私有)</em></strong></li>
</ul>
<p>​  </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">     <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">//公有成员函数</span></span><br><span class="line">         <span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">private</span>:</span><br><span class="line">        <span class="comment">//私有成员变量</span></span><br><span class="line">       <span class="keyword">int</span> a;</span><br><span class="line">       <span class="keyword">int</span> b;</span><br><span class="line">       <span class="keyword">int</span>  c;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">     A x;</span><br><span class="line">     x.fun(); <span class="comment">//可以访问到</span></span><br><span class="line">     x.b;<span class="comment">//访问不到b</span></span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>被访问限定符修饰的变量或函数在类里面是通用的，在类外</li>
<li>面private 修饰的变量或者函数在类外面不可以访问。</li>
<li>私有限定的是你不能类外面修改类内部的东西，而在类内部可修改</li>
</ul>
</blockquote>
<p><img src="https://wx2.sinaimg.cn/mw690/0071OE7sly1g19h5fmlc8j30jk08l3z5.jpg" alt></p>
<h6 id="【访问限定符说明】"><a href="#【访问限定符说明】" class="headerlink" title="【访问限定符说明】"></a>【访问限定符说明】</h6><hr>
<ol>
<li>public 修饰的成员在类外可以直接被访问</li>
</ol>
<p>​   2. protected 和 private 修饰的成员在类外不能直接被访问(此处                protected 和 private 是类似的)</p>
<ol start="3">
<li>访问权限作用域从该访问限定符出现的位置开始直到下一个访问限定符出现时为止</li>
<li>​ class的默认访问权限为 private ， struct 为 public(因为struct要兼容C)</li>
</ol>
<hr>
<blockquote>
<ul>
<li><p>注意：访问限定符只在编译时有用，当数据映射到内存后，</p>
</li>
<li><p>没有任何访问限定符上的区别</p>
</li>
<li><p>而 struct 定义的变量还是函数都是公有的，但  class 类中</p>
</li>
<li><p>由公有的也有私有的</p>
</li>
</ul>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SeqList</span>&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PopBack</span><span class="params">()</span></span>;<span class="comment">//默认是私有的</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PushBack</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">        ++size;   <span class="comment">//操作可以正确运行，</span></span><br><span class="line">        <span class="comment">//原因是访问限定符限制的类的外面，不限制类的里面</span></span><br><span class="line">    &#125; <span class="comment">//将x 插到SeqList这个类中去</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> *a;</span><br><span class="line">    <span class="keyword">size_t</span> size;</span><br><span class="line">    <span class="keyword">szie_t</span> capacity;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SeqList s; <span class="comment">//s叫做对象</span></span><br><span class="line">    s.PushBack(<span class="number">1</span>);<span class="comment">//把一插入到SeqList这个顺序表中</span></span><br><span class="line">    <span class="comment">//s.size++;//语句错误，size 为私有成员</span></span><br><span class="line">   <span class="comment">//S.PopBack() //私有成员不可以访问</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="【面试题】"><a href="#【面试题】" class="headerlink" title="【面试题】"></a>【面试题】</h6><ul>
<li style="list-style: none"><input type="checkbox"> 问题：C++中struct和class的区别是什么？</li>
</ul>
<blockquote>
<p> 解答：C++需要兼容C语言，所以C++中struct可以当成结构体去使用。另外C++中struct还可以用来定义类。和class是定义类是一样的，区别是struct的成员默认访问方式是public，class是struct的成员默认访问方式是private。</p>
</blockquote>
<h5 id="3-2-封装"><a href="#3-2-封装" class="headerlink" title="3.2 封装"></a>3.2 封装</h5><h6 id="3-2-1-【面试题】-面向对象的三大特性：封装、继承、多态。"><a href="#3-2-1-【面试题】-面向对象的三大特性：封装、继承、多态。" class="headerlink" title="3.2.1 【面试题】 面向对象的三大特性：封装、继承、多态。"></a>3.2.1 【面试题】 面向对象的三大特性：封装、继承、多态。</h6><blockquote>
<p>分装就是为了管理</p>
</blockquote>
<ul>
<li><p>[ ]  ​在类和对象阶段，我们只研究类的封装特性，那什么是封装呢？</p>
<blockquote>
<p>封装：将数据和操作数据的方法进行有机结合，隐藏对象的属性和实现细节，仅对外公开接口来和对象进行交互。</p>
</blockquote>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//封装</span></span><br><span class="line"><span class="comment">//C语言的结构体</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SeqList</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> *a;</span><br><span class="line">    <span class="keyword">size_t</span> size;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushBack</span><span class="params">(struct SeqList *ptr,<span class="keyword">int</span> x)</span><span class="comment">//将插到struct SeqList中</span></span></span><br><span class="line"><span class="function"><span class="comment">//c++中</span></span></span><br><span class="line"><span class="function">class SeqList</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PushBack</span><span class="params">(<span class="keyword">int</span> x)</span></span>;   <span class="comment">//将x 插到SeqList这个类中去</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> *a;</span><br><span class="line">    <span class="keyword">size_t</span> size;</span><br><span class="line">    <span class="keyword">szie_t</span> capacity;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="3-2-2-封装本质上是一种管理"><a href="#3-2-2-封装本质上是一种管理" class="headerlink" title="3.2.2 封装本质上是一种管理."></a>3.2.2 封装本质上是一种管理.</h6><h4 id="4-类的作用域"><a href="#4-类的作用域" class="headerlink" title="4.类的作用域"></a>4.类的作用域</h4><h5 id="4-1-类定义了一个新的作用域，类的所有成员都在类的作用域中。"><a href="#4-1-类定义了一个新的作用域，类的所有成员都在类的作用域中。" class="headerlink" title="4.1:类定义了一个新的作用域，类的所有成员都在类的作用域中。"></a>4.1:类定义了一个新的作用域，类的所有成员都在类的作用域中。</h5><blockquote>
<ul>
<li>在类体外定义成员，需要使用 :: 作用域解析符指明成员属于哪个类域。</li>
</ul>
</blockquote>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">PrintPersonInfo</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="keyword">char</span> _name[<span class="number">20</span>];</span><br><span class="line"><span class="keyword">char</span> _gender[<span class="number">3</span>];</span><br><span class="line"><span class="keyword">int</span> _age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 这里需要指定PrintPersonInfo是属于Person这个类域</span></span><br><span class="line"><span class="keyword">void</span> Person::PrintPersonInfo()&#123;</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;name&lt;&lt;<span class="string">" "</span>gender&lt;&lt;<span class="string">" "</span>&lt;&lt;_age&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-类的实例化"><a href="#5-类的实例化" class="headerlink" title="5.类的实例化"></a>5.类的实例化</h4><ul>
<li style="list-style: none"><input type="checkbox"> 用类类型创建对象的过程，称为类的实例化</li>
</ul>
<ol>
<li>类只是一个模型一样的东西，限定了类有哪些成员，定义出一个类并没有分配实际的内存空间来存储它</li>
<li>一个类可以实例化出多个对象，实例化出的对象 占用实际的物理空间，存储类成员变量</li>
<li>做个比方。类实例化出对象就像现实中使用建筑设计图建造出房子，类就像是设计图，只设计出需要什么东西，但是并没有实体的建筑存在，同样类也只是一个设计，实例化出的对象才能实际存储数据，占用物理空间类在计算机当中不占内存，只有来定义的对象才占内存</li>
</ol>
<blockquote>
<p> int a;   int—&gt;变量类型        a—-&gt;int 类型的变量</p>
</blockquote>
<blockquote>
<p>class A( 楼房的设计图纸 )</p>
</blockquote>
<blockquote>
<p>A    ra   A —&gt;类型    ra—&gt;  A类型的变量  —&gt;类的对象(按照图纸建造的房子)</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SeqList</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PushBack</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//类内部的申明</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> *_a;        <span class="comment">//声明</span></span><br><span class="line">    <span class="keyword">size_t</span> size;</span><br><span class="line">    <span class="keyword">size_t</span> capacity;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">void</span> SeqList::PushBack(<span class="keyword">int</span> x)<span class="comment">//定义</span></span><br><span class="line">     </span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">     SeqList s;<span class="comment">//现在才被定义出来</span></span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;<span class="keyword">sizeof</span>(SeqList)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//结果为12</span></span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明只是告诉说明它的类型与名称</span></span><br><span class="line"><span class="comment">//定义是将声明的东西创建出来</span></span><br></pre></td></tr></table></figure>
<p><img src="https://wx4.sinaimg.cn/mw690/0071OE7sly1g19i8zf8fjj30i70azq4k.jpg" alt></p>
<blockquote>
<p>拿着Person这个类定义man 这个对象</p>
</blockquote>
<h4 id="6-类对象模型"><a href="#6-类对象模型" class="headerlink" title="6.类对象模型"></a>6.类对象模型</h4><blockquote>
<ul>
<li>结论：一个类的大小，实际就是该类中”成员变量”之和，当</li>
<li>然也要进行内存对齐，注意空类的大小，空类比较特殊，编</li>
<li>译器给了空类一个字节来唯一标识这个类。</li>
</ul>
</blockquote>
<h4 id="7-结构体内存对齐的规则"><a href="#7-结构体内存对齐的规则" class="headerlink" title="7.结构体内存对齐的规则"></a>7.结构体内存对齐的规则</h4><h4 id="7-1如何计算类对象的大小"><a href="#7-1如何计算类对象的大小" class="headerlink" title="7.1如何计算类对象的大小"></a>7.1如何计算类对象的大小</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="keyword">void</span> PrintA</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;_a&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">char</span> _a;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>问题：类中既可以有成员变量，又可以有成员函数，那么一个类的对象中包含了什么？如何计算一个类的大小</p>
</blockquote>
<h4 id="7-2-类对象的存储方式猜测"><a href="#7-2-类对象的存储方式猜测" class="headerlink" title="7.2 类对象的存储方式猜测"></a>7.2 类对象的存储方式猜测</h4><h5 id="7-2-1对象中包含类的各个成员"><a href="#7-2-1对象中包含类的各个成员" class="headerlink" title="7.2.1对象中包含类的各个成员"></a>7.2.1对象中包含类的各个成员</h5><p><img src="https://wx4.sinaimg.cn/mw690/0071OE7sly1g19in9n1dzj30qb0fvtbs.jpg" alt></p>
<h5 id="7-2-2-只保存成员变量，成员函数存放在公共的代码段"><a href="#7-2-2-只保存成员变量，成员函数存放在公共的代码段" class="headerlink" title="7.2.2:只保存成员变量，成员函数存放在公共的代码段"></a>7.2.2:只保存成员变量，成员函数存放在公共的代码段</h5><p><img src="https://wx1.sinaimg.cn/mw690/0071OE7sly1g19iondqi9j30lw0is41f.jpg" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类中既有成员变量，又有成员函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A1</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">f1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="keyword">int</span> _a;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 类中仅有成员函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A2</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">f2</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;<span class="comment">//大小为1，不存储数据，占位，表示对象存在过</span></span><br><span class="line"><span class="comment">// 类中什么都没有---空类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A3</span></span></span><br><span class="line"><span class="class">&#123;</span>&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>sizeof(A1) : <strong>_4_</strong> sizeof(A2) : <strong>_1_</strong> sizeof(A3) : <strong>_1_</strong><br>结论：一个类的大小，实际就是该类中”成员变量”之和，当然也要进行内存对齐，注意空类的大小，空类比较特殊，编译器给了空类一个字节来唯一标识这个类。</p>
</blockquote>
<h4 id="7-3-内存对齐"><a href="#7-3-内存对齐" class="headerlink" title="7.3 内存对齐"></a>7.3 内存对齐</h4><h6 id="7-3-1-第一个成员在与结构体偏移量为0的地址处。"><a href="#7-3-1-第一个成员在与结构体偏移量为0的地址处。" class="headerlink" title="7.3.1. 第一个成员在与结构体偏移量为0的地址处。"></a>7.3.1. 第一个成员在与结构体偏移量为0的地址处。</h6><h6 id="7-3-2-其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。"><a href="#7-3-2-其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。" class="headerlink" title="7.3.2. 其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。"></a>7.3.2. 其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。</h6><ul>
<li style="list-style: none"><input type="checkbox"> 注意：对齐数 = 编译器默认的一个对齐数 与 该成员大小的较小值。VS中默认的对齐数为8，gcc中的对齐数为4</li>
</ul>
<h6 id="7-3-3-结构体总大小为：最大对齐数（所有变量类型最大者与默认对齐参数取最小）的整数倍。"><a href="#7-3-3-结构体总大小为：最大对齐数（所有变量类型最大者与默认对齐参数取最小）的整数倍。" class="headerlink" title="7.3.3. 结构体总大小为：最大对齐数（所有变量类型最大者与默认对齐参数取最小）的整数倍。"></a>7.3.3. 结构体总大小为：最大对齐数（所有变量类型最大者与默认对齐参数取最小）的整数倍。</h6><h6 id="7-3-4-如果嵌套了结构体的情况，嵌套的结构体对齐到自己的最大对齐数的整数倍处，"><a href="#7-3-4-如果嵌套了结构体的情况，嵌套的结构体对齐到自己的最大对齐数的整数倍处，" class="headerlink" title="7.3.4. 如果嵌套了结构体的情况，嵌套的结构体对齐到自己的最大对齐数的整数倍处，"></a>7.3.4. 如果嵌套了结构体的情况，嵌套的结构体对齐到自己的最大对齐数的整数倍处，</h6><blockquote>
<ul>
<li>结构体的整体大小就是所有最大对齐数（含嵌套结构体的对齐数）的整数倍。</li>
</ul>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A1</span>&#123;</span></span><br><span class="line">	<span class="keyword">char</span> _ch;</span><br><span class="line">	<span class="keyword">double</span> _d;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A2</span>&#123;</span></span><br><span class="line">	<span class="keyword">double</span> _d;</span><br><span class="line">	<span class="keyword">char</span> _ch;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"A1的大小="</span>&lt;&lt;<span class="keyword">sizeof</span>(A1) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"A2的大小="</span> &lt;&lt; <span class="keyword">sizeof</span>(A2) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://wx1.sinaimg.cn/mw690/0071OE7sly1g19j8w3dv0j30kb0bfdg2.jpg" alt></p>
<h4 id="8-this指针"><a href="#8-this指针" class="headerlink" title="8.this指针"></a>8.this指针</h4><h5 id="8-1-this指针的引出"><a href="#8-1-this指针的引出" class="headerlink" title="8.1 this指针的引出"></a>8.1 this指针的引出</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; _year &lt;&lt; <span class="string">"-"</span> &lt;&lt; _month &lt;&lt; <span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">SetDate</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span></span>&#123;</span><br><span class="line">    <span class="comment">//构造的函数类似于买门票才能看到兵马用内部的东西</span></span><br><span class="line">      <span class="comment">//公有函数提供了访问内部成员的机会</span></span><br><span class="line">    _year = year;   <span class="comment">// 加上"_"可以避免冲突</span></span><br><span class="line">    _month = month;</span><br><span class="line">    _day = day;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="comment">//类似与兵马俑里面的展品。</span></span><br><span class="line">  <span class="keyword">int</span> _year;</span><br><span class="line">  <span class="keyword">int</span> _month;</span><br><span class="line">  <span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  Date d1;</span><br><span class="line">  Date d2;</span><br><span class="line">    </span><br><span class="line">  d1.SetDate(<span class="number">2019</span>, <span class="number">3</span>, <span class="number">9</span>); </span><br><span class="line">  d2.SetDate(<span class="number">2018</span>,<span class="number">3</span>,<span class="number">9</span>);</span><br><span class="line">    </span><br><span class="line">  d1.Print();<span class="comment">//如何识别打印那个对象对应的日期--&gt;引出this指针</span></span><br><span class="line">  d2.Print();<span class="comment">//如何识别打印那个对象对应的日期</span></span><br><span class="line">    <span class="comment">//this指针隐含在形参的首位，把d2的地址传给对应函数Print</span></span><br><span class="line">  system(<span class="string">"pause"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="8-2-解释"><a href="#8-2-解释" class="headerlink" title="8.2 解释"></a>8.2 解释</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//经过改造编译器后</span></span><br><span class="line">     d1.Print(); ===&gt;d1.Print(&amp;d1);</span><br><span class="line">     d2.Print();====&gt;d2.Print(&amp;d2);</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>&#123;  \\ 改造后() 中间加入了 Date* <span class="keyword">this</span></span><br><span class="line">             <span class="built_in">cout</span> &lt;&lt; _year &lt;&lt; <span class="string">"-"</span> &lt;&lt; _month &lt;&lt; <span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="comment">//这一句中语句变成了  </span></span><br><span class="line">                year ==&gt;<span class="keyword">this</span>-&gt;year </span><br><span class="line">                month ==&gt;<span class="keyword">this</span>-&gt;month</span><br><span class="line">                day ===&gt; <span class="keyword">this</span> -&gt;day        </span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//此时d1.Print(&amp;d1) 或者 d2.Print(&amp;d2); 谁调用 Print 函数 this  指针就指向谁；</span></span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> this 指针类似于形参，谁调用就指向谁。</li>
<li style="list-style: none"><input type="checkbox"> 所以其存储在栈上,且其可以为空。</li>
</ul>
<p><img src="https://wx3.sinaimg.cn/mw690/0071OE7sly1g19jxmknqhj30kq07qt9p.jpg" alt></p>
<ul>
<li style="list-style: none"><input type="checkbox"> 是否可以为空，面试题</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span></span>&#123;<span class="comment">//此处this传过来的地址为空时不影响该函数的输出</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Date::Func()"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>&#123;  <span class="comment">//此处this传过来的地址为空时this-&gt;_year出错</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; _year &lt;&lt; <span class="string">"-"</span> &lt;&lt; _month &lt;&lt; <span class="string">"-"</span> &lt;&lt; _day &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// cout &lt;&lt;this-&gt; _year &lt;&lt; "-" &lt;&lt; _month &lt;&lt; "-" &lt;&lt; _day &lt;&lt; endl;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="comment">//类似与兵马俑里面的展品。</span></span><br><span class="line">  <span class="keyword">int</span> _year;</span><br><span class="line">  <span class="keyword">int</span> _month;</span><br><span class="line">  <span class="keyword">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  Date* p1 = <span class="literal">NULL</span>;<span class="comment">//此处为空，this解引用没有访问，可以运行</span></span><br><span class="line">  p1-&gt;Func(); <span class="comment">//this指针隐含在形参的首位，把p1的地址传给对应函数</span></span><br><span class="line">  Date* p2 = <span class="literal">NULL</span>;<span class="comment">//此处为空，解引用this 时，</span></span><br><span class="line">    <span class="comment">//this为空不能被访问，程序奔溃</span></span><br><span class="line">  p2-&gt;Print();</span><br><span class="line">  system(<span class="string">"pause"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//内存访问是按最大对齐数整数倍访问的</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>即：C++编译器给每个“成员函数“增加了一个隐藏的指针参数，让该指针指向当前对象(函数运行时调用该函数的对象)，在函数体中所有成员变量的操作，都是通过该指针去访问。只不过所有的操作对用户是透明的，即用户不需要来传递，编译器自动完成。</p>
</blockquote>
<h5 id="8-3-this指针的特性"><a href="#8-3-this指针的特性" class="headerlink" title="8.3 this指针的特性"></a>8.3 this指针的特性</h5><ul>
<li style="list-style: none"><input type="checkbox"> 8.3.1. this指针的类型：类型* const</li>
<li style="list-style: none"><input type="checkbox"> 8.3.2. 只能在“成员函数”的内部使用</li>
<li style="list-style: none"><input type="checkbox"> 8.3.3. this指针本质上其实是一个成员函数的形参，是对象调用成员函数时，</li>
<li style="list-style: none"><input type="checkbox"> 将对象地址作为实参传递给this形参。所以对象中不存储this指针。</li>
<li style="list-style: none"><input type="checkbox"> 8.3.4. this指针是成员函数第一个隐含的指针形参，一般情况由编译器通过</li>
<li style="list-style: none"><input type="checkbox"> ecx寄存器自动传递，不需要用户传递</li>
<li style="list-style: none"><input type="checkbox"> this 指针可以为空</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jack-wang128801.github.io/2019/03/14/c 语言版-数据结构(顺序表)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jack-wang128801">
      <meta itemprop="description" content="Yes,I can.">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jack-wang's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/14/c 语言版-数据结构(顺序表)/" class="post-title-link" itemprop="url">数据结构</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-03-14 08:18:51" itemprop="dateCreated datePublished" datetime="2019-03-14T08:18:51+08:00">2019-03-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Editado el</span>
                
                <time title="Modificado por: 2019-03-21 20:44:27" itemprop="dateModified" datetime="2019-03-21T20:44:27+08:00">2019-03-21</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">En</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Cantidad de caracteres en el articulo: </span>
                
                <span title="Cantidad de caracteres en el articulo">63k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Tiempo de lectura &asymp;</span>
                
                <span title="Tiempo de lectura">57 minutos.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="顺序表"><a href="#顺序表" class="headerlink" title="顺序表"></a>顺序表</h2><h4 id="一：前言-初步认识"><a href="#一：前言-初步认识" class="headerlink" title="一：前言(初步认识)"></a>一：前言(初步认识)</h4><blockquote>
<ul>
<li>1.1   顺序表概念<pre><code>顺序表是用一段物理地址连续的存储单元依次存储数据元素的线性结构，一般情况下采用 **数组** 存储。在数组上完成数据的增删查改。     
</code></pre></li>
<li>1.2 顺序表一般可以分为：<br>a. 静态顺序表：使用定长数组存储。<br> b. 动态顺序表：使用动态开辟的数组存储。</li>
</ul>
</blockquote>
<h4 id="二：代码实现"><a href="#二：代码实现" class="headerlink" title="二：代码实现"></a>二：代码实现</h4><h5 id="A-顺序表的两种定义方式"><a href="#A-顺序表的两种定义方式" class="headerlink" title="A:顺序表的两种定义方式"></a>A:顺序表的两种定义方式</h5><p>首先定义一个全局变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> SDataType;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>a.定义静态存储结构</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SeqList</span>&#123;</span> </span><br><span class="line">	<span class="comment">//静态顺序表定义</span></span><br><span class="line">	<span class="keyword">int</span> <span class="built_in">array</span>[<span class="number">100</span>];    <span class="comment">// 能存 100 个数的静态顺序表</span></span><br><span class="line">	<span class="keyword">int</span> size;          <span class="comment">//当前顺序表中存放的数，顺序表为空size=0</span></span><br><span class="line">	                   <span class="comment">//顺便表示了即将插入的下标</span></span><br><span class="line">&#125;   Seqlist;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>b.定义动态存储结构</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SeqList</span>&#123;</span></span><br><span class="line">	<span class="comment">//动态顺序表定义</span></span><br><span class="line">	SDataType  *<span class="built_in">array</span>;</span><br><span class="line">	<span class="keyword">int</span> size; <span class="comment">//当前顺序表中存放的数，顺序表为空size=0，当顺序表不为空是表示数据中元素的下标    </span></span><br><span class="line">	<span class="keyword">int</span> capacity;  <span class="comment">//顺序表的容量</span></span><br><span class="line">&#125;   SeqList;</span><br></pre></td></tr></table></figure>
<h5 id="B：顺序表的初始化与销毁"><a href="#B：顺序表的初始化与销毁" class="headerlink" title="B：顺序表的初始化与销毁"></a>B：顺序表的初始化与销毁</h5><h6 id="a-初始化"><a href="#a-初始化" class="headerlink" title="a:初始化"></a>a:初始化</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListInit</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> capacity)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span> = (SDataType*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SDataType)*capacity);</span><br><span class="line">	seqlist-&gt;size = <span class="number">0</span>;</span><br><span class="line">	seqlist-&gt;capacity = capacity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> 首先需要申请空间，而参数中的 capacity  指的是你在初始化时所需要的空间大小。</li>
</ul>
</blockquote>
<h6 id="b-销毁建立的顺序表"><a href="#b-销毁建立的顺序表" class="headerlink" title="b:销毁建立的顺序表"></a>b:销毁建立的顺序表</h6><ul>
<li style="list-style: none"><input type="checkbox"> 代码</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListDestroy</span><span class="params">(SeqList *seqlist)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span> = <span class="literal">NULL</span>;</span><br><span class="line">	seqlist-&gt;size = <span class="number">0</span>;</span><br><span class="line">	seqlist-&gt;capacity = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">free</span>(seqlist-&gt;<span class="built_in">array</span>);     <span class="comment">//重点</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 辅助理解<blockquote>
<ul>
<li>在销毁时只需要将指向定义数组的指针设置为空(而非将顺序表中的元素一个一个的往掉删除)，并且将记录顺序表中元素数量的 size 置为 </li>
<li>将申请的空间释放。(必须释放，不然会造成内存泄漏)</li>
</ul>
</blockquote>
<h5 id="C：增-往顺序表中添加元素"><a href="#C：增-往顺序表中添加元素" class="headerlink" title="C：增(往顺序表中添加元素)"></a>C：增(往顺序表中添加元素)</h5><h6 id="a-头插"><a href="#a-头插" class="headerlink" title="a:头插"></a>a:头插</h6></li>
<li style="list-style: none"><input type="checkbox"> 代码</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//头插</span></span><br><span class="line"><span class="comment">//1.从后往前搬，避免覆盖</span></span><br><span class="line"><span class="comment">//2.写循环</span></span><br><span class="line"><span class="comment">//       先确定循环的边界</span></span><br><span class="line"><span class="comment">//       i 空间下标[size,0)</span></span><br><span class="line"><span class="comment">//       i 数据下标[size-1,0]</span></span><br><span class="line"><span class="comment">//3. 搬移  </span></span><br><span class="line"><span class="comment">//    i对应空间下标：    array[i]=array[i-1];</span></span><br><span class="line"><span class="comment">//    i对应数据下标：    array[i+1]=array[i];</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPushFront</span><span class="params">(SeqList *seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = seqlist-&gt;size ; i &gt; <span class="number">0</span>; i--)&#123;   <span class="comment">//做数据的搬移，i代表空间下标</span></span><br><span class="line">		seqlist-&gt;<span class="built_in">array</span>[i] = seqlist-&gt;<span class="built_in">array</span>[i - <span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span>[<span class="number">0</span>] = value;</span><br><span class="line">	seqlist-&gt;size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 辅助理解<blockquote>
<ul>
<li>在进行头插运算时，需要考虑将原来顺序表中的元素从最后一位开始往后挪动一位，防止数据的丢失。</li>
<li>(若从第一位开始挪动，则会造成数的丢失。当打印时打印出来的顺序表元素全都是一个数字)</li>
</ul>
</blockquote>
</li>
</ul>
<ul>
<li style="list-style: none"><input type="checkbox"> 如下例中将value插入数组首地址时，应按顺序将数组中的元素往后移，然后再家将value的值插入。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20190314142318278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tfd2FuZzEyODgwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h6 id="b-尾插"><a href="#b-尾插" class="headerlink" title="b:尾插"></a>b:尾插</h6><ul>
<li style="list-style: none"><input type="checkbox"> 代码</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPushBack</span><span class="params">(SeqList *seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	CheckCapccity(seqlist);</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span>[seqlist-&gt;size] = value;</span><br><span class="line">	seqlist-&gt;size++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//尾插时直接将 value 的值插入到顺序表的最后一位即可。</span></span><br></pre></td></tr></table></figure>
<h6 id="c-从指定的位置-position-处插入value"><a href="#c-从指定的位置-position-处插入value" class="headerlink" title="c: 从指定的位置 (position)处插入value"></a>c: 从指定的位置 (position)处插入value</h6><ul>
<li style="list-style: none"><input type="checkbox"> 代码示例</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListInsert</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> pos, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line">	assert(pos &gt;= <span class="number">0</span> &amp;&amp; pos &lt;= seqlist-&gt;size);  <span class="comment">//检查要插入的位置是否合法</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = seqlist-&gt;size - <span class="number">1</span>; i &gt;= pos; i--)&#123; </span><br><span class="line">		seqlist-&gt;<span class="built_in">array</span>[i+<span class="number">1</span>] = seqlist-&gt;<span class="built_in">array</span>[i];</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//做数组搬移，将pos位置往后的元素按顺序依次从往后移动一位</span></span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span>[pos] = value;</span><br><span class="line">	seqlist-&gt;size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="D-删-从顺序表中删除制定的元素"><a href="#D-删-从顺序表中删除制定的元素" class="headerlink" title="D: 删(从顺序表中删除制定的元素)"></a>D: 删(从顺序表中删除制定的元素)</h5><h6 id="a-头删"><a href="#a-头删" class="headerlink" title="a:头删"></a>a:头删</h6><ul>
<li style="list-style: none"><input type="checkbox"> 代码示例</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//头删</span></span><br><span class="line"><span class="comment">//1.从后往前搬，避免覆盖</span></span><br><span class="line"><span class="comment">//2.写循环</span></span><br><span class="line"><span class="comment">//       先确定循环的边界</span></span><br><span class="line"><span class="comment">//       i 空间下标   [0,size-2]</span></span><br><span class="line"><span class="comment">//       i 数据下标   [1,size-1]</span></span><br><span class="line"><span class="comment">//3. 搬移  </span></span><br><span class="line"><span class="comment">//    i对应空间下标：    array[i-1]=array[i];</span></span><br><span class="line"><span class="comment">//    i对应数据下标：    array[i]=array[i+1];</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPopFront</span><span class="params">(SeqList* seqlist)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;size &gt; <span class="number">0</span>);</span><br><span class="line">	<span class="comment">//i 代表的是空间下标</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;seqlist-&gt;size ; i++)&#123;</span><br><span class="line">		seqlist-&gt;<span class="built_in">array</span>[i - <span class="number">1</span>] = seqlist-&gt;<span class="built_in">array</span>[i];</span><br><span class="line">	&#125;</span><br><span class="line">	seqlist-&gt;size--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="b-中间删除-指定位置删除某位置元素"><a href="#b-中间删除-指定位置删除某位置元素" class="headerlink" title="b:中间删除(指定位置删除某位置元素)"></a>b:中间删除(指定位置删除某位置元素)</h6><ul>
<li style="list-style: none"><input type="checkbox"> 代码示例</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除 pos 所在的下标数据</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListErase</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> pos)</span></span>&#123;</span><br><span class="line">	assert(seqlist!=<span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist -&gt;size&gt;<span class="number">0</span>);</span><br><span class="line">	assert(pos &gt;= <span class="number">0</span> &amp;&amp; pos &lt; seqlist-&gt;size);</span><br><span class="line">	<span class="comment">//做数据的搬移，因为是将指定位置的元素删除既可直接将其覆盖</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = pos; i &lt;seqlist-&gt;size; i++)&#123;</span><br><span class="line">		seqlist-&gt;<span class="built_in">array</span>[i] = seqlist-&gt;<span class="built_in">array</span>[i+<span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	seqlist-&gt;size--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="c-尾删"><a href="#c-尾删" class="headerlink" title="c:尾删"></a>c:尾删</h6><ul>
<li style="list-style: none"><input type="checkbox"> 代码示例</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPopBack</span><span class="params">(SeqList*seqlist)</span></span>&#123;gai</span><br><span class="line">	assert(seqlist!=<span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;size &gt; <span class="number">0</span>);</span><br><span class="line">	seqlist-&gt;size--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="E-改（修改pos-所在下标的所在数据）"><a href="#E-改（修改pos-所在下标的所在数据）" class="headerlink" title="E:改（修改pos 所在下标的所在数据）"></a>E:改（修改pos 所在下标的所在数据）</h4><ul>
<li style="list-style: none"><input type="checkbox"> 代码示例</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改pos 所在下标的所在数据为 value</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListModify</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> pos, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(pos&gt;=<span class="number">0</span>&amp;&amp;pos&lt;seqlist-&gt;size);</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span>[pos] = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="F-查-查找指定元素"><a href="#F-查-查找指定元素" class="headerlink" title="F:查(查找指定元素)"></a>F:查(查找指定元素)</h4><h6 id="a-查找"><a href="#a-查找" class="headerlink" title="a:查找"></a>a:查找</h6><ul>
<li style="list-style: none"><input type="checkbox"> 代码示例</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查找</span></span><br><span class="line"><span class="comment">//如果找到，返回第一个找到的下标</span></span><br><span class="line"><span class="comment">//如果没找到返回-1</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SeqListFind</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist!=<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i - <span class="number">0</span>; i &lt; seqlist-&gt;size;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span> (seqlist-&gt;<span class="built_in">array</span>[i] == value)</span><br><span class="line">			<span class="keyword">return</span> i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="b-找到并删除第一个遇到的-value"><a href="#b-找到并删除第一个遇到的-value" class="headerlink" title="b:找到并删除第一个遇到的 value"></a>b:找到并删除第一个遇到的 value</h6><ul>
<li style="list-style: none"><input type="checkbox"> 代码示例<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">SeqListRemove</span><span class="params">(SeqList *seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> pos = SeqListFind(sqlist,value);</span><br><span class="line">	<span class="keyword">if</span> (pos != <span class="number">-1</span>)&#123;</span><br><span class="line">		SeqListErase(seqlist,pos);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<ul>
<li>以上即为数据结构顺序表中最基本的操作增 、删、改、查四种操作的代码示例。<br>尽管理解起来比较抽象，但是只用自己敲一遍，并且理解透彻的话。你会发现也没有想象中的那么难以理解。</li>
</ul>
</blockquote>
<h4 id="三：整体实现"><a href="#三：整体实现" class="headerlink" title="三：整体实现"></a>三：整体实现</h4><h6 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"SeqList.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestSeqList</span><span class="params">()</span></span>&#123;</span><br><span class="line">	SeqList seqlist;</span><br><span class="line">	SeqListInit(&amp;seqlist,<span class="number">100</span>);</span><br><span class="line">	SeqListPushBack(&amp;seqlist,<span class="number">1</span>);</span><br><span class="line">	SeqListPushFront(&amp;seqlist,<span class="number">11</span>);</span><br><span class="line">	SeqListPushBack(&amp;seqlist,<span class="number">2</span>);</span><br><span class="line">	SeqListPushFront(&amp;seqlist,<span class="number">12</span>);</span><br><span class="line">	SeqListPushBack(&amp;seqlist,<span class="number">3</span>);</span><br><span class="line">	SeqListPushFront(&amp;seqlist,<span class="number">13</span>);</span><br><span class="line">	SeqListInsert(&amp;seqlist,<span class="number">4</span>,<span class="number">100</span>);</span><br><span class="line">	SeqListPopBack(&amp;seqlist);</span><br><span class="line">	SeqListPopFront(&amp;seqlist);</span><br><span class="line">	SeqListErase(&amp;seqlist, <span class="number">3</span>);</span><br><span class="line">	SeqListPrint(&amp;seqlist);</span><br><span class="line">	SeqListDestroy(&amp;seqlist);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	TestSeqList();</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="SeqList-c"><a href="#SeqList-c" class="headerlink" title="SeqList.c"></a>SeqList.c</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"SeqList.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//扩容</span></span><br><span class="line"><span class="comment">//条件:当size=capacity时说明顺序表已满</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CheckCapccity</span><span class="params">(SeqList *seqlist)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;size &lt;= seqlist-&gt;capacity);</span><br><span class="line">	<span class="keyword">if</span> (seqlist-&gt;size &lt; seqlist-&gt;capacity)&#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//走到这里，需要扩容</span></span><br><span class="line">	<span class="keyword">int</span> capacity = <span class="number">2</span> * seqlist-&gt;capacity;</span><br><span class="line">	SDataType *<span class="built_in">array</span> = (SDataType *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SDataType)*capacity);</span><br><span class="line">	assert(<span class="built_in">array</span>);</span><br><span class="line">	<span class="comment">//把老数据搬过来</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; seqlist-&gt;capacity; i++)&#123;</span><br><span class="line">		<span class="built_in">array</span>[i] = seqlist-&gt;<span class="built_in">array</span>[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//释放老空间</span></span><br><span class="line">	<span class="built_in">free</span>(seqlist-&gt;<span class="built_in">array</span>);</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span> = <span class="built_in">array</span>;  <span class="comment">//数组代表数组的首地址</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//顺序表的初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListInit</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> capacity)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span> = (SDataType*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SDataType)*capacity);</span><br><span class="line">	seqlist-&gt;size = <span class="number">0</span>;</span><br><span class="line">	seqlist-&gt;capacity = capacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//顺序表的销毁</span></span><br><span class="line"><span class="comment">//只管将数组的首地址置为空，将表示数组的数目size置为0即可</span></span><br><span class="line"><span class="comment">//并且将原来初始化顺序表时申请的空间释放即可</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListDestroy</span><span class="params">(SeqList *seqlist)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span> = <span class="literal">NULL</span>;</span><br><span class="line">	seqlist-&gt;size = <span class="number">0</span>;</span><br><span class="line">	seqlist-&gt;capacity = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">free</span>(seqlist-&gt;<span class="built_in">array</span>);   <span class="comment">//重点</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//尾插，不需要搬移数组中的元素</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPushBack</span><span class="params">(SeqList *seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">	CheckCapccity(seqlist);</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span>[seqlist-&gt;size] = value;</span><br><span class="line">	seqlist-&gt;size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//头插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPushFront</span><span class="params">(SeqList *seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">	CheckCapccity(seqlist);</span><br><span class="line">		<span class="comment">//做数据的搬移，i代表空间下标</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = seqlist-&gt;size ; i &gt; <span class="number">0</span>; i--)&#123;</span><br><span class="line">		seqlist-&gt;<span class="built_in">array</span>[i] = seqlist-&gt;<span class="built_in">array</span>[i - <span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//注意循环的条件</span></span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span>[<span class="number">0</span>] = value;</span><br><span class="line">	seqlist-&gt;size++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//中间插入</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListInsert</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> pos, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line">	assert(pos &gt;= <span class="number">0</span> &amp;&amp; pos &lt;= seqlist-&gt;size);</span><br><span class="line"></span><br><span class="line">	CheckCapccity(seqlist);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = seqlist-&gt;size - <span class="number">1</span>; i &gt;= pos; i--)&#123;</span><br><span class="line">		seqlist-&gt;<span class="built_in">array</span>[i+<span class="number">1</span>] = seqlist-&gt;<span class="built_in">array</span>[i];</span><br><span class="line">	&#125;</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span>[pos] = value;</span><br><span class="line">	seqlist-&gt;size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//尾删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPopBack</span><span class="params">(SeqList*seqlist)</span></span>&#123;</span><br><span class="line">	assert(seqlist!=<span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;size &gt; <span class="number">0</span>);</span><br><span class="line">	seqlist-&gt;size--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//头删</span></span><br><span class="line"><span class="comment">//1.从后往前搬，避免覆盖</span></span><br><span class="line"><span class="comment">//2.写循环</span></span><br><span class="line"><span class="comment">//       先确定循环的边界</span></span><br><span class="line"><span class="comment">//       i 空间下标   [0,size-2]</span></span><br><span class="line"><span class="comment">//       i 数据下标   [1,size-1]</span></span><br><span class="line"><span class="comment">//3. 搬移  </span></span><br><span class="line"><span class="comment">//    i对应空间下标：    array[i-1]=array[i];</span></span><br><span class="line"><span class="comment">//    i对应数据下标：    array[i]=array[i+1];</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPopFront</span><span class="params">(SeqList* seqlist)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span> != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;size &gt; <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;seqlist-&gt;size ; i++)&#123;</span><br><span class="line">		seqlist-&gt;<span class="built_in">array</span>[i - <span class="number">1</span>] = seqlist-&gt;<span class="built_in">array</span>[i];</span><br><span class="line">	&#125;</span><br><span class="line">	seqlist-&gt;size--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除 pos 所在的下标数据</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListErase</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> pos)</span></span>&#123;</span><br><span class="line">	assert(seqlist!=<span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist -&gt;size&gt;<span class="number">0</span>);</span><br><span class="line">	assert(pos &gt;= <span class="number">0</span> &amp;&amp; pos &lt; seqlist-&gt;size);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = pos; i &lt;seqlist-&gt;size; i++)&#123;</span><br><span class="line">		seqlist-&gt;<span class="built_in">array</span>[i] = seqlist-&gt;<span class="built_in">array</span>[i+<span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	seqlist-&gt;size--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPrint</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; seqlist-&gt;size; i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>, seqlist-&gt;<span class="built_in">array</span>[i]);</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改pos 所在下标的所在数据为 value</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListModify</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> pos, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(pos&gt;=<span class="number">0</span>&amp;&amp;pos&lt;seqlist-&gt;size);</span><br><span class="line">	seqlist-&gt;<span class="built_in">array</span>[pos] = value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//查找</span></span><br><span class="line"><span class="comment">//如果找到，返回第一个找到的下标</span></span><br><span class="line"><span class="comment">//如果没找到返回-1</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SeqListFind</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist!=<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; seqlist-&gt;size;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span> (seqlist-&gt;<span class="built_in">array</span>[i] == value)</span><br><span class="line">			<span class="keyword">return</span> i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//找到并删除第一个遇到的 value</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">SeqListRemove</span><span class="params">(SeqList *seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> pos = SeqListFind(seqlist,value);</span><br><span class="line">	<span class="keyword">if</span> (pos != <span class="number">-1</span>)&#123;</span><br><span class="line">		SeqListErase(seqlist,pos);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断顺序表是否为空，</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SeqListEmpty</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> seqlist-&gt;size == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回数据个数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SeqListSize</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> seqlist-&gt;size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListRemoveALl</span><span class="params">(SeqList* seqlist, SDataType value)</span></span>&#123;</span><br><span class="line">	assert(seqlist != <span class="literal">NULL</span>);</span><br><span class="line">	assert(seqlist-&gt;<span class="built_in">array</span>!=<span class="literal">NULL</span>);</span><br><span class="line">	<span class="comment">//方法一：</span></span><br><span class="line">	<span class="comment">////申请一个与原数组等长的数组</span></span><br><span class="line">	<span class="comment">//SDataType *array = (SDataType*)malloc(sizeof(SDataType)*seqlist-&gt;size);</span></span><br><span class="line">	<span class="comment">//assert(array);</span></span><br><span class="line">	<span class="comment">//int index = 0;</span></span><br><span class="line">	<span class="comment">//for (int i = 0; i &lt; seqlist-&gt;size; i++)&#123;</span></span><br><span class="line">	<span class="comment">//	if (seqlist-&gt;array[i] != value)&#123;</span></span><br><span class="line">	<span class="comment">//		array[index] = seqlist-&gt;array[i];</span></span><br><span class="line">	<span class="comment">//		index++;</span></span><br><span class="line">	<span class="comment">//	&#125;</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//for (int j = 0; j &lt; index; j++)&#123;</span></span><br><span class="line">	<span class="comment">//	seqlist-&gt;array[j] = array[j];</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//seqlist-&gt;size = index;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//法二</span></span><br><span class="line">	<span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; seqlist-&gt;size; i++)&#123;</span><br><span class="line">		<span class="keyword">if</span> (seqlist-&gt;<span class="built_in">array</span>[i] != value)&#123;</span><br><span class="line">			seqlist-&gt;<span class="built_in">array</span>[index] = seqlist-&gt;<span class="built_in">array</span>[i];</span><br><span class="line">			index++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	seqlist-&gt;size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="SeqList-h"><a href="#SeqList-h" class="headerlink" title="SeqList.h"></a>SeqList.h</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//typedef struct SeqList&#123; </span></span><br><span class="line"><span class="comment">//	//静态顺序表定义</span></span><br><span class="line"><span class="comment">//	int array[100];    // 能存 100 个数的静态顺序表</span></span><br><span class="line"><span class="comment">//	int size;          //当前顺序表中存放的数，</span></span><br><span class="line"><span class="comment">//	                   //顺序表为空size=0顺便表示了即将插入的下标</span></span><br><span class="line"><span class="comment">//&#125;   Seqlist;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> SDataType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SeqList</span>&#123;</span></span><br><span class="line">	<span class="comment">//动态顺序表定义</span></span><br><span class="line">	SDataType  *<span class="built_in">array</span>;</span><br><span class="line">	<span class="keyword">int</span> size;          </span><br><span class="line">	<span class="keyword">int</span> capacity;    <span class="comment">//容量</span></span><br><span class="line">&#125;   SeqList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//顺序表的初始化/销毁</span></span><br><span class="line"><span class="comment">//seqlist 是一个变量的地址</span></span><br><span class="line"><span class="comment">//capacity是顺序表的初始容量</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListInit</span><span class="params">(SeqList *seqlist, <span class="keyword">int</span> capacity)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListDestroy</span><span class="params">(SeqList *seqlist)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//增删改查</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.增</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//尾插</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPushBack</span><span class="params">(SeqList *seqlist, SDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//头插</span></span><br><span class="line"><span class="comment">//1.从后往前搬，避免覆盖</span></span><br><span class="line"><span class="comment">//2.写循环</span></span><br><span class="line"><span class="comment">//       先确定循环的边界</span></span><br><span class="line"><span class="comment">//       i 空间下标[size,0)</span></span><br><span class="line"><span class="comment">//       i 数据下标[size-1,0]</span></span><br><span class="line"><span class="comment">//3. 搬移  </span></span><br><span class="line"><span class="comment">//    i对应空间下标：    array[i]=array[i-1];</span></span><br><span class="line"><span class="comment">//    i对应数据下标：    array[i+1]=array[i];</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPushFront</span><span class="params">(SeqList *seqlist,SDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//中间插入,往pos所在的下标插入value</span></span><br><span class="line"><span class="comment">//1.从后往前</span></span><br><span class="line"><span class="comment">//       [size-1,pos] i 数据</span></span><br><span class="line"><span class="comment">//       array[i+1]=array[i];</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListInsert</span><span class="params">(SeqList *seqlist,<span class="keyword">int</span> pos,SDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//删</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.尾删</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPopBack</span><span class="params">(SeqList* seqlist)</span></span>;</span><br><span class="line"><span class="comment">//2.头删</span></span><br><span class="line"><span class="comment">//1.从后往前搬，避免覆盖</span></span><br><span class="line"><span class="comment">//2.写循环</span></span><br><span class="line"><span class="comment">//       先确定循环的边界</span></span><br><span class="line"><span class="comment">//       i 空间下标   [0,size-2]</span></span><br><span class="line"><span class="comment">//       i 数据下标   [1,size-1]</span></span><br><span class="line"><span class="comment">//3. 搬移  </span></span><br><span class="line"><span class="comment">//    i对应空间下标：    array[i]=array[i+1];</span></span><br><span class="line"><span class="comment">//    i对应数据下标：    array[i-1]=array[i];</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPopFront</span><span class="params">(SeqList* seqlist)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除 pos 所在的下标数据</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListErase</span><span class="params">(SeqList *seqlist,<span class="keyword">int</span> pos)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//打印</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListPrint</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改pos 所在下标的所在数据为 value</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListModify</span><span class="params">(SeqList *seqlist,<span class="keyword">int</span> pos, SDataType value)</span></span>;</span><br><span class="line"><span class="comment">//查找</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SeqListFind</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist,SDataType value)</span></span>;</span><br><span class="line"><span class="comment">//找到并删除第一个遇到的 value</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">SeqListRemove</span><span class="params">(SeqList *seqlist,SDataType value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断顺序表是否为空，</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SeqListEmpty</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist)</span></span>;</span><br><span class="line"><span class="comment">//返回数据个数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SeqListSize</span><span class="params">(<span class="keyword">const</span> SeqList *seqlist)</span></span>;</span><br><span class="line"><span class="comment">//删除所有遇到的value值</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeqListRemoveALl</span><span class="params">(SeqList* seqlist,SDataType value)</span></span>;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Página anterior"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/header.jpg" alt="jack-wang128801">
            
              <p class="site-author-name" itemprop="name">jack-wang128801</p>
              <div class="site-description motion-element" itemprop="description">Yes,I can.</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">29</span>
                    <span class="site-state-item-name">entradas</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">categorías</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">28</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/jack-wang128801" title="GitHub &rarr; https://github.com/jack-wang128801" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jack-wang128801</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="Cantidad total de caracteres">150k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="Tiempo total de lectura">2:16</span>
  
</div>


  <div class="powered-by">Creado mediante <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Tema – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Visitantes totales">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Visitas totales">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  



  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
